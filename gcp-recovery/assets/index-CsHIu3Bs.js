(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function r(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=r(u);fetch(u.href,d)}})();function $d(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Wu={exports:{}},ri={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0;function Lv(){if(W0)return ri;W0=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(o,u,d){var h=null;if(d!==void 0&&(h=""+d),u.key!==void 0&&(h=""+u.key),"key"in u){d={};for(var p in u)p!=="key"&&(d[p]=u[p])}else d=u;return u=d.ref,{$$typeof:s,type:o,key:h,ref:u!==void 0?u:null,props:d}}return ri.Fragment=n,ri.jsx=r,ri.jsxs=r,ri}var eg;function zv(){return eg||(eg=1,Wu.exports=Lv()),Wu.exports}var l=zv(),ed={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg;function Pv(){if(tg)return ve;tg=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.iterator;function v(_){return _===null||typeof _!="object"?null:(_=w&&_[w]||_["@@iterator"],typeof _=="function"?_:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,z={};function S(_,D,W){this.props=_,this.context=D,this.refs=z,this.updater=W||A}S.prototype.isReactComponent={},S.prototype.setState=function(_,D){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,D,"setState")},S.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function V(){}V.prototype=S.prototype;function X(_,D,W){this.props=_,this.context=D,this.refs=z,this.updater=W||A}var O=X.prototype=new V;O.constructor=X,j(O,S.prototype),O.isPureReactComponent=!0;var ie=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function re(_,D,W,H,J,oe){return W=oe.ref,{$$typeof:s,type:_,key:D,ref:W!==void 0?W:null,props:oe}}function le(_,D){return re(_.type,D,void 0,void 0,void 0,_.props)}function ee(_){return typeof _=="object"&&_!==null&&_.$$typeof===s}function ae(_){var D={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(W){return D[W]})}var K=/\/+/g;function q(_,D){return typeof _=="object"&&_!==null&&_.key!=null?ae(""+_.key):D.toString(36)}function U(){}function te(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(U,U):(_.status="pending",_.then(function(D){_.status==="pending"&&(_.status="fulfilled",_.value=D)},function(D){_.status==="pending"&&(_.status="rejected",_.reason=D)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function ne(_,D,W,H,J){var oe=typeof _;(oe==="undefined"||oe==="boolean")&&(_=null);var ue=!1;if(_===null)ue=!0;else switch(oe){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(_.$$typeof){case s:case n:ue=!0;break;case b:return ue=_._init,ne(ue(_._payload),D,W,H,J)}}if(ue)return J=J(_),ue=H===""?"."+q(_,0):H,ie(J)?(W="",ue!=null&&(W=ue.replace(K,"$&/")+"/"),ne(J,D,W,"",function(ft){return ft})):J!=null&&(ee(J)&&(J=le(J,W+(J.key==null||_&&_.key===J.key?"":(""+J.key).replace(K,"$&/")+"/")+ue)),D.push(J)),1;ue=0;var Ue=H===""?".":H+":";if(ie(_))for(var Se=0;Se<_.length;Se++)H=_[Se],oe=Ue+q(H,Se),ue+=ne(H,D,W,oe,J);else if(Se=v(_),typeof Se=="function")for(_=Se.call(_),Se=0;!(H=_.next()).done;)H=H.value,oe=Ue+q(H,Se++),ue+=ne(H,D,W,oe,J);else if(oe==="object"){if(typeof _.then=="function")return ne(te(_),D,W,H,J);throw D=String(_),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return ue}function k(_,D,W){if(_==null)return _;var H=[],J=0;return ne(_,H,"","",function(oe){return D.call(W,oe,J++)}),H}function $(_){if(_._status===-1){var D=_._result;D=D(),D.then(function(W){(_._status===0||_._status===-1)&&(_._status=1,_._result=W)},function(W){(_._status===0||_._status===-1)&&(_._status=2,_._result=W)}),_._status===-1&&(_._status=0,_._result=D)}if(_._status===1)return _._result.default;throw _._result}var se=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)};function be(){}return ve.Children={map:k,forEach:function(_,D,W){k(_,function(){D.apply(this,arguments)},W)},count:function(_){var D=0;return k(_,function(){D++}),D},toArray:function(_){return k(_,function(D){return D})||[]},only:function(_){if(!ee(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},ve.Component=S,ve.Fragment=r,ve.Profiler=u,ve.PureComponent=X,ve.StrictMode=o,ve.Suspense=m,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,ve.__COMPILER_RUNTIME={__proto__:null,c:function(_){return T.H.useMemoCache(_)}},ve.cache=function(_){return function(){return _.apply(null,arguments)}},ve.cloneElement=function(_,D,W){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var H=j({},_.props),J=_.key,oe=void 0;if(D!=null)for(ue in D.ref!==void 0&&(oe=void 0),D.key!==void 0&&(J=""+D.key),D)!G.call(D,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&D.ref===void 0||(H[ue]=D[ue]);var ue=arguments.length-2;if(ue===1)H.children=W;else if(1<ue){for(var Ue=Array(ue),Se=0;Se<ue;Se++)Ue[Se]=arguments[Se+2];H.children=Ue}return re(_.type,J,void 0,void 0,oe,H)},ve.createContext=function(_){return _={$$typeof:h,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:d,_context:_},_},ve.createElement=function(_,D,W){var H,J={},oe=null;if(D!=null)for(H in D.key!==void 0&&(oe=""+D.key),D)G.call(D,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(J[H]=D[H]);var ue=arguments.length-2;if(ue===1)J.children=W;else if(1<ue){for(var Ue=Array(ue),Se=0;Se<ue;Se++)Ue[Se]=arguments[Se+2];J.children=Ue}if(_&&_.defaultProps)for(H in ue=_.defaultProps,ue)J[H]===void 0&&(J[H]=ue[H]);return re(_,oe,void 0,void 0,null,J)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(_){return{$$typeof:p,render:_}},ve.isValidElement=ee,ve.lazy=function(_){return{$$typeof:b,_payload:{_status:-1,_result:_},_init:$}},ve.memo=function(_,D){return{$$typeof:x,type:_,compare:D===void 0?null:D}},ve.startTransition=function(_){var D=T.T,W={};T.T=W;try{var H=_(),J=T.S;J!==null&&J(W,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(be,se)}catch(oe){se(oe)}finally{T.T=D}},ve.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},ve.use=function(_){return T.H.use(_)},ve.useActionState=function(_,D,W){return T.H.useActionState(_,D,W)},ve.useCallback=function(_,D){return T.H.useCallback(_,D)},ve.useContext=function(_){return T.H.useContext(_)},ve.useDebugValue=function(){},ve.useDeferredValue=function(_,D){return T.H.useDeferredValue(_,D)},ve.useEffect=function(_,D,W){var H=T.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return H.useEffect(_,D)},ve.useId=function(){return T.H.useId()},ve.useImperativeHandle=function(_,D,W){return T.H.useImperativeHandle(_,D,W)},ve.useInsertionEffect=function(_,D){return T.H.useInsertionEffect(_,D)},ve.useLayoutEffect=function(_,D){return T.H.useLayoutEffect(_,D)},ve.useMemo=function(_,D){return T.H.useMemo(_,D)},ve.useOptimistic=function(_,D){return T.H.useOptimistic(_,D)},ve.useReducer=function(_,D,W){return T.H.useReducer(_,D,W)},ve.useRef=function(_){return T.H.useRef(_)},ve.useState=function(_){return T.H.useState(_)},ve.useSyncExternalStore=function(_,D,W){return T.H.useSyncExternalStore(_,D,W)},ve.useTransition=function(){return T.H.useTransition()},ve.version="19.1.0",ve}var ng;function Fd(){return ng||(ng=1,ed.exports=Pv()),ed.exports}var C=Fd();const Te=$d(C);var td={exports:{}},ii={},nd={exports:{}},ad={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag;function Hv(){return ag||(ag=1,function(s){function n(k,$){var se=k.length;k.push($);e:for(;0<se;){var be=se-1>>>1,_=k[be];if(0<u(_,$))k[be]=$,k[se]=_,se=be;else break e}}function r(k){return k.length===0?null:k[0]}function o(k){if(k.length===0)return null;var $=k[0],se=k.pop();if(se!==$){k[0]=se;e:for(var be=0,_=k.length,D=_>>>1;be<D;){var W=2*(be+1)-1,H=k[W],J=W+1,oe=k[J];if(0>u(H,se))J<_&&0>u(oe,H)?(k[be]=oe,k[J]=se,be=J):(k[be]=H,k[W]=se,be=W);else if(J<_&&0>u(oe,se))k[be]=oe,k[J]=se,be=J;else break e}}return $}function u(k,$){var se=k.sortIndex-$.sortIndex;return se!==0?se:k.id-$.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;s.unstable_now=function(){return d.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var m=[],x=[],b=1,w=null,v=3,A=!1,j=!1,z=!1,S=!1,V=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function ie(k){for(var $=r(x);$!==null;){if($.callback===null)o(x);else if($.startTime<=k)o(x),$.sortIndex=$.expirationTime,n(m,$);else break;$=r(x)}}function T(k){if(z=!1,ie(k),!j)if(r(m)!==null)j=!0,G||(G=!0,q());else{var $=r(x);$!==null&&ne(T,$.startTime-k)}}var G=!1,re=-1,le=5,ee=-1;function ae(){return S?!0:!(s.unstable_now()-ee<le)}function K(){if(S=!1,G){var k=s.unstable_now();ee=k;var $=!0;try{e:{j=!1,z&&(z=!1,X(re),re=-1),A=!0;var se=v;try{t:{for(ie(k),w=r(m);w!==null&&!(w.expirationTime>k&&ae());){var be=w.callback;if(typeof be=="function"){w.callback=null,v=w.priorityLevel;var _=be(w.expirationTime<=k);if(k=s.unstable_now(),typeof _=="function"){w.callback=_,ie(k),$=!0;break t}w===r(m)&&o(m),ie(k)}else o(m);w=r(m)}if(w!==null)$=!0;else{var D=r(x);D!==null&&ne(T,D.startTime-k),$=!1}}break e}finally{w=null,v=se,A=!1}$=void 0}}finally{$?q():G=!1}}}var q;if(typeof O=="function")q=function(){O(K)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,te=U.port2;U.port1.onmessage=K,q=function(){te.postMessage(null)}}else q=function(){V(K,0)};function ne(k,$){re=V(function(){k(s.unstable_now())},$)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(k){k.callback=null},s.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<k?Math.floor(1e3/k):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_next=function(k){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var se=v;v=$;try{return k()}finally{v=se}},s.unstable_requestPaint=function(){S=!0},s.unstable_runWithPriority=function(k,$){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var se=v;v=k;try{return $()}finally{v=se}},s.unstable_scheduleCallback=function(k,$,se){var be=s.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?be+se:be):se=be,k){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=se+_,k={id:b++,callback:$,priorityLevel:k,startTime:se,expirationTime:_,sortIndex:-1},se>be?(k.sortIndex=se,n(x,k),r(m)===null&&k===r(x)&&(z?(X(re),re=-1):z=!0,ne(T,se-be))):(k.sortIndex=_,n(m,k),j||A||(j=!0,G||(G=!0,q()))),k},s.unstable_shouldYield=ae,s.unstable_wrapCallback=function(k){var $=v;return function(){var se=v;v=$;try{return k.apply(this,arguments)}finally{v=se}}}}(ad)),ad}var sg;function Bv(){return sg||(sg=1,nd.exports=Hv()),nd.exports}var sd={exports:{}},yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg;function Vv(){if(rg)return yt;rg=1;var s=Fd();function n(m){var x="https://react.dev/errors/"+m;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)x+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var o={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(m,x,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:w==null?null:""+w,children:m,containerInfo:x,implementation:b}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,x){if(m==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,yt.createPortal=function(m,x){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(n(299));return d(m,x,null,b)},yt.flushSync=function(m){var x=h.T,b=o.p;try{if(h.T=null,o.p=2,m)return m()}finally{h.T=x,o.p=b,o.d.f()}},yt.preconnect=function(m,x){typeof m=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,o.d.C(m,x))},yt.prefetchDNS=function(m){typeof m=="string"&&o.d.D(m)},yt.preinit=function(m,x){if(typeof m=="string"&&x&&typeof x.as=="string"){var b=x.as,w=p(b,x.crossOrigin),v=typeof x.integrity=="string"?x.integrity:void 0,A=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;b==="style"?o.d.S(m,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:v,fetchPriority:A}):b==="script"&&o.d.X(m,{crossOrigin:w,integrity:v,fetchPriority:A,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},yt.preinitModule=function(m,x){if(typeof m=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var b=p(x.as,x.crossOrigin);o.d.M(m,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&o.d.M(m)},yt.preload=function(m,x){if(typeof m=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var b=x.as,w=p(b,x.crossOrigin);o.d.L(m,b,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},yt.preloadModule=function(m,x){if(typeof m=="string")if(x){var b=p(x.as,x.crossOrigin);o.d.m(m,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else o.d.m(m)},yt.requestFormReset=function(m){o.d.r(m)},yt.unstable_batchedUpdates=function(m,x){return m(x)},yt.useFormState=function(m,x,b){return h.H.useFormState(m,x,b)},yt.useFormStatus=function(){return h.H.useHostTransitionStatus()},yt.version="19.1.0",yt}var ig;function qv(){if(ig)return sd.exports;ig=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),sd.exports=Vv(),sd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lg;function Gv(){if(lg)return ii;lg=1;var s=Bv(),n=Fd(),r=qv();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(o(188))}function m(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,i=t;;){var c=a.return;if(c===null)break;var f=c.alternate;if(f===null){if(i=c.return,i!==null){a=i;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===a)return p(c),e;if(f===i)return p(c),t;f=f.sibling}throw Error(o(188))}if(a.return!==i.return)a=c,i=f;else{for(var g=!1,y=c.child;y;){if(y===a){g=!0,a=c,i=f;break}if(y===i){g=!0,i=c,a=f;break}y=y.sibling}if(!g){for(y=f.child;y;){if(y===a){g=!0,a=f,i=c;break}if(y===i){g=!0,i=f,a=c;break}y=y.sibling}if(!g)throw Error(o(189))}}if(a.alternate!==i)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,w=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),X=Symbol.for("react.consumer"),O=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function q(e){return e===null||typeof e!="object"?null:(e=K&&e[K]||e["@@iterator"],typeof e=="function"?e:null)}var U=Symbol.for("react.client.reference");function te(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===U?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case j:return"Fragment";case S:return"Profiler";case z:return"StrictMode";case T:return"Suspense";case G:return"SuspenseList";case ee:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case O:return(e.displayName||"Context")+".Provider";case X:return(e._context.displayName||"Context")+".Consumer";case ie:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return t=e.displayName||null,t!==null?t:te(e.type)||"Memo";case le:t=e._payload,e=e._init;try{return te(e(t))}catch{}}return null}var ne=Array.isArray,k=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},be=[],_=-1;function D(e){return{current:e}}function W(e){0>_||(e.current=be[_],be[_]=null,_--)}function H(e,t){_++,be[_]=e.current,e.current=t}var J=D(null),oe=D(null),ue=D(null),Ue=D(null);function Se(e,t){switch(H(ue,t),H(oe,e),H(J,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?E0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=E0(t),e=A0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(J),H(J,e)}function ft(){W(J),W(oe),W(ue)}function Ge(e){e.memoizedState!==null&&H(Ue,e);var t=J.current,a=A0(t,e.type);t!==a&&(H(oe,e),H(J,a))}function en(e){oe.current===e&&(W(J),W(oe)),Ue.current===e&&(W(Ue),ei._currentValue=se)}var Oa=Object.prototype.hasOwnProperty,Vt=s.unstable_scheduleCallback,ss=s.unstable_cancelCallback,Di=s.unstable_shouldYield,Ui=s.unstable_requestPaint,Ot=s.unstable_now,Ho=s.unstable_getCurrentPriorityLevel,lr=s.unstable_ImmediatePriority,Li=s.unstable_UserBlockingPriority,rs=s.unstable_NormalPriority,Bo=s.unstable_LowPriority,zi=s.unstable_IdlePriority,Vo=s.log,qo=s.unstable_setDisableYieldValue,Ma=null,wt=null;function dn(e){if(typeof Vo=="function"&&qo(e),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Ma,e)}catch{}}var Nt=Math.clz32?Math.clz32:Go,or=Math.log,cr=Math.LN2;function Go(e){return e>>>=0,e===0?32:31-(or(e)/cr|0)|0}var is=256,Xn=4194304;function Sn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ls(e,t,a){var i=e.pendingLanes;if(i===0)return 0;var c=0,f=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var y=i&134217727;return y!==0?(i=y&~f,i!==0?c=Sn(i):(g&=y,g!==0?c=Sn(g):a||(a=y&~e,a!==0&&(c=Sn(a))))):(y=i&~f,y!==0?c=Sn(y):g!==0?c=Sn(g):a||(a=i&~e,a!==0&&(c=Sn(a)))),c===0?0:t!==0&&t!==c&&(t&f)===0&&(f=c&-c,a=t&-t,f>=a||f===32&&(a&4194048)!==0)?t:c}function Kn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function $o(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pi(){var e=is;return is<<=1,(is&4194048)===0&&(is=256),e}function ur(){var e=Xn;return Xn<<=1,(Xn&62914560)===0&&(Xn=4194304),e}function dr(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ia(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Fo(e,t,a,i,c,f){var g=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var y=e.entanglements,N=e.expirationTimes,I=e.hiddenUpdates;for(a=g&~a;0<a;){var F=31-Nt(a),Q=1<<F;y[F]=0,N[F]=-1;var L=I[F];if(L!==null)for(I[F]=null,F=0;F<L.length;F++){var P=L[F];P!==null&&(P.lane&=-536870913)}a&=~Q}i!==0&&Hi(e,i,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(g&~t))}function Hi(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Nt(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|a&4194090}function Z(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var i=31-Nt(a),c=1<<i;c&t|e[i]&t&&(e[i]|=t),a&=~c}}function fe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function _e(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function we(){var e=$.p;return e!==0?e:(e=window.event,e===void 0?32:Y0(e.type))}function je(e,t){var a=$.p;try{return $.p=e,t()}finally{$.p=a}}var Oe=Math.random().toString(36).slice(2),Le="__reactFiber$"+Oe,ht="__reactProps$"+Oe,_n="__reactContainer$"+Oe,os="__reactEvents$"+Oe,cs="__reactListeners$"+Oe,Bi="__reactHandles$"+Oe,$e="__reactResources$"+Oe,St="__reactMarker$"+Oe;function qt(e){delete e[Le],delete e[ht],delete e[os],delete e[cs],delete e[Bi]}function tn(e){var t=e[Le];if(t)return t;for(var a=e.parentNode;a;){if(t=a[_n]||a[Le]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=O0(e);e!==null;){if(a=e[Le])return a;e=O0(e)}return t}e=a,a=e.parentNode}return null}function us(e){if(e=e[Le]||e[_n]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function fr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function ds(e){var t=e[$e];return t||(t=e[$e]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function lt(e){e[St]=!0}var pf=new Set,xf={};function Da(e,t){fs(e,t),fs(e+"Capture",t)}function fs(e,t){for(xf[e]=t,e=0;e<t.length;e++)pf.add(t[e])}var Ty=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yf={},bf={};function Ry(e){return Oa.call(bf,e)?!0:Oa.call(yf,e)?!1:Ty.test(e)?bf[e]=!0:(yf[e]=!0,!1)}function Vi(e,t,a){if(Ry(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function qi(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function jn(e,t,a,i){if(i===null)e.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+i)}}var Yo,vf;function hs(e){if(Yo===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Yo=t&&t[1]||"",vf=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yo+e+vf}var Xo=!1;function Ko(e,t){if(!e||Xo)return"";Xo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(P){var L=P}Reflect.construct(e,[],Q)}else{try{Q.call()}catch(P){L=P}e.call(Q.prototype)}}else{try{throw Error()}catch(P){L=P}(Q=e())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(P){if(P&&L&&typeof P.stack=="string")return[P.stack,L.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=i.DetermineComponentFrameRoot(),g=f[0],y=f[1];if(g&&y){var N=g.split(`
`),I=y.split(`
`);for(c=i=0;i<N.length&&!N[i].includes("DetermineComponentFrameRoot");)i++;for(;c<I.length&&!I[c].includes("DetermineComponentFrameRoot");)c++;if(i===N.length||c===I.length)for(i=N.length-1,c=I.length-1;1<=i&&0<=c&&N[i]!==I[c];)c--;for(;1<=i&&0<=c;i--,c--)if(N[i]!==I[c]){if(i!==1||c!==1)do if(i--,c--,0>c||N[i]!==I[c]){var F=`
`+N[i].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=i&&0<=c);break}}}finally{Xo=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?hs(a):""}function ky(e){switch(e.tag){case 26:case 27:case 5:return hs(e.type);case 16:return hs("Lazy");case 13:return hs("Suspense");case 19:return hs("SuspenseList");case 0:case 15:return Ko(e.type,!1);case 11:return Ko(e.type.render,!1);case 1:return Ko(e.type,!0);case 31:return hs("Activity");default:return""}}function wf(e){try{var t="";do t+=ky(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Gt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Oy(e){var t=Nf(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){i=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return i},setValue:function(g){i=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gi(e){e._valueTracker||(e._valueTracker=Oy(e))}function Sf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),i="";return e&&(i=Nf(e)?e.checked?"true":"false":e.value),e=i,e!==a?(t.setValue(e),!0):!1}function $i(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var My=/[\n"\\]/g;function $t(e){return e.replace(My,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Zo(e,t,a,i,c,f,g,y){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Gt(t)):e.value!==""+Gt(t)&&(e.value=""+Gt(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?Qo(e,g,Gt(t)):a!=null?Qo(e,g,Gt(a)):i!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+Gt(y):e.removeAttribute("name")}function _f(e,t,a,i,c,f,g,y){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||t!=null))return;a=a!=null?""+Gt(a):"",t=t!=null?""+Gt(t):a,y||t===e.value||(e.value=t),e.defaultValue=t}i=i??c,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=y?e.checked:!!i,e.defaultChecked=!!i,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g)}function Qo(e,t,a){t==="number"&&$i(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ms(e,t,a,i){if(e=e.options,t){t={};for(var c=0;c<a.length;c++)t["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=t.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&i&&(e[a].defaultSelected=!0)}else{for(a=""+Gt(a),t=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function jf(e,t,a){if(t!=null&&(t=""+Gt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Gt(a):""}function Cf(e,t,a,i){if(t==null){if(i!=null){if(a!=null)throw Error(o(92));if(ne(i)){if(1<i.length)throw Error(o(93));i=i[0]}a=i}a==null&&(a=""),t=a}a=Gt(t),e.defaultValue=a,i=e.textContent,i===a&&i!==""&&i!==null&&(e.value=i)}function gs(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Iy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ef(e,t,a){var i=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,a):typeof a!="number"||a===0||Iy.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Af(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var i in a)!a.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var c in t)i=t[c],t.hasOwnProperty(c)&&a[c]!==i&&Ef(e,c,i)}else for(var f in t)t.hasOwnProperty(f)&&Ef(e,f,t[f])}function Jo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fi(e){return Uy.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Wo=null;function ec(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ps=null,xs=null;function Tf(e){var t=us(e);if(t&&(e=t.stateNode)){var a=e[ht]||null;e:switch(e=t.stateNode,t.type){case"input":if(Zo(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+$t(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var i=a[t];if(i!==e&&i.form===e.form){var c=i[ht]||null;if(!c)throw Error(o(90));Zo(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<a.length;t++)i=a[t],i.form===e.form&&Sf(i)}break e;case"textarea":jf(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&ms(e,!!a.multiple,t,!1)}}}var tc=!1;function Rf(e,t,a){if(tc)return e(t,a);tc=!0;try{var i=e(t);return i}finally{if(tc=!1,(ps!==null||xs!==null)&&(kl(),ps&&(t=ps,e=xs,xs=ps=null,Tf(t),e)))for(t=0;t<e.length;t++)Tf(e[t])}}function hr(e,t){var a=e.stateNode;if(a===null)return null;var i=a[ht]||null;if(i===null)return null;a=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nc=!1;if(Cn)try{var mr={};Object.defineProperty(mr,"passive",{get:function(){nc=!0}}),window.addEventListener("test",mr,mr),window.removeEventListener("test",mr,mr)}catch{nc=!1}var Zn=null,ac=null,Yi=null;function kf(){if(Yi)return Yi;var e,t=ac,a=t.length,i,c="value"in Zn?Zn.value:Zn.textContent,f=c.length;for(e=0;e<a&&t[e]===c[e];e++);var g=a-e;for(i=1;i<=g&&t[a-i]===c[f-i];i++);return Yi=c.slice(e,1<i?1-i:void 0)}function Xi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ki(){return!0}function Of(){return!1}function Ct(e){function t(a,i,c,f,g){this._reactName=a,this._targetInst=c,this.type=i,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(a=e[y],this[y]=a?a(f):f[y]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ki:Of,this.isPropagationStopped=Of,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),t}var Ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=Ct(Ua),gr=b({},Ua,{view:0,detail:0}),Ly=Ct(gr),sc,rc,pr,Qi=b({},gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pr&&(pr&&e.type==="mousemove"?(sc=e.screenX-pr.screenX,rc=e.screenY-pr.screenY):rc=sc=0,pr=e),sc)},movementY:function(e){return"movementY"in e?e.movementY:rc}}),Mf=Ct(Qi),zy=b({},Qi,{dataTransfer:0}),Py=Ct(zy),Hy=b({},gr,{relatedTarget:0}),ic=Ct(Hy),By=b({},Ua,{animationName:0,elapsedTime:0,pseudoElement:0}),Vy=Ct(By),qy=b({},Ua,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gy=Ct(qy),$y=b({},Ua,{data:0}),If=Ct($y),Fy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ky(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xy[e])?!!t[e]:!1}function lc(){return Ky}var Zy=b({},gr,{key:function(e){if(e.key){var t=Fy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Yy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lc,charCode:function(e){return e.type==="keypress"?Xi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qy=Ct(Zy),Jy=b({},Qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Df=Ct(Jy),Wy=b({},gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lc}),eb=Ct(Wy),tb=b({},Ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),nb=Ct(tb),ab=b({},Qi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sb=Ct(ab),rb=b({},Ua,{newState:0,oldState:0}),ib=Ct(rb),lb=[9,13,27,32],oc=Cn&&"CompositionEvent"in window,xr=null;Cn&&"documentMode"in document&&(xr=document.documentMode);var ob=Cn&&"TextEvent"in window&&!xr,Uf=Cn&&(!oc||xr&&8<xr&&11>=xr),Lf=" ",zf=!1;function Pf(e,t){switch(e){case"keyup":return lb.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ys=!1;function cb(e,t){switch(e){case"compositionend":return Hf(t);case"keypress":return t.which!==32?null:(zf=!0,Lf);case"textInput":return e=t.data,e===Lf&&zf?null:e;default:return null}}function ub(e,t){if(ys)return e==="compositionend"||!oc&&Pf(e,t)?(e=kf(),Yi=ac=Zn=null,ys=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Uf&&t.locale!=="ko"?null:t.data;default:return null}}var db={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!db[e.type]:t==="textarea"}function Vf(e,t,a,i){ps?xs?xs.push(i):xs=[i]:ps=i,t=Ll(t,"onChange"),0<t.length&&(a=new Zi("onChange","change",null,a,i),e.push({event:a,listeners:t}))}var yr=null,br=null;function fb(e){N0(e,0)}function Ji(e){var t=fr(e);if(Sf(t))return e}function qf(e,t){if(e==="change")return t}var Gf=!1;if(Cn){var cc;if(Cn){var uc="oninput"in document;if(!uc){var $f=document.createElement("div");$f.setAttribute("oninput","return;"),uc=typeof $f.oninput=="function"}cc=uc}else cc=!1;Gf=cc&&(!document.documentMode||9<document.documentMode)}function Ff(){yr&&(yr.detachEvent("onpropertychange",Yf),br=yr=null)}function Yf(e){if(e.propertyName==="value"&&Ji(br)){var t=[];Vf(t,br,e,ec(e)),Rf(fb,t)}}function hb(e,t,a){e==="focusin"?(Ff(),yr=t,br=a,yr.attachEvent("onpropertychange",Yf)):e==="focusout"&&Ff()}function mb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ji(br)}function gb(e,t){if(e==="click")return Ji(t)}function pb(e,t){if(e==="input"||e==="change")return Ji(t)}function xb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mt=typeof Object.is=="function"?Object.is:xb;function vr(e,t){if(Mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(i=0;i<a.length;i++){var c=a[i];if(!Oa.call(t,c)||!Mt(e[c],t[c]))return!1}return!0}function Xf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kf(e,t){var a=Xf(e);e=0;for(var i;a;){if(a.nodeType===3){if(i=e+a.textContent.length,e<=t&&i>=t)return{node:a,offset:t-e};e=i}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xf(a)}}function Zf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=$i(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=$i(e.document)}return t}function dc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var yb=Cn&&"documentMode"in document&&11>=document.documentMode,bs=null,fc=null,wr=null,hc=!1;function Jf(e,t,a){var i=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hc||bs==null||bs!==$i(i)||(i=bs,"selectionStart"in i&&dc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),wr&&vr(wr,i)||(wr=i,i=Ll(fc,"onSelect"),0<i.length&&(t=new Zi("onSelect","select",null,t,a),e.push({event:t,listeners:i}),t.target=bs)))}function La(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var vs={animationend:La("Animation","AnimationEnd"),animationiteration:La("Animation","AnimationIteration"),animationstart:La("Animation","AnimationStart"),transitionrun:La("Transition","TransitionRun"),transitionstart:La("Transition","TransitionStart"),transitioncancel:La("Transition","TransitionCancel"),transitionend:La("Transition","TransitionEnd")},mc={},Wf={};Cn&&(Wf=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function za(e){if(mc[e])return mc[e];if(!vs[e])return e;var t=vs[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Wf)return mc[e]=t[a];return e}var eh=za("animationend"),th=za("animationiteration"),nh=za("animationstart"),bb=za("transitionrun"),vb=za("transitionstart"),wb=za("transitioncancel"),ah=za("transitionend"),sh=new Map,gc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gc.push("scrollEnd");function nn(e,t){sh.set(e,t),Da(t,[e])}var rh=new WeakMap;function Ft(e,t){if(typeof e=="object"&&e!==null){var a=rh.get(e);return a!==void 0?a:(t={value:e,source:t,stack:wf(t)},rh.set(e,t),t)}return{value:e,source:t,stack:wf(t)}}var Yt=[],ws=0,pc=0;function Wi(){for(var e=ws,t=pc=ws=0;t<e;){var a=Yt[t];Yt[t++]=null;var i=Yt[t];Yt[t++]=null;var c=Yt[t];Yt[t++]=null;var f=Yt[t];if(Yt[t++]=null,i!==null&&c!==null){var g=i.pending;g===null?c.next=c:(c.next=g.next,g.next=c),i.pending=c}f!==0&&ih(a,c,f)}}function el(e,t,a,i){Yt[ws++]=e,Yt[ws++]=t,Yt[ws++]=a,Yt[ws++]=i,pc|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function xc(e,t,a,i){return el(e,t,a,i),tl(e)}function Ns(e,t){return el(e,null,null,t),tl(e)}function ih(e,t,a){e.lanes|=a;var i=e.alternate;i!==null&&(i.lanes|=a);for(var c=!1,f=e.return;f!==null;)f.childLanes|=a,i=f.alternate,i!==null&&(i.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&t!==null&&(c=31-Nt(a),e=f.hiddenUpdates,i=e[c],i===null?e[c]=[t]:i.push(t),t.lane=a|536870912),f):null}function tl(e){if(50<Fr)throw Fr=0,Su=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ss={};function Nb(e,t,a,i){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,a,i){return new Nb(e,t,a,i)}function yc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function En(e,t){var a=e.alternate;return a===null?(a=It(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function lh(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function nl(e,t,a,i,c,f){var g=0;if(i=e,typeof e=="function")yc(e)&&(g=1);else if(typeof e=="string")g=_v(e,a,J.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ee:return e=It(31,a,t,c),e.elementType=ee,e.lanes=f,e;case j:return Pa(a.children,c,f,t);case z:g=8,c|=24;break;case S:return e=It(12,a,t,c|2),e.elementType=S,e.lanes=f,e;case T:return e=It(13,a,t,c),e.elementType=T,e.lanes=f,e;case G:return e=It(19,a,t,c),e.elementType=G,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case V:case O:g=10;break e;case X:g=9;break e;case ie:g=11;break e;case re:g=14;break e;case le:g=16,i=null;break e}g=29,a=Error(o(130,e===null?"null":typeof e,"")),i=null}return t=It(g,a,t,c),t.elementType=e,t.type=i,t.lanes=f,t}function Pa(e,t,a,i){return e=It(7,e,i,t),e.lanes=a,e}function bc(e,t,a){return e=It(6,e,null,t),e.lanes=a,e}function vc(e,t,a){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var _s=[],js=0,al=null,sl=0,Xt=[],Kt=0,Ha=null,An=1,Tn="";function Ba(e,t){_s[js++]=sl,_s[js++]=al,al=e,sl=t}function oh(e,t,a){Xt[Kt++]=An,Xt[Kt++]=Tn,Xt[Kt++]=Ha,Ha=e;var i=An;e=Tn;var c=32-Nt(i)-1;i&=~(1<<c),a+=1;var f=32-Nt(t)+c;if(30<f){var g=c-c%5;f=(i&(1<<g)-1).toString(32),i>>=g,c-=g,An=1<<32-Nt(t)+c|a<<c|i,Tn=f+e}else An=1<<f|a<<c|i,Tn=e}function wc(e){e.return!==null&&(Ba(e,1),oh(e,1,0))}function Nc(e){for(;e===al;)al=_s[--js],_s[js]=null,sl=_s[--js],_s[js]=null;for(;e===Ha;)Ha=Xt[--Kt],Xt[Kt]=null,Tn=Xt[--Kt],Xt[Kt]=null,An=Xt[--Kt],Xt[Kt]=null}var _t=null,Ke=null,Me=!1,Va=null,fn=!1,Sc=Error(o(519));function qa(e){var t=Error(o(418,""));throw _r(Ft(t,e)),Sc}function ch(e){var t=e.stateNode,a=e.type,i=e.memoizedProps;switch(t[Le]=e,t[ht]=i,a){case"dialog":Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":case"embed":Ae("load",t);break;case"video":case"audio":for(a=0;a<Xr.length;a++)Ae(Xr[a],t);break;case"source":Ae("error",t);break;case"img":case"image":case"link":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"input":Ae("invalid",t),_f(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Gi(t);break;case"select":Ae("invalid",t);break;case"textarea":Ae("invalid",t),Cf(t,i.value,i.defaultValue,i.children),Gi(t)}a=i.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||i.suppressHydrationWarning===!0||C0(t.textContent,a)?(i.popover!=null&&(Ae("beforetoggle",t),Ae("toggle",t)),i.onScroll!=null&&Ae("scroll",t),i.onScrollEnd!=null&&Ae("scrollend",t),i.onClick!=null&&(t.onclick=zl),t=!0):t=!1,t||qa(e)}function uh(e){for(_t=e.return;_t;)switch(_t.tag){case 5:case 13:fn=!1;return;case 27:case 3:fn=!0;return;default:_t=_t.return}}function Nr(e){if(e!==_t)return!1;if(!Me)return uh(e),Me=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Pu(e.type,e.memoizedProps)),a=!a),a&&Ke&&qa(e),uh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Ke=sn(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Ke=null}}else t===27?(t=Ke,fa(e.type)?(e=qu,qu=null,Ke=e):Ke=t):Ke=_t?sn(e.stateNode.nextSibling):null;return!0}function Sr(){Ke=_t=null,Me=!1}function dh(){var e=Va;return e!==null&&(Tt===null?Tt=e:Tt.push.apply(Tt,e),Va=null),e}function _r(e){Va===null?Va=[e]:Va.push(e)}var _c=D(null),Ga=null,Rn=null;function Qn(e,t,a){H(_c,t._currentValue),t._currentValue=a}function kn(e){e._currentValue=_c.current,W(_c)}function jc(e,t,a){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===a)break;e=e.return}}function Cc(e,t,a,i){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var g=c.child;f=f.firstContext;e:for(;f!==null;){var y=f;f=c;for(var N=0;N<t.length;N++)if(y.context===t[N]){f.lanes|=a,y=f.alternate,y!==null&&(y.lanes|=a),jc(f.return,a,e),i||(g=null);break e}f=y.next}}else if(c.tag===18){if(g=c.return,g===null)throw Error(o(341));g.lanes|=a,f=g.alternate,f!==null&&(f.lanes|=a),jc(g,a,e),g=null}else g=c.child;if(g!==null)g.return=c;else for(g=c;g!==null;){if(g===e){g=null;break}if(c=g.sibling,c!==null){c.return=g.return,g=c;break}g=g.return}c=g}}function jr(e,t,a,i){e=null;for(var c=t,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var g=c.alternate;if(g===null)throw Error(o(387));if(g=g.memoizedProps,g!==null){var y=c.type;Mt(c.pendingProps.value,g.value)||(e!==null?e.push(y):e=[y])}}else if(c===Ue.current){if(g=c.alternate,g===null)throw Error(o(387));g.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(ei):e=[ei])}c=c.return}e!==null&&Cc(t,e,a,i),t.flags|=262144}function rl(e){for(e=e.firstContext;e!==null;){if(!Mt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $a(e){Ga=e,Rn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xt(e){return fh(Ga,e)}function il(e,t){return Ga===null&&$a(e),fh(e,t)}function fh(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Rn===null){if(e===null)throw Error(o(308));Rn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Rn=Rn.next=t;return a}var Sb=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},_b=s.unstable_scheduleCallback,jb=s.unstable_NormalPriority,rt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ec(){return{controller:new Sb,data:new Map,refCount:0}}function Cr(e){e.refCount--,e.refCount===0&&_b(jb,function(){e.controller.abort()})}var Er=null,Ac=0,Cs=0,Es=null;function Cb(e,t){if(Er===null){var a=Er=[];Ac=0,Cs=Ru(),Es={status:"pending",value:void 0,then:function(i){a.push(i)}}}return Ac++,t.then(hh,hh),t}function hh(){if(--Ac===0&&Er!==null){Es!==null&&(Es.status="fulfilled");var e=Er;Er=null,Cs=0,Es=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Eb(e,t){var a=[],i={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var c=0;c<a.length;c++)(0,a[c])(t)},function(c){for(i.status="rejected",i.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),i}var mh=k.S;k.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Cb(e,t),mh!==null&&mh(e,t)};var Fa=D(null);function Tc(){var e=Fa.current;return e!==null?e:qe.pooledCache}function ll(e,t){t===null?H(Fa,Fa.current):H(Fa,t.pool)}function gh(){var e=Tc();return e===null?null:{parent:rt._currentValue,pool:e}}var Ar=Error(o(460)),ph=Error(o(474)),ol=Error(o(542)),Rc={then:function(){}};function xh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cl(){}function yh(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(cl,cl),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,vh(e),e;default:if(typeof t.status=="string")t.then(cl,cl);else{if(e=qe,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=i}},function(i){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,vh(e),e}throw Tr=t,Ar}}var Tr=null;function bh(){if(Tr===null)throw Error(o(459));var e=Tr;return Tr=null,e}function vh(e){if(e===Ar||e===ol)throw Error(o(483))}var Jn=!1;function kc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Wn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ea(e,t,a){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Ie&2)!==0){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,t=tl(e),ih(e,null,a),t}return el(e,i,t,a),tl(e)}function Rr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,Z(e,a)}}function Mc(e,t){var a=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,a===i)){var c=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?c=f=g:f=f.next=g,a=a.next}while(a!==null);f===null?c=f=t:f=f.next=t}else c=f=t;a={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:i.shared,callbacks:i.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Ic=!1;function kr(){if(Ic){var e=Es;if(e!==null)throw e}}function Or(e,t,a,i){Ic=!1;var c=e.updateQueue;Jn=!1;var f=c.firstBaseUpdate,g=c.lastBaseUpdate,y=c.shared.pending;if(y!==null){c.shared.pending=null;var N=y,I=N.next;N.next=null,g===null?f=I:g.next=I,g=N;var F=e.alternate;F!==null&&(F=F.updateQueue,y=F.lastBaseUpdate,y!==g&&(y===null?F.firstBaseUpdate=I:y.next=I,F.lastBaseUpdate=N))}if(f!==null){var Q=c.baseState;g=0,F=I=N=null,y=f;do{var L=y.lane&-536870913,P=L!==y.lane;if(P?(Re&L)===L:(i&L)===L){L!==0&&L===Cs&&(Ic=!0),F!==null&&(F=F.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var xe=e,me=y;L=t;var He=a;switch(me.tag){case 1:if(xe=me.payload,typeof xe=="function"){Q=xe.call(He,Q,L);break e}Q=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=me.payload,L=typeof xe=="function"?xe.call(He,Q,L):xe,L==null)break e;Q=b({},Q,L);break e;case 2:Jn=!0}}L=y.callback,L!==null&&(e.flags|=64,P&&(e.flags|=8192),P=c.callbacks,P===null?c.callbacks=[L]:P.push(L))}else P={lane:L,tag:y.tag,payload:y.payload,callback:y.callback,next:null},F===null?(I=F=P,N=Q):F=F.next=P,g|=L;if(y=y.next,y===null){if(y=c.shared.pending,y===null)break;P=y,y=P.next,P.next=null,c.lastBaseUpdate=P,c.shared.pending=null}}while(!0);F===null&&(N=Q),c.baseState=N,c.firstBaseUpdate=I,c.lastBaseUpdate=F,f===null&&(c.shared.lanes=0),oa|=g,e.lanes=g,e.memoizedState=Q}}function wh(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Nh(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)wh(a[e],t)}var As=D(null),ul=D(0);function Sh(e,t){e=zn,H(ul,e),H(As,t),zn=e|t.baseLanes}function Dc(){H(ul,zn),H(As,As.current)}function Uc(){zn=ul.current,W(As),W(ul)}var ta=0,Ne=null,ze=null,We=null,dl=!1,Ts=!1,Ya=!1,fl=0,Mr=0,Rs=null,Ab=0;function Qe(){throw Error(o(321))}function Lc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Mt(e[a],t[a]))return!1;return!0}function zc(e,t,a,i,c,f){return ta=f,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,k.H=e===null||e.memoizedState===null?im:lm,Ya=!1,f=a(i,c),Ya=!1,Ts&&(f=jh(t,a,i,c)),_h(e),f}function _h(e){k.H=yl;var t=ze!==null&&ze.next!==null;if(ta=0,We=ze=Ne=null,dl=!1,Mr=0,Rs=null,t)throw Error(o(300));e===null||ot||(e=e.dependencies,e!==null&&rl(e)&&(ot=!0))}function jh(e,t,a,i){Ne=e;var c=0;do{if(Ts&&(Rs=null),Mr=0,Ts=!1,25<=c)throw Error(o(301));if(c+=1,We=ze=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}k.H=Db,f=t(a,i)}while(Ts);return f}function Tb(){var e=k.H,t=e.useState()[0];return t=typeof t.then=="function"?Ir(t):t,e=e.useState()[0],(ze!==null?ze.memoizedState:null)!==e&&(Ne.flags|=1024),t}function Pc(){var e=fl!==0;return fl=0,e}function Hc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Bc(e){if(dl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}dl=!1}ta=0,We=ze=Ne=null,Ts=!1,Mr=fl=0,Rs=null}function Et(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Ne.memoizedState=We=e:We=We.next=e,We}function et(){if(ze===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=ze.next;var t=We===null?Ne.memoizedState:We.next;if(t!==null)We=t,ze=e;else{if(e===null)throw Ne.alternate===null?Error(o(467)):Error(o(310));ze=e,e={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},We===null?Ne.memoizedState=We=e:We=We.next=e}return We}function Vc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ir(e){var t=Mr;return Mr+=1,Rs===null&&(Rs=[]),e=yh(Rs,e,t),t=Ne,(We===null?t.memoizedState:We.next)===null&&(t=t.alternate,k.H=t===null||t.memoizedState===null?im:lm),e}function hl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ir(e);if(e.$$typeof===O)return xt(e)}throw Error(o(438,String(e)))}function qc(e){var t=null,a=Ne.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var i=Ne.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Vc(),Ne.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),i=0;i<e;i++)a[i]=ae;return t.index++,a}function On(e,t){return typeof t=="function"?t(e):t}function ml(e){var t=et();return Gc(t,ze,e)}function Gc(e,t,a){var i=e.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=a;var c=e.baseQueue,f=i.pending;if(f!==null){if(c!==null){var g=c.next;c.next=f.next,f.next=g}t.baseQueue=c=f,i.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{t=c.next;var y=g=null,N=null,I=t,F=!1;do{var Q=I.lane&-536870913;if(Q!==I.lane?(Re&Q)===Q:(ta&Q)===Q){var L=I.revertLane;if(L===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),Q===Cs&&(F=!0);else if((ta&L)===L){I=I.next,L===Cs&&(F=!0);continue}else Q={lane:0,revertLane:I.revertLane,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},N===null?(y=N=Q,g=f):N=N.next=Q,Ne.lanes|=L,oa|=L;Q=I.action,Ya&&a(f,Q),f=I.hasEagerState?I.eagerState:a(f,Q)}else L={lane:Q,revertLane:I.revertLane,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},N===null?(y=N=L,g=f):N=N.next=L,Ne.lanes|=Q,oa|=Q;I=I.next}while(I!==null&&I!==t);if(N===null?g=f:N.next=y,!Mt(f,e.memoizedState)&&(ot=!0,F&&(a=Es,a!==null)))throw a;e.memoizedState=f,e.baseState=g,e.baseQueue=N,i.lastRenderedState=f}return c===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function $c(e){var t=et(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var i=a.dispatch,c=a.pending,f=t.memoizedState;if(c!==null){a.pending=null;var g=c=c.next;do f=e(f,g.action),g=g.next;while(g!==c);Mt(f,t.memoizedState)||(ot=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),a.lastRenderedState=f}return[f,i]}function Ch(e,t,a){var i=Ne,c=et(),f=Me;if(f){if(a===void 0)throw Error(o(407));a=a()}else a=t();var g=!Mt((ze||c).memoizedState,a);g&&(c.memoizedState=a,ot=!0),c=c.queue;var y=Th.bind(null,i,c,e);if(Dr(2048,8,y,[e]),c.getSnapshot!==t||g||We!==null&&We.memoizedState.tag&1){if(i.flags|=2048,ks(9,gl(),Ah.bind(null,i,c,a,t),null),qe===null)throw Error(o(349));f||(ta&124)!==0||Eh(i,t,a)}return a}function Eh(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=Ne.updateQueue,t===null?(t=Vc(),Ne.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Ah(e,t,a,i){t.value=a,t.getSnapshot=i,Rh(t)&&kh(e)}function Th(e,t,a){return a(function(){Rh(t)&&kh(e)})}function Rh(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Mt(e,a)}catch{return!0}}function kh(e){var t=Ns(e,2);t!==null&&Pt(t,e,2)}function Fc(e){var t=Et();if(typeof e=="function"){var a=e;if(e=a(),Ya){dn(!0);try{a()}finally{dn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:e},t}function Oh(e,t,a,i){return e.baseState=a,Gc(e,ze,typeof i=="function"?i:On)}function Rb(e,t,a,i,c){if(xl(e))throw Error(o(485));if(e=t.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){f.listeners.push(g)}};k.T!==null?a(!0):f.isTransition=!1,i(f),a=t.pending,a===null?(f.next=t.pending=f,Mh(t,f)):(f.next=a.next,t.pending=a.next=f)}}function Mh(e,t){var a=t.action,i=t.payload,c=e.state;if(t.isTransition){var f=k.T,g={};k.T=g;try{var y=a(c,i),N=k.S;N!==null&&N(g,y),Ih(e,t,y)}catch(I){Yc(e,t,I)}finally{k.T=f}}else try{f=a(c,i),Ih(e,t,f)}catch(I){Yc(e,t,I)}}function Ih(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(i){Dh(e,t,i)},function(i){return Yc(e,t,i)}):Dh(e,t,a)}function Dh(e,t,a){t.status="fulfilled",t.value=a,Uh(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Mh(e,a)))}function Yc(e,t,a){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=a,Uh(t),t=t.next;while(t!==i)}e.action=null}function Uh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Lh(e,t){return t}function zh(e,t){if(Me){var a=qe.formState;if(a!==null){e:{var i=Ne;if(Me){if(Ke){t:{for(var c=Ke,f=fn;c.nodeType!==8;){if(!f){c=null;break t}if(c=sn(c.nextSibling),c===null){c=null;break t}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){Ke=sn(c.nextSibling),i=c.data==="F!";break e}}qa(i)}i=!1}i&&(t=a[0])}}return a=Et(),a.memoizedState=a.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lh,lastRenderedState:t},a.queue=i,a=am.bind(null,Ne,i),i.dispatch=a,i=Fc(!1),f=Jc.bind(null,Ne,!1,i.queue),i=Et(),c={state:t,dispatch:null,action:e,pending:null},i.queue=c,a=Rb.bind(null,Ne,c,f,a),c.dispatch=a,i.memoizedState=e,[t,a,!1]}function Ph(e){var t=et();return Hh(t,ze,e)}function Hh(e,t,a){if(t=Gc(e,t,Lh)[0],e=ml(On)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Ir(t)}catch(g){throw g===Ar?ol:g}else i=t;t=et();var c=t.queue,f=c.dispatch;return a!==t.memoizedState&&(Ne.flags|=2048,ks(9,gl(),kb.bind(null,c,a),null)),[i,f,e]}function kb(e,t){e.action=t}function Bh(e){var t=et(),a=ze;if(a!==null)return Hh(t,a,e);et(),t=t.memoizedState,a=et();var i=a.queue.dispatch;return a.memoizedState=e,[t,i,!1]}function ks(e,t,a,i){return e={tag:e,create:a,deps:i,inst:t,next:null},t=Ne.updateQueue,t===null&&(t=Vc(),Ne.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(i=a.next,a.next=e,e.next=i,t.lastEffect=e),e}function gl(){return{destroy:void 0,resource:void 0}}function Vh(){return et().memoizedState}function pl(e,t,a,i){var c=Et();i=i===void 0?null:i,Ne.flags|=e,c.memoizedState=ks(1|t,gl(),a,i)}function Dr(e,t,a,i){var c=et();i=i===void 0?null:i;var f=c.memoizedState.inst;ze!==null&&i!==null&&Lc(i,ze.memoizedState.deps)?c.memoizedState=ks(t,f,a,i):(Ne.flags|=e,c.memoizedState=ks(1|t,f,a,i))}function qh(e,t){pl(8390656,8,e,t)}function Gh(e,t){Dr(2048,8,e,t)}function $h(e,t){return Dr(4,2,e,t)}function Fh(e,t){return Dr(4,4,e,t)}function Yh(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xh(e,t,a){a=a!=null?a.concat([e]):null,Dr(4,4,Yh.bind(null,t,e),a)}function Xc(){}function Kh(e,t){var a=et();t=t===void 0?null:t;var i=a.memoizedState;return t!==null&&Lc(t,i[1])?i[0]:(a.memoizedState=[e,t],e)}function Zh(e,t){var a=et();t=t===void 0?null:t;var i=a.memoizedState;if(t!==null&&Lc(t,i[1]))return i[0];if(i=e(),Ya){dn(!0);try{e()}finally{dn(!1)}}return a.memoizedState=[i,t],i}function Kc(e,t,a){return a===void 0||(ta&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=Wm(),Ne.lanes|=e,oa|=e,a)}function Qh(e,t,a,i){return Mt(a,t)?a:As.current!==null?(e=Kc(e,a,i),Mt(e,t)||(ot=!0),e):(ta&42)===0?(ot=!0,e.memoizedState=a):(e=Wm(),Ne.lanes|=e,oa|=e,t)}function Jh(e,t,a,i,c){var f=$.p;$.p=f!==0&&8>f?f:8;var g=k.T,y={};k.T=y,Jc(e,!1,t,a);try{var N=c(),I=k.S;if(I!==null&&I(y,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var F=Eb(N,i);Ur(e,t,F,zt(e))}else Ur(e,t,i,zt(e))}catch(Q){Ur(e,t,{then:function(){},status:"rejected",reason:Q},zt())}finally{$.p=f,k.T=g}}function Ob(){}function Zc(e,t,a,i){if(e.tag!==5)throw Error(o(476));var c=Wh(e).queue;Jh(e,c,t,se,a===null?Ob:function(){return em(e),a(i)})}function Wh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:se},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function em(e){var t=Wh(e).next.queue;Ur(e,t,{},zt())}function Qc(){return xt(ei)}function tm(){return et().memoizedState}function nm(){return et().memoizedState}function Mb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=zt();e=Wn(a);var i=ea(t,e,a);i!==null&&(Pt(i,t,a),Rr(i,t,a)),t={cache:Ec()},e.payload=t;return}t=t.return}}function Ib(e,t,a){var i=zt();a={lane:i,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},xl(e)?sm(t,a):(a=xc(e,t,a,i),a!==null&&(Pt(a,e,i),rm(a,t,i)))}function am(e,t,a){var i=zt();Ur(e,t,a,i)}function Ur(e,t,a,i){var c={lane:i,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(xl(e))sm(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,y=f(g,a);if(c.hasEagerState=!0,c.eagerState=y,Mt(y,g))return el(e,t,c,0),qe===null&&Wi(),!1}catch{}finally{}if(a=xc(e,t,c,i),a!==null)return Pt(a,e,i),rm(a,t,i),!0}return!1}function Jc(e,t,a,i){if(i={lane:2,revertLane:Ru(),action:i,hasEagerState:!1,eagerState:null,next:null},xl(e)){if(t)throw Error(o(479))}else t=xc(e,a,i,2),t!==null&&Pt(t,e,2)}function xl(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function sm(e,t){Ts=dl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function rm(e,t,a){if((a&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,a|=i,t.lanes=a,Z(e,a)}}var yl={readContext:xt,use:hl,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe},im={readContext:xt,use:hl,useCallback:function(e,t){return Et().memoizedState=[e,t===void 0?null:t],e},useContext:xt,useEffect:qh,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,pl(4194308,4,Yh.bind(null,t,e),a)},useLayoutEffect:function(e,t){return pl(4194308,4,e,t)},useInsertionEffect:function(e,t){pl(4,2,e,t)},useMemo:function(e,t){var a=Et();t=t===void 0?null:t;var i=e();if(Ya){dn(!0);try{e()}finally{dn(!1)}}return a.memoizedState=[i,t],i},useReducer:function(e,t,a){var i=Et();if(a!==void 0){var c=a(t);if(Ya){dn(!0);try{a(t)}finally{dn(!1)}}}else c=t;return i.memoizedState=i.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},i.queue=e,e=e.dispatch=Ib.bind(null,Ne,e),[i.memoizedState,e]},useRef:function(e){var t=Et();return e={current:e},t.memoizedState=e},useState:function(e){e=Fc(e);var t=e.queue,a=am.bind(null,Ne,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Xc,useDeferredValue:function(e,t){var a=Et();return Kc(a,e,t)},useTransition:function(){var e=Fc(!1);return e=Jh.bind(null,Ne,e.queue,!0,!1),Et().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var i=Ne,c=Et();if(Me){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),qe===null)throw Error(o(349));(Re&124)!==0||Eh(i,t,a)}c.memoizedState=a;var f={value:a,getSnapshot:t};return c.queue=f,qh(Th.bind(null,i,f,e),[e]),i.flags|=2048,ks(9,gl(),Ah.bind(null,i,f,a,t),null),a},useId:function(){var e=Et(),t=qe.identifierPrefix;if(Me){var a=Tn,i=An;a=(i&~(1<<32-Nt(i)-1)).toString(32)+a,t="«"+t+"R"+a,a=fl++,0<a&&(t+="H"+a.toString(32)),t+="»"}else a=Ab++,t="«"+t+"r"+a.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Qc,useFormState:zh,useActionState:zh,useOptimistic:function(e){var t=Et();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Jc.bind(null,Ne,!0,a),a.dispatch=t,[e,t]},useMemoCache:qc,useCacheRefresh:function(){return Et().memoizedState=Mb.bind(null,Ne)}},lm={readContext:xt,use:hl,useCallback:Kh,useContext:xt,useEffect:Gh,useImperativeHandle:Xh,useInsertionEffect:$h,useLayoutEffect:Fh,useMemo:Zh,useReducer:ml,useRef:Vh,useState:function(){return ml(On)},useDebugValue:Xc,useDeferredValue:function(e,t){var a=et();return Qh(a,ze.memoizedState,e,t)},useTransition:function(){var e=ml(On)[0],t=et().memoizedState;return[typeof e=="boolean"?e:Ir(e),t]},useSyncExternalStore:Ch,useId:tm,useHostTransitionStatus:Qc,useFormState:Ph,useActionState:Ph,useOptimistic:function(e,t){var a=et();return Oh(a,ze,e,t)},useMemoCache:qc,useCacheRefresh:nm},Db={readContext:xt,use:hl,useCallback:Kh,useContext:xt,useEffect:Gh,useImperativeHandle:Xh,useInsertionEffect:$h,useLayoutEffect:Fh,useMemo:Zh,useReducer:$c,useRef:Vh,useState:function(){return $c(On)},useDebugValue:Xc,useDeferredValue:function(e,t){var a=et();return ze===null?Kc(a,e,t):Qh(a,ze.memoizedState,e,t)},useTransition:function(){var e=$c(On)[0],t=et().memoizedState;return[typeof e=="boolean"?e:Ir(e),t]},useSyncExternalStore:Ch,useId:tm,useHostTransitionStatus:Qc,useFormState:Bh,useActionState:Bh,useOptimistic:function(e,t){var a=et();return ze!==null?Oh(a,ze,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:qc,useCacheRefresh:nm},Os=null,Lr=0;function bl(e){var t=Lr;return Lr+=1,Os===null&&(Os=[]),yh(Os,e,t)}function zr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function vl(e,t){throw t.$$typeof===w?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function om(e){var t=e._init;return t(e._payload)}function cm(e){function t(R,E){if(e){var M=R.deletions;M===null?(R.deletions=[E],R.flags|=16):M.push(E)}}function a(R,E){if(!e)return null;for(;E!==null;)t(R,E),E=E.sibling;return null}function i(R){for(var E=new Map;R!==null;)R.key!==null?E.set(R.key,R):E.set(R.index,R),R=R.sibling;return E}function c(R,E){return R=En(R,E),R.index=0,R.sibling=null,R}function f(R,E,M){return R.index=M,e?(M=R.alternate,M!==null?(M=M.index,M<E?(R.flags|=67108866,E):M):(R.flags|=67108866,E)):(R.flags|=1048576,E)}function g(R){return e&&R.alternate===null&&(R.flags|=67108866),R}function y(R,E,M,Y){return E===null||E.tag!==6?(E=bc(M,R.mode,Y),E.return=R,E):(E=c(E,M),E.return=R,E)}function N(R,E,M,Y){var de=M.type;return de===j?F(R,E,M.props.children,Y,M.key):E!==null&&(E.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===le&&om(de)===E.type)?(E=c(E,M.props),zr(E,M),E.return=R,E):(E=nl(M.type,M.key,M.props,null,R.mode,Y),zr(E,M),E.return=R,E)}function I(R,E,M,Y){return E===null||E.tag!==4||E.stateNode.containerInfo!==M.containerInfo||E.stateNode.implementation!==M.implementation?(E=vc(M,R.mode,Y),E.return=R,E):(E=c(E,M.children||[]),E.return=R,E)}function F(R,E,M,Y,de){return E===null||E.tag!==7?(E=Pa(M,R.mode,Y,de),E.return=R,E):(E=c(E,M),E.return=R,E)}function Q(R,E,M){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=bc(""+E,R.mode,M),E.return=R,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case v:return M=nl(E.type,E.key,E.props,null,R.mode,M),zr(M,E),M.return=R,M;case A:return E=vc(E,R.mode,M),E.return=R,E;case le:var Y=E._init;return E=Y(E._payload),Q(R,E,M)}if(ne(E)||q(E))return E=Pa(E,R.mode,M,null),E.return=R,E;if(typeof E.then=="function")return Q(R,bl(E),M);if(E.$$typeof===O)return Q(R,il(R,E),M);vl(R,E)}return null}function L(R,E,M,Y){var de=E!==null?E.key:null;if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return de!==null?null:y(R,E,""+M,Y);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case v:return M.key===de?N(R,E,M,Y):null;case A:return M.key===de?I(R,E,M,Y):null;case le:return de=M._init,M=de(M._payload),L(R,E,M,Y)}if(ne(M)||q(M))return de!==null?null:F(R,E,M,Y,null);if(typeof M.then=="function")return L(R,E,bl(M),Y);if(M.$$typeof===O)return L(R,E,il(R,M),Y);vl(R,M)}return null}function P(R,E,M,Y,de){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return R=R.get(M)||null,y(E,R,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return R=R.get(Y.key===null?M:Y.key)||null,N(E,R,Y,de);case A:return R=R.get(Y.key===null?M:Y.key)||null,I(E,R,Y,de);case le:var Ce=Y._init;return Y=Ce(Y._payload),P(R,E,M,Y,de)}if(ne(Y)||q(Y))return R=R.get(M)||null,F(E,R,Y,de,null);if(typeof Y.then=="function")return P(R,E,M,bl(Y),de);if(Y.$$typeof===O)return P(R,E,M,il(E,Y),de);vl(E,Y)}return null}function xe(R,E,M,Y){for(var de=null,Ce=null,he=E,ge=E=0,ut=null;he!==null&&ge<M.length;ge++){he.index>ge?(ut=he,he=null):ut=he.sibling;var ke=L(R,he,M[ge],Y);if(ke===null){he===null&&(he=ut);break}e&&he&&ke.alternate===null&&t(R,he),E=f(ke,E,ge),Ce===null?de=ke:Ce.sibling=ke,Ce=ke,he=ut}if(ge===M.length)return a(R,he),Me&&Ba(R,ge),de;if(he===null){for(;ge<M.length;ge++)he=Q(R,M[ge],Y),he!==null&&(E=f(he,E,ge),Ce===null?de=he:Ce.sibling=he,Ce=he);return Me&&Ba(R,ge),de}for(he=i(he);ge<M.length;ge++)ut=P(he,R,ge,M[ge],Y),ut!==null&&(e&&ut.alternate!==null&&he.delete(ut.key===null?ge:ut.key),E=f(ut,E,ge),Ce===null?de=ut:Ce.sibling=ut,Ce=ut);return e&&he.forEach(function(xa){return t(R,xa)}),Me&&Ba(R,ge),de}function me(R,E,M,Y){if(M==null)throw Error(o(151));for(var de=null,Ce=null,he=E,ge=E=0,ut=null,ke=M.next();he!==null&&!ke.done;ge++,ke=M.next()){he.index>ge?(ut=he,he=null):ut=he.sibling;var xa=L(R,he,ke.value,Y);if(xa===null){he===null&&(he=ut);break}e&&he&&xa.alternate===null&&t(R,he),E=f(xa,E,ge),Ce===null?de=xa:Ce.sibling=xa,Ce=xa,he=ut}if(ke.done)return a(R,he),Me&&Ba(R,ge),de;if(he===null){for(;!ke.done;ge++,ke=M.next())ke=Q(R,ke.value,Y),ke!==null&&(E=f(ke,E,ge),Ce===null?de=ke:Ce.sibling=ke,Ce=ke);return Me&&Ba(R,ge),de}for(he=i(he);!ke.done;ge++,ke=M.next())ke=P(he,R,ge,ke.value,Y),ke!==null&&(e&&ke.alternate!==null&&he.delete(ke.key===null?ge:ke.key),E=f(ke,E,ge),Ce===null?de=ke:Ce.sibling=ke,Ce=ke);return e&&he.forEach(function(Uv){return t(R,Uv)}),Me&&Ba(R,ge),de}function He(R,E,M,Y){if(typeof M=="object"&&M!==null&&M.type===j&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case v:e:{for(var de=M.key;E!==null;){if(E.key===de){if(de=M.type,de===j){if(E.tag===7){a(R,E.sibling),Y=c(E,M.props.children),Y.return=R,R=Y;break e}}else if(E.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===le&&om(de)===E.type){a(R,E.sibling),Y=c(E,M.props),zr(Y,M),Y.return=R,R=Y;break e}a(R,E);break}else t(R,E);E=E.sibling}M.type===j?(Y=Pa(M.props.children,R.mode,Y,M.key),Y.return=R,R=Y):(Y=nl(M.type,M.key,M.props,null,R.mode,Y),zr(Y,M),Y.return=R,R=Y)}return g(R);case A:e:{for(de=M.key;E!==null;){if(E.key===de)if(E.tag===4&&E.stateNode.containerInfo===M.containerInfo&&E.stateNode.implementation===M.implementation){a(R,E.sibling),Y=c(E,M.children||[]),Y.return=R,R=Y;break e}else{a(R,E);break}else t(R,E);E=E.sibling}Y=vc(M,R.mode,Y),Y.return=R,R=Y}return g(R);case le:return de=M._init,M=de(M._payload),He(R,E,M,Y)}if(ne(M))return xe(R,E,M,Y);if(q(M)){if(de=q(M),typeof de!="function")throw Error(o(150));return M=de.call(M),me(R,E,M,Y)}if(typeof M.then=="function")return He(R,E,bl(M),Y);if(M.$$typeof===O)return He(R,E,il(R,M),Y);vl(R,M)}return typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint"?(M=""+M,E!==null&&E.tag===6?(a(R,E.sibling),Y=c(E,M),Y.return=R,R=Y):(a(R,E),Y=bc(M,R.mode,Y),Y.return=R,R=Y),g(R)):a(R,E)}return function(R,E,M,Y){try{Lr=0;var de=He(R,E,M,Y);return Os=null,de}catch(he){if(he===Ar||he===ol)throw he;var Ce=It(29,he,null,R.mode);return Ce.lanes=Y,Ce.return=R,Ce}finally{}}}var Ms=cm(!0),um=cm(!1),Zt=D(null),hn=null;function na(e){var t=e.alternate;H(it,it.current&1),H(Zt,e),hn===null&&(t===null||As.current!==null||t.memoizedState!==null)&&(hn=e)}function dm(e){if(e.tag===22){if(H(it,it.current),H(Zt,e),hn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(hn=e)}}else aa()}function aa(){H(it,it.current),H(Zt,Zt.current)}function Mn(e){W(Zt),hn===e&&(hn=null),W(it)}var it=D(0);function wl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Vu(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Wc(e,t,a,i){t=e.memoizedState,a=a(i,t),a=a==null?t:b({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var eu={enqueueSetState:function(e,t,a){e=e._reactInternals;var i=zt(),c=Wn(i);c.payload=t,a!=null&&(c.callback=a),t=ea(e,c,i),t!==null&&(Pt(t,e,i),Rr(t,e,i))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var i=zt(),c=Wn(i);c.tag=1,c.payload=t,a!=null&&(c.callback=a),t=ea(e,c,i),t!==null&&(Pt(t,e,i),Rr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=zt(),i=Wn(a);i.tag=2,t!=null&&(i.callback=t),t=ea(e,i,a),t!==null&&(Pt(t,e,a),Rr(t,e,a))}};function fm(e,t,a,i,c,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,f,g):t.prototype&&t.prototype.isPureReactComponent?!vr(a,i)||!vr(c,f):!0}function hm(e,t,a,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,i),t.state!==e&&eu.enqueueReplaceState(t,t.state,null)}function Xa(e,t){var a=t;if("ref"in t){a={};for(var i in t)i!=="ref"&&(a[i]=t[i])}if(e=e.defaultProps){a===t&&(a=b({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}var Nl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function mm(e){Nl(e)}function gm(e){console.error(e)}function pm(e){Nl(e)}function Sl(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function xm(e,t,a){try{var i=e.onCaughtError;i(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function tu(e,t,a){return a=Wn(a),a.tag=3,a.payload={element:null},a.callback=function(){Sl(e,t)},a}function ym(e){return e=Wn(e),e.tag=3,e}function bm(e,t,a,i){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var f=i.value;e.payload=function(){return c(f)},e.callback=function(){xm(t,a,i)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){xm(t,a,i),typeof c!="function"&&(ca===null?ca=new Set([this]):ca.add(this));var y=i.stack;this.componentDidCatch(i.value,{componentStack:y!==null?y:""})})}function Ub(e,t,a,i,c){if(a.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=a.alternate,t!==null&&jr(t,a,c,!0),a=Zt.current,a!==null){switch(a.tag){case 13:return hn===null?ju():a.alternate===null&&Ze===0&&(Ze=3),a.flags&=-257,a.flags|=65536,a.lanes=c,i===Rc?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([i]):t.add(i),Eu(e,i,c)),!1;case 22:return a.flags|=65536,i===Rc?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([i]):a.add(i)),Eu(e,i,c)),!1}throw Error(o(435,a.tag))}return Eu(e,i,c),ju(),!1}if(Me)return t=Zt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,i!==Sc&&(e=Error(o(422),{cause:i}),_r(Ft(e,a)))):(i!==Sc&&(t=Error(o(423),{cause:i}),_r(Ft(t,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,i=Ft(i,a),c=tu(e.stateNode,i,c),Mc(e,c),Ze!==4&&(Ze=2)),!1;var f=Error(o(520),{cause:i});if(f=Ft(f,a),$r===null?$r=[f]:$r.push(f),Ze!==4&&(Ze=2),t===null)return!0;i=Ft(i,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=tu(a.stateNode,i,e),Mc(a,e),!1;case 1:if(t=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ca===null||!ca.has(f))))return a.flags|=65536,c&=-c,a.lanes|=c,c=ym(c),bm(c,e,a,i),Mc(a,c),!1}a=a.return}while(a!==null);return!1}var vm=Error(o(461)),ot=!1;function mt(e,t,a,i){t.child=e===null?um(t,null,a,i):Ms(t,e.child,a,i)}function wm(e,t,a,i,c){a=a.render;var f=t.ref;if("ref"in i){var g={};for(var y in i)y!=="ref"&&(g[y]=i[y])}else g=i;return $a(t),i=zc(e,t,a,g,f,c),y=Pc(),e!==null&&!ot?(Hc(e,t,c),In(e,t,c)):(Me&&y&&wc(t),t.flags|=1,mt(e,t,i,c),t.child)}function Nm(e,t,a,i,c){if(e===null){var f=a.type;return typeof f=="function"&&!yc(f)&&f.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=f,Sm(e,t,f,i,c)):(e=nl(a.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!cu(e,c)){var g=f.memoizedProps;if(a=a.compare,a=a!==null?a:vr,a(g,i)&&e.ref===t.ref)return In(e,t,c)}return t.flags|=1,e=En(f,i),e.ref=t.ref,e.return=t,t.child=e}function Sm(e,t,a,i,c){if(e!==null){var f=e.memoizedProps;if(vr(f,i)&&e.ref===t.ref)if(ot=!1,t.pendingProps=i=f,cu(e,c))(e.flags&131072)!==0&&(ot=!0);else return t.lanes=e.lanes,In(e,t,c)}return nu(e,t,a,i,c)}function _m(e,t,a){var i=t.pendingProps,c=i.children,f=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if((t.flags&128)!==0){if(i=f!==null?f.baseLanes|a:a,e!==null){for(c=t.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;t.childLanes=f&~i}else t.childLanes=0,t.child=null;return jm(e,t,i,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ll(t,f!==null?f.cachePool:null),f!==null?Sh(t,f):Dc(),dm(t);else return t.lanes=t.childLanes=536870912,jm(e,t,f!==null?f.baseLanes|a:a,a)}else f!==null?(ll(t,f.cachePool),Sh(t,f),aa(),t.memoizedState=null):(e!==null&&ll(t,null),Dc(),aa());return mt(e,t,c,a),t.child}function jm(e,t,a,i){var c=Tc();return c=c===null?null:{parent:rt._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&ll(t,null),Dc(),dm(t),e!==null&&jr(e,t,i,!0),null}function _l(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function nu(e,t,a,i,c){return $a(t),a=zc(e,t,a,i,void 0,c),i=Pc(),e!==null&&!ot?(Hc(e,t,c),In(e,t,c)):(Me&&i&&wc(t),t.flags|=1,mt(e,t,a,c),t.child)}function Cm(e,t,a,i,c,f){return $a(t),t.updateQueue=null,a=jh(t,i,a,c),_h(e),i=Pc(),e!==null&&!ot?(Hc(e,t,f),In(e,t,f)):(Me&&i&&wc(t),t.flags|=1,mt(e,t,a,f),t.child)}function Em(e,t,a,i,c){if($a(t),t.stateNode===null){var f=Ss,g=a.contextType;typeof g=="object"&&g!==null&&(f=xt(g)),f=new a(i,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=eu,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=i,f.state=t.memoizedState,f.refs={},kc(t),g=a.contextType,f.context=typeof g=="object"&&g!==null?xt(g):Ss,f.state=t.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(Wc(t,a,g,i),f.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(g=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),g!==f.state&&eu.enqueueReplaceState(f,f.state,null),Or(t,i,f,c),kr(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){f=t.stateNode;var y=t.memoizedProps,N=Xa(a,y);f.props=N;var I=f.context,F=a.contextType;g=Ss,typeof F=="object"&&F!==null&&(g=xt(F));var Q=a.getDerivedStateFromProps;F=typeof Q=="function"||typeof f.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,F||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y||I!==g)&&hm(t,f,i,g),Jn=!1;var L=t.memoizedState;f.state=L,Or(t,i,f,c),kr(),I=t.memoizedState,y||L!==I||Jn?(typeof Q=="function"&&(Wc(t,a,Q,i),I=t.memoizedState),(N=Jn||fm(t,a,N,i,L,I,g))?(F||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=I),f.props=i,f.state=I,f.context=g,i=N):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,Oc(e,t),g=t.memoizedProps,F=Xa(a,g),f.props=F,Q=t.pendingProps,L=f.context,I=a.contextType,N=Ss,typeof I=="object"&&I!==null&&(N=xt(I)),y=a.getDerivedStateFromProps,(I=typeof y=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(g!==Q||L!==N)&&hm(t,f,i,N),Jn=!1,L=t.memoizedState,f.state=L,Or(t,i,f,c),kr();var P=t.memoizedState;g!==Q||L!==P||Jn||e!==null&&e.dependencies!==null&&rl(e.dependencies)?(typeof y=="function"&&(Wc(t,a,y,i),P=t.memoizedState),(F=Jn||fm(t,a,F,i,L,P,N)||e!==null&&e.dependencies!==null&&rl(e.dependencies))?(I||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,P,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,P,N)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=P),f.props=i,f.state=P,f.context=N,i=F):(typeof f.componentDidUpdate!="function"||g===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),i=!1)}return f=i,_l(e,t),i=(t.flags&128)!==0,f||i?(f=t.stateNode,a=i&&typeof a.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&i?(t.child=Ms(t,e.child,null,c),t.child=Ms(t,null,a,c)):mt(e,t,a,c),t.memoizedState=f.state,e=t.child):e=In(e,t,c),e}function Am(e,t,a,i){return Sr(),t.flags|=256,mt(e,t,a,i),t.child}var au={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function su(e){return{baseLanes:e,cachePool:gh()}}function ru(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Qt),e}function Tm(e,t,a){var i=t.pendingProps,c=!1,f=(t.flags&128)!==0,g;if((g=f)||(g=e!==null&&e.memoizedState===null?!1:(it.current&2)!==0),g&&(c=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(c?na(t):aa(),Me){var y=Ke,N;if(N=y){e:{for(N=y,y=fn;N.nodeType!==8;){if(!y){y=null;break e}if(N=sn(N.nextSibling),N===null){y=null;break e}}y=N}y!==null?(t.memoizedState={dehydrated:y,treeContext:Ha!==null?{id:An,overflow:Tn}:null,retryLane:536870912,hydrationErrors:null},N=It(18,null,null,0),N.stateNode=y,N.return=t,t.child=N,_t=t,Ke=null,N=!0):N=!1}N||qa(t)}if(y=t.memoizedState,y!==null&&(y=y.dehydrated,y!==null))return Vu(y)?t.lanes=32:t.lanes=536870912,null;Mn(t)}return y=i.children,i=i.fallback,c?(aa(),c=t.mode,y=jl({mode:"hidden",children:y},c),i=Pa(i,c,a,null),y.return=t,i.return=t,y.sibling=i,t.child=y,c=t.child,c.memoizedState=su(a),c.childLanes=ru(e,g,a),t.memoizedState=au,i):(na(t),iu(t,y))}if(N=e.memoizedState,N!==null&&(y=N.dehydrated,y!==null)){if(f)t.flags&256?(na(t),t.flags&=-257,t=lu(e,t,a)):t.memoizedState!==null?(aa(),t.child=e.child,t.flags|=128,t=null):(aa(),c=i.fallback,y=t.mode,i=jl({mode:"visible",children:i.children},y),c=Pa(c,y,a,null),c.flags|=2,i.return=t,c.return=t,i.sibling=c,t.child=i,Ms(t,e.child,null,a),i=t.child,i.memoizedState=su(a),i.childLanes=ru(e,g,a),t.memoizedState=au,t=c);else if(na(t),Vu(y)){if(g=y.nextSibling&&y.nextSibling.dataset,g)var I=g.dgst;g=I,i=Error(o(419)),i.stack="",i.digest=g,_r({value:i,source:null,stack:null}),t=lu(e,t,a)}else if(ot||jr(e,t,a,!1),g=(a&e.childLanes)!==0,ot||g){if(g=qe,g!==null&&(i=a&-a,i=(i&42)!==0?1:fe(i),i=(i&(g.suspendedLanes|a))!==0?0:i,i!==0&&i!==N.retryLane))throw N.retryLane=i,Ns(e,i),Pt(g,e,i),vm;y.data==="$?"||ju(),t=lu(e,t,a)}else y.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,Ke=sn(y.nextSibling),_t=t,Me=!0,Va=null,fn=!1,e!==null&&(Xt[Kt++]=An,Xt[Kt++]=Tn,Xt[Kt++]=Ha,An=e.id,Tn=e.overflow,Ha=t),t=iu(t,i.children),t.flags|=4096);return t}return c?(aa(),c=i.fallback,y=t.mode,N=e.child,I=N.sibling,i=En(N,{mode:"hidden",children:i.children}),i.subtreeFlags=N.subtreeFlags&65011712,I!==null?c=En(I,c):(c=Pa(c,y,a,null),c.flags|=2),c.return=t,i.return=t,i.sibling=c,t.child=i,i=c,c=t.child,y=e.child.memoizedState,y===null?y=su(a):(N=y.cachePool,N!==null?(I=rt._currentValue,N=N.parent!==I?{parent:I,pool:I}:N):N=gh(),y={baseLanes:y.baseLanes|a,cachePool:N}),c.memoizedState=y,c.childLanes=ru(e,g,a),t.memoizedState=au,i):(na(t),a=e.child,e=a.sibling,a=En(a,{mode:"visible",children:i.children}),a.return=t,a.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=a,t.memoizedState=null,a)}function iu(e,t){return t=jl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function jl(e,t){return e=It(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function lu(e,t,a){return Ms(t,e.child,null,a),e=iu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rm(e,t,a){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),jc(e.return,t,a)}function ou(e,t,a,i,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:a,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=a,f.tailMode=c)}function km(e,t,a){var i=t.pendingProps,c=i.revealOrder,f=i.tail;if(mt(e,t,i.children,a),i=it.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rm(e,a,t);else if(e.tag===19)Rm(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(H(it,i),c){case"forwards":for(a=t.child,c=null;a!==null;)e=a.alternate,e!==null&&wl(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=t.child,t.child=null):(c=a.sibling,a.sibling=null),ou(t,!1,c,a,f);break;case"backwards":for(a=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&wl(e)===null){t.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}ou(t,!0,a,null,f);break;case"together":ou(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function In(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),oa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(jr(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=En(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=En(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function cu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&rl(e)))}function Lb(e,t,a){switch(t.tag){case 3:Se(t,t.stateNode.containerInfo),Qn(t,rt,e.memoizedState.cache),Sr();break;case 27:case 5:Ge(t);break;case 4:Se(t,t.stateNode.containerInfo);break;case 10:Qn(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(na(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Tm(e,t,a):(na(t),e=In(e,t,a),e!==null?e.sibling:null);na(t);break;case 19:var c=(e.flags&128)!==0;if(i=(a&t.childLanes)!==0,i||(jr(e,t,a,!1),i=(a&t.childLanes)!==0),c){if(i)return km(e,t,a);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),H(it,it.current),i)break;return null;case 22:case 23:return t.lanes=0,_m(e,t,a);case 24:Qn(t,rt,e.memoizedState.cache)}return In(e,t,a)}function Om(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)ot=!0;else{if(!cu(e,a)&&(t.flags&128)===0)return ot=!1,Lb(e,t,a);ot=(e.flags&131072)!==0}else ot=!1,Me&&(t.flags&1048576)!==0&&oh(t,sl,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,c=i._init;if(i=c(i._payload),t.type=i,typeof i=="function")yc(i)?(e=Xa(i,e),t.tag=1,t=Em(null,t,i,e,a)):(t.tag=0,t=nu(null,t,i,e,a));else{if(i!=null){if(c=i.$$typeof,c===ie){t.tag=11,t=wm(null,t,i,e,a);break e}else if(c===re){t.tag=14,t=Nm(null,t,i,e,a);break e}}throw t=te(i)||i,Error(o(306,t,""))}}return t;case 0:return nu(e,t,t.type,t.pendingProps,a);case 1:return i=t.type,c=Xa(i,t.pendingProps),Em(e,t,i,c,a);case 3:e:{if(Se(t,t.stateNode.containerInfo),e===null)throw Error(o(387));i=t.pendingProps;var f=t.memoizedState;c=f.element,Oc(e,t),Or(t,i,null,a);var g=t.memoizedState;if(i=g.cache,Qn(t,rt,i),i!==f.cache&&Cc(t,[rt],a,!0),kr(),i=g.element,f.isDehydrated)if(f={element:i,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=Am(e,t,i,a);break e}else if(i!==c){c=Ft(Error(o(424)),t),_r(c),t=Am(e,t,i,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ke=sn(e.firstChild),_t=t,Me=!0,Va=null,fn=!0,a=um(t,null,i,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Sr(),i===c){t=In(e,t,a);break e}mt(e,t,i,a)}t=t.child}return t;case 26:return _l(e,t),e===null?(a=U0(t.type,null,t.pendingProps,null))?t.memoizedState=a:Me||(a=t.type,e=t.pendingProps,i=Pl(ue.current).createElement(a),i[Le]=t,i[ht]=e,pt(i,a,e),lt(i),t.stateNode=i):t.memoizedState=U0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ge(t),e===null&&Me&&(i=t.stateNode=M0(t.type,t.pendingProps,ue.current),_t=t,fn=!0,c=Ke,fa(t.type)?(qu=c,Ke=sn(i.firstChild)):Ke=c),mt(e,t,t.pendingProps.children,a),_l(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((c=i=Ke)&&(i=dv(i,t.type,t.pendingProps,fn),i!==null?(t.stateNode=i,_t=t,Ke=sn(i.firstChild),fn=!1,c=!0):c=!1),c||qa(t)),Ge(t),c=t.type,f=t.pendingProps,g=e!==null?e.memoizedProps:null,i=f.children,Pu(c,f)?i=null:g!==null&&Pu(c,g)&&(t.flags|=32),t.memoizedState!==null&&(c=zc(e,t,Tb,null,null,a),ei._currentValue=c),_l(e,t),mt(e,t,i,a),t.child;case 6:return e===null&&Me&&((e=a=Ke)&&(a=fv(a,t.pendingProps,fn),a!==null?(t.stateNode=a,_t=t,Ke=null,e=!0):e=!1),e||qa(t)),null;case 13:return Tm(e,t,a);case 4:return Se(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Ms(t,null,i,a):mt(e,t,i,a),t.child;case 11:return wm(e,t,t.type,t.pendingProps,a);case 7:return mt(e,t,t.pendingProps,a),t.child;case 8:return mt(e,t,t.pendingProps.children,a),t.child;case 12:return mt(e,t,t.pendingProps.children,a),t.child;case 10:return i=t.pendingProps,Qn(t,t.type,i.value),mt(e,t,i.children,a),t.child;case 9:return c=t.type._context,i=t.pendingProps.children,$a(t),c=xt(c),i=i(c),t.flags|=1,mt(e,t,i,a),t.child;case 14:return Nm(e,t,t.type,t.pendingProps,a);case 15:return Sm(e,t,t.type,t.pendingProps,a);case 19:return km(e,t,a);case 31:return i=t.pendingProps,a=t.mode,i={mode:i.mode,children:i.children},e===null?(a=jl(i,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=En(e.child,i),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return _m(e,t,a);case 24:return $a(t),i=xt(rt),e===null?(c=Tc(),c===null&&(c=qe,f=Ec(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=a),c=f),t.memoizedState={parent:i,cache:c},kc(t),Qn(t,rt,c)):((e.lanes&a)!==0&&(Oc(e,t),Or(t,null,null,a),kr()),c=e.memoizedState,f=t.memoizedState,c.parent!==i?(c={parent:i,cache:i},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Qn(t,rt,i)):(i=f.cache,Qn(t,rt,i),i!==c.cache&&Cc(t,[rt],a,!0))),mt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Dn(e){e.flags|=4}function Mm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!B0(t)){if(t=Zt.current,t!==null&&((Re&4194048)===Re?hn!==null:(Re&62914560)!==Re&&(Re&536870912)===0||t!==hn))throw Tr=Rc,ph;e.flags|=8192}}function Cl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ur():536870912,e.lanes|=t,Ls|=t)}function Pr(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,i=0;if(t)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,i|=c.subtreeFlags&65011712,i|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=a,t}function zb(e,t,a){var i=t.pendingProps;switch(Nc(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return Ye(t),null;case 3:return a=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),kn(rt),ft(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Nr(t)?Dn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,dh())),Ye(t),null;case 26:return a=t.memoizedState,e===null?(Dn(t),a!==null?(Ye(t),Mm(t,a)):(Ye(t),t.flags&=-16777217)):a?a!==e.memoizedState?(Dn(t),Ye(t),Mm(t,a)):(Ye(t),t.flags&=-16777217):(e.memoizedProps!==i&&Dn(t),Ye(t),t.flags&=-16777217),null;case 27:en(t),a=ue.current;var c=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Dn(t);else{if(!i){if(t.stateNode===null)throw Error(o(166));return Ye(t),null}e=J.current,Nr(t)?ch(t):(e=M0(c,i,a),t.stateNode=e,Dn(t))}return Ye(t),null;case 5:if(en(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Dn(t);else{if(!i){if(t.stateNode===null)throw Error(o(166));return Ye(t),null}if(e=J.current,Nr(t))ch(t);else{switch(c=Pl(ue.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?c.createElement("select",{is:i.is}):c.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?c.createElement(a,{is:i.is}):c.createElement(a)}}e[Le]=t,e[ht]=i;e:for(c=t.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}t.stateNode=e;e:switch(pt(e,a,i),a){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Dn(t)}}return Ye(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Dn(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(o(166));if(e=ue.current,Nr(t)){if(e=t.stateNode,a=t.memoizedProps,i=null,c=_t,c!==null)switch(c.tag){case 27:case 5:i=c.memoizedProps}e[Le]=t,e=!!(e.nodeValue===a||i!==null&&i.suppressHydrationWarning===!0||C0(e.nodeValue,a)),e||qa(t)}else e=Pl(e).createTextNode(i),e[Le]=t,t.stateNode=e}return Ye(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Nr(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[Le]=t}else Sr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),c=!1}else c=dh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Mn(t),t):(Mn(t),null)}if(Mn(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=i!==null,e=e!==null&&e.memoizedState!==null,a){i=t.child,c=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(c=i.alternate.memoizedState.cachePool.pool);var f=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),f!==c&&(i.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Cl(t,t.updateQueue),Ye(t),null;case 4:return ft(),e===null&&Iu(t.stateNode.containerInfo),Ye(t),null;case 10:return kn(t.type),Ye(t),null;case 19:if(W(it),c=t.memoizedState,c===null)return Ye(t),null;if(i=(t.flags&128)!==0,f=c.rendering,f===null)if(i)Pr(c,!1);else{if(Ze!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=wl(e),f!==null){for(t.flags|=128,Pr(c,!1),e=f.updateQueue,t.updateQueue=e,Cl(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)lh(a,e),a=a.sibling;return H(it,it.current&1|2),t.child}e=e.sibling}c.tail!==null&&Ot()>Tl&&(t.flags|=128,i=!0,Pr(c,!1),t.lanes=4194304)}else{if(!i)if(e=wl(f),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Cl(t,e),Pr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Me)return Ye(t),null}else 2*Ot()-c.renderingStartTime>Tl&&a!==536870912&&(t.flags|=128,i=!0,Pr(c,!1),t.lanes=4194304);c.isBackwards?(f.sibling=t.child,t.child=f):(e=c.last,e!==null?e.sibling=f:t.child=f,c.last=f)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Ot(),t.sibling=null,e=it.current,H(it,i?e&1|2:e&1),t):(Ye(t),null);case 22:case 23:return Mn(t),Uc(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(a&536870912)!==0&&(t.flags&128)===0&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),a=t.updateQueue,a!==null&&Cl(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==a&&(t.flags|=2048),e!==null&&W(Fa),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),kn(rt),Ye(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Pb(e,t){switch(Nc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return kn(rt),ft(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return en(t),null;case 13:if(Mn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Sr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return W(it),null;case 4:return ft(),null;case 10:return kn(t.type),null;case 22:case 23:return Mn(t),Uc(),e!==null&&W(Fa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return kn(rt),null;case 25:return null;default:return null}}function Im(e,t){switch(Nc(t),t.tag){case 3:kn(rt),ft();break;case 26:case 27:case 5:en(t);break;case 4:ft();break;case 13:Mn(t);break;case 19:W(it);break;case 10:kn(t.type);break;case 22:case 23:Mn(t),Uc(),e!==null&&W(Fa);break;case 24:kn(rt)}}function Hr(e,t){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var c=i.next;a=c;do{if((a.tag&e)===e){i=void 0;var f=a.create,g=a.inst;i=f(),g.destroy=i}a=a.next}while(a!==c)}}catch(y){Be(t,t.return,y)}}function sa(e,t,a){try{var i=t.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var f=c.next;i=f;do{if((i.tag&e)===e){var g=i.inst,y=g.destroy;if(y!==void 0){g.destroy=void 0,c=t;var N=a,I=y;try{I()}catch(F){Be(c,N,F)}}}i=i.next}while(i!==f)}}catch(F){Be(t,t.return,F)}}function Dm(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Nh(t,a)}catch(i){Be(e,e.return,i)}}}function Um(e,t,a){a.props=Xa(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(i){Be(e,t,i)}}function Br(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof a=="function"?e.refCleanup=a(i):a.current=i}}catch(c){Be(e,t,c)}}function mn(e,t){var a=e.ref,i=e.refCleanup;if(a!==null)if(typeof i=="function")try{i()}catch(c){Be(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Be(e,t,c)}else a.current=null}function Lm(e){var t=e.type,a=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&i.focus();break e;case"img":a.src?i.src=a.src:a.srcSet&&(i.srcset=a.srcSet)}}catch(c){Be(e,e.return,c)}}function uu(e,t,a){try{var i=e.stateNode;iv(i,e.type,a,t),i[ht]=t}catch(c){Be(e,e.return,c)}}function zm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fa(e.type)||e.tag===4}function du(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fu(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=zl));else if(i!==4&&(i===27&&fa(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(fu(e,t,a),e=e.sibling;e!==null;)fu(e,t,a),e=e.sibling}function El(e,t,a){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(i!==4&&(i===27&&fa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(El(e,t,a),e=e.sibling;e!==null;)El(e,t,a),e=e.sibling}function Pm(e){var t=e.stateNode,a=e.memoizedProps;try{for(var i=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);pt(t,i,a),t[Le]=e,t[ht]=a}catch(f){Be(e,e.return,f)}}var Un=!1,Je=!1,hu=!1,Hm=typeof WeakSet=="function"?WeakSet:Set,ct=null;function Hb(e,t){if(e=e.containerInfo,Lu=$l,e=Qf(e),dc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var i=a.getSelection&&a.getSelection();if(i&&i.rangeCount!==0){a=i.anchorNode;var c=i.anchorOffset,f=i.focusNode;i=i.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var g=0,y=-1,N=-1,I=0,F=0,Q=e,L=null;t:for(;;){for(var P;Q!==a||c!==0&&Q.nodeType!==3||(y=g+c),Q!==f||i!==0&&Q.nodeType!==3||(N=g+i),Q.nodeType===3&&(g+=Q.nodeValue.length),(P=Q.firstChild)!==null;)L=Q,Q=P;for(;;){if(Q===e)break t;if(L===a&&++I===c&&(y=g),L===f&&++F===i&&(N=g),(P=Q.nextSibling)!==null)break;Q=L,L=Q.parentNode}Q=P}a=y===-1||N===-1?null:{start:y,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(zu={focusedElem:e,selectionRange:a},$l=!1,ct=t;ct!==null;)if(t=ct,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ct=e;else for(;ct!==null;){switch(t=ct,f=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=t,c=f.memoizedProps,f=f.memoizedState,i=a.stateNode;try{var xe=Xa(a.type,c,a.elementType===a.type);e=i.getSnapshotBeforeUpdate(xe,f),i.__reactInternalSnapshotBeforeUpdate=e}catch(me){Be(a,a.return,me)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Bu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Bu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,ct=e;break}ct=t.return}}function Bm(e,t,a){var i=a.flags;switch(a.tag){case 0:case 11:case 15:ra(e,a),i&4&&Hr(5,a);break;case 1:if(ra(e,a),i&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(g){Be(a,a.return,g)}else{var c=Xa(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Be(a,a.return,g)}}i&64&&Dm(a),i&512&&Br(a,a.return);break;case 3:if(ra(e,a),i&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Nh(e,t)}catch(g){Be(a,a.return,g)}}break;case 27:t===null&&i&4&&Pm(a);case 26:case 5:ra(e,a),t===null&&i&4&&Lm(a),i&512&&Br(a,a.return);break;case 12:ra(e,a);break;case 13:ra(e,a),i&4&&Gm(e,a),i&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Kb.bind(null,a),hv(e,a))));break;case 22:if(i=a.memoizedState!==null||Un,!i){t=t!==null&&t.memoizedState!==null||Je,c=Un;var f=Je;Un=i,(Je=t)&&!f?ia(e,a,(a.subtreeFlags&8772)!==0):ra(e,a),Un=c,Je=f}break;case 30:break;default:ra(e,a)}}function Vm(e){var t=e.alternate;t!==null&&(e.alternate=null,Vm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&qt(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fe=null,At=!1;function Ln(e,t,a){for(a=a.child;a!==null;)qm(e,t,a),a=a.sibling}function qm(e,t,a){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Ma,a)}catch{}switch(a.tag){case 26:Je||mn(a,t),Ln(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Je||mn(a,t);var i=Fe,c=At;fa(a.type)&&(Fe=a.stateNode,At=!1),Ln(e,t,a),Zr(a.stateNode),Fe=i,At=c;break;case 5:Je||mn(a,t);case 6:if(i=Fe,c=At,Fe=null,Ln(e,t,a),Fe=i,At=c,Fe!==null)if(At)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(a.stateNode)}catch(f){Be(a,t,f)}else try{Fe.removeChild(a.stateNode)}catch(f){Be(a,t,f)}break;case 18:Fe!==null&&(At?(e=Fe,k0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),si(e)):k0(Fe,a.stateNode));break;case 4:i=Fe,c=At,Fe=a.stateNode.containerInfo,At=!0,Ln(e,t,a),Fe=i,At=c;break;case 0:case 11:case 14:case 15:Je||sa(2,a,t),Je||sa(4,a,t),Ln(e,t,a);break;case 1:Je||(mn(a,t),i=a.stateNode,typeof i.componentWillUnmount=="function"&&Um(a,t,i)),Ln(e,t,a);break;case 21:Ln(e,t,a);break;case 22:Je=(i=Je)||a.memoizedState!==null,Ln(e,t,a),Je=i;break;default:Ln(e,t,a)}}function Gm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{si(e)}catch(a){Be(t,t.return,a)}}function Bb(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Hm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Hm),t;default:throw Error(o(435,e.tag))}}function mu(e,t){var a=Bb(e);t.forEach(function(i){var c=Zb.bind(null,e,i);a.has(i)||(a.add(i),i.then(c,c))})}function Dt(e,t){var a=t.deletions;if(a!==null)for(var i=0;i<a.length;i++){var c=a[i],f=e,g=t,y=g;e:for(;y!==null;){switch(y.tag){case 27:if(fa(y.type)){Fe=y.stateNode,At=!1;break e}break;case 5:Fe=y.stateNode,At=!1;break e;case 3:case 4:Fe=y.stateNode.containerInfo,At=!0;break e}y=y.return}if(Fe===null)throw Error(o(160));qm(f,g,c),Fe=null,At=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)$m(t,e),t=t.sibling}var an=null;function $m(e,t){var a=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dt(t,e),Ut(e),i&4&&(sa(3,e,e.return),Hr(3,e),sa(5,e,e.return));break;case 1:Dt(t,e),Ut(e),i&512&&(Je||a===null||mn(a,a.return)),i&64&&Un&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?i:a.concat(i))));break;case 26:var c=an;if(Dt(t,e),Ut(e),i&512&&(Je||a===null||mn(a,a.return)),i&4){var f=a!==null?a.memoizedState:null;if(i=e.memoizedState,a===null)if(i===null)if(e.stateNode===null){e:{i=e.type,a=e.memoizedProps,c=c.ownerDocument||c;t:switch(i){case"title":f=c.getElementsByTagName("title")[0],(!f||f[St]||f[Le]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(i),c.head.insertBefore(f,c.querySelector("head > title"))),pt(f,i,a),f[Le]=e,lt(f),i=f;break e;case"link":var g=P0("link","href",c).get(i+(a.href||""));if(g){for(var y=0;y<g.length;y++)if(f=g[y],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(y,1);break t}}f=c.createElement(i),pt(f,i,a),c.head.appendChild(f);break;case"meta":if(g=P0("meta","content",c).get(i+(a.content||""))){for(y=0;y<g.length;y++)if(f=g[y],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(y,1);break t}}f=c.createElement(i),pt(f,i,a),c.head.appendChild(f);break;default:throw Error(o(468,i))}f[Le]=e,lt(f),i=f}e.stateNode=i}else H0(c,e.type,e.stateNode);else e.stateNode=z0(c,i,e.memoizedProps);else f!==i?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,i===null?H0(c,e.type,e.stateNode):z0(c,i,e.memoizedProps)):i===null&&e.stateNode!==null&&uu(e,e.memoizedProps,a.memoizedProps)}break;case 27:Dt(t,e),Ut(e),i&512&&(Je||a===null||mn(a,a.return)),a!==null&&i&4&&uu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Dt(t,e),Ut(e),i&512&&(Je||a===null||mn(a,a.return)),e.flags&32){c=e.stateNode;try{gs(c,"")}catch(P){Be(e,e.return,P)}}i&4&&e.stateNode!=null&&(c=e.memoizedProps,uu(e,c,a!==null?a.memoizedProps:c)),i&1024&&(hu=!0);break;case 6:if(Dt(t,e),Ut(e),i&4){if(e.stateNode===null)throw Error(o(162));i=e.memoizedProps,a=e.stateNode;try{a.nodeValue=i}catch(P){Be(e,e.return,P)}}break;case 3:if(Vl=null,c=an,an=Hl(t.containerInfo),Dt(t,e),an=c,Ut(e),i&4&&a!==null&&a.memoizedState.isDehydrated)try{si(t.containerInfo)}catch(P){Be(e,e.return,P)}hu&&(hu=!1,Fm(e));break;case 4:i=an,an=Hl(e.stateNode.containerInfo),Dt(t,e),Ut(e),an=i;break;case 12:Dt(t,e),Ut(e);break;case 13:Dt(t,e),Ut(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(vu=Ot()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,mu(e,i)));break;case 22:c=e.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,I=Un,F=Je;if(Un=I||c,Je=F||N,Dt(t,e),Je=F,Un=I,Ut(e),i&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(a===null||N||Un||Je||Ka(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){N=a=t;try{if(f=N.stateNode,c)g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{y=N.stateNode;var Q=N.memoizedProps.style,L=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;y.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(P){Be(N,N.return,P)}}}else if(t.tag===6){if(a===null){N=t;try{N.stateNode.nodeValue=c?"":N.memoizedProps}catch(P){Be(N,N.return,P)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(a=i.retryQueue,a!==null&&(i.retryQueue=null,mu(e,a))));break;case 19:Dt(t,e),Ut(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,mu(e,i)));break;case 30:break;case 21:break;default:Dt(t,e),Ut(e)}}function Ut(e){var t=e.flags;if(t&2){try{for(var a,i=e.return;i!==null;){if(zm(i)){a=i;break}i=i.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var c=a.stateNode,f=du(e);El(e,f,c);break;case 5:var g=a.stateNode;a.flags&32&&(gs(g,""),a.flags&=-33);var y=du(e);El(e,y,g);break;case 3:case 4:var N=a.stateNode.containerInfo,I=du(e);fu(e,I,N);break;default:throw Error(o(161))}}catch(F){Be(e,e.return,F)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Fm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ra(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Bm(e,t.alternate,t),t=t.sibling}function Ka(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sa(4,t,t.return),Ka(t);break;case 1:mn(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Um(t,t.return,a),Ka(t);break;case 27:Zr(t.stateNode);case 26:case 5:mn(t,t.return),Ka(t);break;case 22:t.memoizedState===null&&Ka(t);break;case 30:Ka(t);break;default:Ka(t)}e=e.sibling}}function ia(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,c=e,f=t,g=f.flags;switch(f.tag){case 0:case 11:case 15:ia(c,f,a),Hr(4,f);break;case 1:if(ia(c,f,a),i=f,c=i.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(I){Be(i,i.return,I)}if(i=f,c=i.updateQueue,c!==null){var y=i.stateNode;try{var N=c.shared.hiddenCallbacks;if(N!==null)for(c.shared.hiddenCallbacks=null,c=0;c<N.length;c++)wh(N[c],y)}catch(I){Be(i,i.return,I)}}a&&g&64&&Dm(f),Br(f,f.return);break;case 27:Pm(f);case 26:case 5:ia(c,f,a),a&&i===null&&g&4&&Lm(f),Br(f,f.return);break;case 12:ia(c,f,a);break;case 13:ia(c,f,a),a&&g&4&&Gm(c,f);break;case 22:f.memoizedState===null&&ia(c,f,a),Br(f,f.return);break;case 30:break;default:ia(c,f,a)}t=t.sibling}}function gu(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Cr(a))}function pu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Cr(e))}function gn(e,t,a,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ym(e,t,a,i),t=t.sibling}function Ym(e,t,a,i){var c=t.flags;switch(t.tag){case 0:case 11:case 15:gn(e,t,a,i),c&2048&&Hr(9,t);break;case 1:gn(e,t,a,i);break;case 3:gn(e,t,a,i),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Cr(e)));break;case 12:if(c&2048){gn(e,t,a,i),e=t.stateNode;try{var f=t.memoizedProps,g=f.id,y=f.onPostCommit;typeof y=="function"&&y(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){Be(t,t.return,N)}}else gn(e,t,a,i);break;case 13:gn(e,t,a,i);break;case 23:break;case 22:f=t.stateNode,g=t.alternate,t.memoizedState!==null?f._visibility&2?gn(e,t,a,i):Vr(e,t):f._visibility&2?gn(e,t,a,i):(f._visibility|=2,Is(e,t,a,i,(t.subtreeFlags&10256)!==0)),c&2048&&gu(g,t);break;case 24:gn(e,t,a,i),c&2048&&pu(t.alternate,t);break;default:gn(e,t,a,i)}}function Is(e,t,a,i,c){for(c=c&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var f=e,g=t,y=a,N=i,I=g.flags;switch(g.tag){case 0:case 11:case 15:Is(f,g,y,N,c),Hr(8,g);break;case 23:break;case 22:var F=g.stateNode;g.memoizedState!==null?F._visibility&2?Is(f,g,y,N,c):Vr(f,g):(F._visibility|=2,Is(f,g,y,N,c)),c&&I&2048&&gu(g.alternate,g);break;case 24:Is(f,g,y,N,c),c&&I&2048&&pu(g.alternate,g);break;default:Is(f,g,y,N,c)}t=t.sibling}}function Vr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,i=t,c=i.flags;switch(i.tag){case 22:Vr(a,i),c&2048&&gu(i.alternate,i);break;case 24:Vr(a,i),c&2048&&pu(i.alternate,i);break;default:Vr(a,i)}t=t.sibling}}var qr=8192;function Ds(e){if(e.subtreeFlags&qr)for(e=e.child;e!==null;)Xm(e),e=e.sibling}function Xm(e){switch(e.tag){case 26:Ds(e),e.flags&qr&&e.memoizedState!==null&&Cv(an,e.memoizedState,e.memoizedProps);break;case 5:Ds(e);break;case 3:case 4:var t=an;an=Hl(e.stateNode.containerInfo),Ds(e),an=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=qr,qr=16777216,Ds(e),qr=t):Ds(e));break;default:Ds(e)}}function Km(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Gr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];ct=i,Qm(i,e)}Km(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Zm(e),e=e.sibling}function Zm(e){switch(e.tag){case 0:case 11:case 15:Gr(e),e.flags&2048&&sa(9,e,e.return);break;case 3:Gr(e);break;case 12:Gr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Al(e)):Gr(e);break;default:Gr(e)}}function Al(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var i=t[a];ct=i,Qm(i,e)}Km(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:sa(8,t,t.return),Al(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Al(t));break;default:Al(t)}e=e.sibling}}function Qm(e,t){for(;ct!==null;){var a=ct;switch(a.tag){case 0:case 11:case 15:sa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var i=a.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Cr(a.memoizedState.cache)}if(i=a.child,i!==null)i.return=a,ct=i;else e:for(a=e;ct!==null;){i=ct;var c=i.sibling,f=i.return;if(Vm(i),i===a){ct=null;break e}if(c!==null){c.return=f,ct=c;break e}ct=f}}}var Vb={getCacheForType:function(e){var t=xt(rt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},qb=typeof WeakMap=="function"?WeakMap:Map,Ie=0,qe=null,Ee=null,Re=0,De=0,Lt=null,la=!1,Us=!1,xu=!1,zn=0,Ze=0,oa=0,Za=0,yu=0,Qt=0,Ls=0,$r=null,Tt=null,bu=!1,vu=0,Tl=1/0,Rl=null,ca=null,gt=0,ua=null,zs=null,Ps=0,wu=0,Nu=null,Jm=null,Fr=0,Su=null;function zt(){if((Ie&2)!==0&&Re!==0)return Re&-Re;if(k.T!==null){var e=Cs;return e!==0?e:Ru()}return we()}function Wm(){Qt===0&&(Qt=(Re&536870912)===0||Me?Pi():536870912);var e=Zt.current;return e!==null&&(e.flags|=32),Qt}function Pt(e,t,a){(e===qe&&(De===2||De===9)||e.cancelPendingCommit!==null)&&(Hs(e,0),da(e,Re,Qt,!1)),Ia(e,a),((Ie&2)===0||e!==qe)&&(e===qe&&((Ie&2)===0&&(Za|=a),Ze===4&&da(e,Re,Qt,!1)),pn(e))}function e0(e,t,a){if((Ie&6)!==0)throw Error(o(327));var i=!a&&(t&124)===0&&(t&e.expiredLanes)===0||Kn(e,t),c=i?Fb(e,t):Cu(e,t,!0),f=i;do{if(c===0){Us&&!i&&da(e,t,0,!1);break}else{if(a=e.current.alternate,f&&!Gb(a)){c=Cu(e,t,!1),f=!1;continue}if(c===2){if(f=t,e.errorRecoveryDisabledLanes&f)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var y=e;c=$r;var N=y.current.memoizedState.isDehydrated;if(N&&(Hs(y,g).flags|=256),g=Cu(y,g,!1),g!==2){if(xu&&!N){y.errorRecoveryDisabledLanes|=f,Za|=f,c=4;break e}f=Tt,Tt=c,f!==null&&(Tt===null?Tt=f:Tt.push.apply(Tt,f))}c=g}if(f=!1,c!==2)continue}}if(c===1){Hs(e,0),da(e,t,0,!0);break}e:{switch(i=e,f=c,f){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:da(i,t,Qt,!la);break e;case 2:Tt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=vu+300-Ot(),10<c)){if(da(i,t,Qt,!la),ls(i,0,!0)!==0)break e;i.timeoutHandle=T0(t0.bind(null,i,a,Tt,Rl,bu,t,Qt,Za,Ls,la,f,2,-0,0),c);break e}t0(i,a,Tt,Rl,bu,t,Qt,Za,Ls,la,f,0,-0,0)}}break}while(!0);pn(e)}function t0(e,t,a,i,c,f,g,y,N,I,F,Q,L,P){if(e.timeoutHandle=-1,Q=t.subtreeFlags,(Q&8192||(Q&16785408)===16785408)&&(Wr={stylesheets:null,count:0,unsuspend:jv},Xm(t),Q=Ev(),Q!==null)){e.cancelPendingCommit=Q(o0.bind(null,e,t,f,a,i,c,g,y,N,F,1,L,P)),da(e,f,g,!I);return}o0(e,t,f,a,i,c,g,y,N)}function Gb(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var i=0;i<a.length;i++){var c=a[i],f=c.getSnapshot;c=c.value;try{if(!Mt(f(),c))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function da(e,t,a,i){t&=~yu,t&=~Za,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var c=t;0<c;){var f=31-Nt(c),g=1<<f;i[f]=-1,c&=~g}a!==0&&Hi(e,a,t)}function kl(){return(Ie&6)===0?(Yr(0),!1):!0}function _u(){if(Ee!==null){if(De===0)var e=Ee.return;else e=Ee,Rn=Ga=null,Bc(e),Os=null,Lr=0,e=Ee;for(;e!==null;)Im(e.alternate,e),e=e.return;Ee=null}}function Hs(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,ov(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),_u(),qe=e,Ee=a=En(e.current,null),Re=t,De=0,Lt=null,la=!1,Us=Kn(e,t),xu=!1,Ls=Qt=yu=Za=oa=Ze=0,Tt=$r=null,bu=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var c=31-Nt(i),f=1<<c;t|=e[c],i&=~f}return zn=t,Wi(),a}function n0(e,t){Ne=null,k.H=yl,t===Ar||t===ol?(t=bh(),De=3):t===ph?(t=bh(),De=4):De=t===vm?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Lt=t,Ee===null&&(Ze=1,Sl(e,Ft(t,e.current)))}function a0(){var e=k.H;return k.H=yl,e===null?yl:e}function s0(){var e=k.A;return k.A=Vb,e}function ju(){Ze=4,la||(Re&4194048)!==Re&&Zt.current!==null||(Us=!0),(oa&134217727)===0&&(Za&134217727)===0||qe===null||da(qe,Re,Qt,!1)}function Cu(e,t,a){var i=Ie;Ie|=2;var c=a0(),f=s0();(qe!==e||Re!==t)&&(Rl=null,Hs(e,t)),t=!1;var g=Ze;e:do try{if(De!==0&&Ee!==null){var y=Ee,N=Lt;switch(De){case 8:_u(),g=6;break e;case 3:case 2:case 9:case 6:Zt.current===null&&(t=!0);var I=De;if(De=0,Lt=null,Bs(e,y,N,I),a&&Us){g=0;break e}break;default:I=De,De=0,Lt=null,Bs(e,y,N,I)}}$b(),g=Ze;break}catch(F){n0(e,F)}while(!0);return t&&e.shellSuspendCounter++,Rn=Ga=null,Ie=i,k.H=c,k.A=f,Ee===null&&(qe=null,Re=0,Wi()),g}function $b(){for(;Ee!==null;)r0(Ee)}function Fb(e,t){var a=Ie;Ie|=2;var i=a0(),c=s0();qe!==e||Re!==t?(Rl=null,Tl=Ot()+500,Hs(e,t)):Us=Kn(e,t);e:do try{if(De!==0&&Ee!==null){t=Ee;var f=Lt;t:switch(De){case 1:De=0,Lt=null,Bs(e,t,f,1);break;case 2:case 9:if(xh(f)){De=0,Lt=null,i0(t);break}t=function(){De!==2&&De!==9||qe!==e||(De=7),pn(e)},f.then(t,t);break e;case 3:De=7;break e;case 4:De=5;break e;case 7:xh(f)?(De=0,Lt=null,i0(t)):(De=0,Lt=null,Bs(e,t,f,7));break;case 5:var g=null;switch(Ee.tag){case 26:g=Ee.memoizedState;case 5:case 27:var y=Ee;if(!g||B0(g)){De=0,Lt=null;var N=y.sibling;if(N!==null)Ee=N;else{var I=y.return;I!==null?(Ee=I,Ol(I)):Ee=null}break t}}De=0,Lt=null,Bs(e,t,f,5);break;case 6:De=0,Lt=null,Bs(e,t,f,6);break;case 8:_u(),Ze=6;break e;default:throw Error(o(462))}}Yb();break}catch(F){n0(e,F)}while(!0);return Rn=Ga=null,k.H=i,k.A=c,Ie=a,Ee!==null?0:(qe=null,Re=0,Wi(),Ze)}function Yb(){for(;Ee!==null&&!Di();)r0(Ee)}function r0(e){var t=Om(e.alternate,e,zn);e.memoizedProps=e.pendingProps,t===null?Ol(e):Ee=t}function i0(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Cm(a,t,t.pendingProps,t.type,void 0,Re);break;case 11:t=Cm(a,t,t.pendingProps,t.type.render,t.ref,Re);break;case 5:Bc(t);default:Im(a,t),t=Ee=lh(t,zn),t=Om(a,t,zn)}e.memoizedProps=e.pendingProps,t===null?Ol(e):Ee=t}function Bs(e,t,a,i){Rn=Ga=null,Bc(t),Os=null,Lr=0;var c=t.return;try{if(Ub(e,c,t,a,Re)){Ze=1,Sl(e,Ft(a,e.current)),Ee=null;return}}catch(f){if(c!==null)throw Ee=c,f;Ze=1,Sl(e,Ft(a,e.current)),Ee=null;return}t.flags&32768?(Me||i===1?e=!0:Us||(Re&536870912)!==0?e=!1:(la=e=!0,(i===2||i===9||i===3||i===6)&&(i=Zt.current,i!==null&&i.tag===13&&(i.flags|=16384))),l0(t,e)):Ol(t)}function Ol(e){var t=e;do{if((t.flags&32768)!==0){l0(t,la);return}e=t.return;var a=zb(t.alternate,t,zn);if(a!==null){Ee=a;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);Ze===0&&(Ze=5)}function l0(e,t){do{var a=Pb(e.alternate,e);if(a!==null){a.flags&=32767,Ee=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ee=e;return}Ee=e=a}while(e!==null);Ze=6,Ee=null}function o0(e,t,a,i,c,f,g,y,N){e.cancelPendingCommit=null;do Ml();while(gt!==0);if((Ie&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(f=t.lanes|t.childLanes,f|=pc,Fo(e,a,f,g,y,N),e===qe&&(Ee=qe=null,Re=0),zs=t,ua=e,Ps=a,wu=f,Nu=c,Jm=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Qb(rs,function(){return h0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=k.T,k.T=null,c=$.p,$.p=2,g=Ie,Ie|=4;try{Hb(e,t,a)}finally{Ie=g,$.p=c,k.T=i}}gt=1,c0(),u0(),d0()}}function c0(){if(gt===1){gt=0;var e=ua,t=zs,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var i=$.p;$.p=2;var c=Ie;Ie|=4;try{$m(t,e);var f=zu,g=Qf(e.containerInfo),y=f.focusedElem,N=f.selectionRange;if(g!==y&&y&&y.ownerDocument&&Zf(y.ownerDocument.documentElement,y)){if(N!==null&&dc(y)){var I=N.start,F=N.end;if(F===void 0&&(F=I),"selectionStart"in y)y.selectionStart=I,y.selectionEnd=Math.min(F,y.value.length);else{var Q=y.ownerDocument||document,L=Q&&Q.defaultView||window;if(L.getSelection){var P=L.getSelection(),xe=y.textContent.length,me=Math.min(N.start,xe),He=N.end===void 0?me:Math.min(N.end,xe);!P.extend&&me>He&&(g=He,He=me,me=g);var R=Kf(y,me),E=Kf(y,He);if(R&&E&&(P.rangeCount!==1||P.anchorNode!==R.node||P.anchorOffset!==R.offset||P.focusNode!==E.node||P.focusOffset!==E.offset)){var M=Q.createRange();M.setStart(R.node,R.offset),P.removeAllRanges(),me>He?(P.addRange(M),P.extend(E.node,E.offset)):(M.setEnd(E.node,E.offset),P.addRange(M))}}}}for(Q=[],P=y;P=P.parentNode;)P.nodeType===1&&Q.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<Q.length;y++){var Y=Q[y];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}$l=!!Lu,zu=Lu=null}finally{Ie=c,$.p=i,k.T=a}}e.current=t,gt=2}}function u0(){if(gt===2){gt=0;var e=ua,t=zs,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var i=$.p;$.p=2;var c=Ie;Ie|=4;try{Bm(e,t.alternate,t)}finally{Ie=c,$.p=i,k.T=a}}gt=3}}function d0(){if(gt===4||gt===3){gt=0,Ui();var e=ua,t=zs,a=Ps,i=Jm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?gt=5:(gt=0,zs=ua=null,f0(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(ca=null),_e(a),t=t.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Ma,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=k.T,c=$.p,$.p=2,k.T=null;try{for(var f=e.onRecoverableError,g=0;g<i.length;g++){var y=i[g];f(y.value,{componentStack:y.stack})}}finally{k.T=t,$.p=c}}(Ps&3)!==0&&Ml(),pn(e),c=e.pendingLanes,(a&4194090)!==0&&(c&42)!==0?e===Su?Fr++:(Fr=0,Su=e):Fr=0,Yr(0)}}function f0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Cr(t)))}function Ml(e){return c0(),u0(),d0(),h0()}function h0(){if(gt!==5)return!1;var e=ua,t=wu;wu=0;var a=_e(Ps),i=k.T,c=$.p;try{$.p=32>a?32:a,k.T=null,a=Nu,Nu=null;var f=ua,g=Ps;if(gt=0,zs=ua=null,Ps=0,(Ie&6)!==0)throw Error(o(331));var y=Ie;if(Ie|=4,Zm(f.current),Ym(f,f.current,g,a),Ie=y,Yr(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Ma,f)}catch{}return!0}finally{$.p=c,k.T=i,f0(e,t)}}function m0(e,t,a){t=Ft(a,t),t=tu(e.stateNode,t,2),e=ea(e,t,2),e!==null&&(Ia(e,2),pn(e))}function Be(e,t,a){if(e.tag===3)m0(e,e,a);else for(;t!==null;){if(t.tag===3){m0(t,e,a);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ca===null||!ca.has(i))){e=Ft(a,e),a=ym(2),i=ea(t,a,2),i!==null&&(bm(a,i,t,e),Ia(i,2),pn(i));break}}t=t.return}}function Eu(e,t,a){var i=e.pingCache;if(i===null){i=e.pingCache=new qb;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(a)||(xu=!0,c.add(a),e=Xb.bind(null,e,t,a),t.then(e,e))}function Xb(e,t,a){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,qe===e&&(Re&a)===a&&(Ze===4||Ze===3&&(Re&62914560)===Re&&300>Ot()-vu?(Ie&2)===0&&Hs(e,0):yu|=a,Ls===Re&&(Ls=0)),pn(e)}function g0(e,t){t===0&&(t=ur()),e=Ns(e,t),e!==null&&(Ia(e,t),pn(e))}function Kb(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),g0(e,a)}function Zb(e,t){var a=0;switch(e.tag){case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(o(314))}i!==null&&i.delete(t),g0(e,a)}function Qb(e,t){return Vt(e,t)}var Il=null,Vs=null,Au=!1,Dl=!1,Tu=!1,Qa=0;function pn(e){e!==Vs&&e.next===null&&(Vs===null?Il=Vs=e:Vs=Vs.next=e),Dl=!0,Au||(Au=!0,Wb())}function Yr(e,t){if(!Tu&&Dl){Tu=!0;do for(var a=!1,i=Il;i!==null;){if(e!==0){var c=i.pendingLanes;if(c===0)var f=0;else{var g=i.suspendedLanes,y=i.pingedLanes;f=(1<<31-Nt(42|e)+1)-1,f&=c&~(g&~y),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,b0(i,f))}else f=Re,f=ls(i,i===qe?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(f&3)===0||Kn(i,f)||(a=!0,b0(i,f));i=i.next}while(a);Tu=!1}}function Jb(){p0()}function p0(){Dl=Au=!1;var e=0;Qa!==0&&(lv()&&(e=Qa),Qa=0);for(var t=Ot(),a=null,i=Il;i!==null;){var c=i.next,f=x0(i,t);f===0?(i.next=null,a===null?Il=c:a.next=c,c===null&&(Vs=a)):(a=i,(e!==0||(f&3)!==0)&&(Dl=!0)),i=c}Yr(e)}function x0(e,t){for(var a=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var g=31-Nt(f),y=1<<g,N=c[g];N===-1?((y&a)===0||(y&i)!==0)&&(c[g]=$o(y,t)):N<=t&&(e.expiredLanes|=y),f&=~y}if(t=qe,a=Re,a=ls(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,a===0||e===t&&(De===2||De===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&ss(i),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Kn(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(i!==null&&ss(i),_e(a)){case 2:case 8:a=Li;break;case 32:a=rs;break;case 268435456:a=zi;break;default:a=rs}return i=y0.bind(null,e),a=Vt(a,i),e.callbackPriority=t,e.callbackNode=a,t}return i!==null&&i!==null&&ss(i),e.callbackPriority=2,e.callbackNode=null,2}function y0(e,t){if(gt!==0&&gt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ml()&&e.callbackNode!==a)return null;var i=Re;return i=ls(e,e===qe?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(e0(e,i,t),x0(e,Ot()),e.callbackNode!=null&&e.callbackNode===a?y0.bind(null,e):null)}function b0(e,t){if(Ml())return null;e0(e,t,!0)}function Wb(){cv(function(){(Ie&6)!==0?Vt(lr,Jb):p0()})}function Ru(){return Qa===0&&(Qa=Pi()),Qa}function v0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Fi(""+e)}function w0(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function ev(e,t,a,i,c){if(t==="submit"&&a&&a.stateNode===c){var f=v0((c[ht]||null).action),g=i.submitter;g&&(t=(t=g[ht]||null)?v0(t.formAction):g.getAttribute("formAction"),t!==null&&(f=t,g=null));var y=new Zi("action","action",null,i,c);e.push({event:y,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Qa!==0){var N=g?w0(c,g):new FormData(c);Zc(a,{pending:!0,data:N,method:c.method,action:f},null,N)}}else typeof f=="function"&&(y.preventDefault(),N=g?w0(c,g):new FormData(c),Zc(a,{pending:!0,data:N,method:c.method,action:f},f,N))},currentTarget:c}]})}}for(var ku=0;ku<gc.length;ku++){var Ou=gc[ku],tv=Ou.toLowerCase(),nv=Ou[0].toUpperCase()+Ou.slice(1);nn(tv,"on"+nv)}nn(eh,"onAnimationEnd"),nn(th,"onAnimationIteration"),nn(nh,"onAnimationStart"),nn("dblclick","onDoubleClick"),nn("focusin","onFocus"),nn("focusout","onBlur"),nn(bb,"onTransitionRun"),nn(vb,"onTransitionStart"),nn(wb,"onTransitionCancel"),nn(ah,"onTransitionEnd"),fs("onMouseEnter",["mouseout","mouseover"]),fs("onMouseLeave",["mouseout","mouseover"]),fs("onPointerEnter",["pointerout","pointerover"]),fs("onPointerLeave",["pointerout","pointerover"]),Da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Da("onBeforeInput",["compositionend","keypress","textInput","paste"]),Da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),av=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xr));function N0(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var i=e[a],c=i.event;i=i.listeners;e:{var f=void 0;if(t)for(var g=i.length-1;0<=g;g--){var y=i[g],N=y.instance,I=y.currentTarget;if(y=y.listener,N!==f&&c.isPropagationStopped())break e;f=y,c.currentTarget=I;try{f(c)}catch(F){Nl(F)}c.currentTarget=null,f=N}else for(g=0;g<i.length;g++){if(y=i[g],N=y.instance,I=y.currentTarget,y=y.listener,N!==f&&c.isPropagationStopped())break e;f=y,c.currentTarget=I;try{f(c)}catch(F){Nl(F)}c.currentTarget=null,f=N}}}}function Ae(e,t){var a=t[os];a===void 0&&(a=t[os]=new Set);var i=e+"__bubble";a.has(i)||(S0(t,e,2,!1),a.add(i))}function Mu(e,t,a){var i=0;t&&(i|=4),S0(a,e,i,t)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function Iu(e){if(!e[Ul]){e[Ul]=!0,pf.forEach(function(a){a!=="selectionchange"&&(av.has(a)||Mu(a,!1,e),Mu(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ul]||(t[Ul]=!0,Mu("selectionchange",!1,t))}}function S0(e,t,a,i){switch(Y0(t)){case 2:var c=Rv;break;case 8:c=kv;break;default:c=Xu}a=c.bind(null,t,a,e),c=void 0,!nc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,a,{capture:!0,passive:c}):e.addEventListener(t,a,!0):c!==void 0?e.addEventListener(t,a,{passive:c}):e.addEventListener(t,a,!1)}function Du(e,t,a,i,c){var f=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var g=i.tag;if(g===3||g===4){var y=i.stateNode.containerInfo;if(y===c)break;if(g===4)for(g=i.return;g!==null;){var N=g.tag;if((N===3||N===4)&&g.stateNode.containerInfo===c)return;g=g.return}for(;y!==null;){if(g=tn(y),g===null)return;if(N=g.tag,N===5||N===6||N===26||N===27){i=f=g;continue e}y=y.parentNode}}i=i.return}Rf(function(){var I=f,F=ec(a),Q=[];e:{var L=sh.get(e);if(L!==void 0){var P=Zi,xe=e;switch(e){case"keypress":if(Xi(a)===0)break e;case"keydown":case"keyup":P=Qy;break;case"focusin":xe="focus",P=ic;break;case"focusout":xe="blur",P=ic;break;case"beforeblur":case"afterblur":P=ic;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=Mf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=Py;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=eb;break;case eh:case th:case nh:P=Vy;break;case ah:P=nb;break;case"scroll":case"scrollend":P=Ly;break;case"wheel":P=sb;break;case"copy":case"cut":case"paste":P=Gy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Df;break;case"toggle":case"beforetoggle":P=ib}var me=(t&4)!==0,He=!me&&(e==="scroll"||e==="scrollend"),R=me?L!==null?L+"Capture":null:L;me=[];for(var E=I,M;E!==null;){var Y=E;if(M=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||M===null||R===null||(Y=hr(E,R),Y!=null&&me.push(Kr(E,Y,M))),He)break;E=E.return}0<me.length&&(L=new P(L,xe,null,a,F),Q.push({event:L,listeners:me}))}}if((t&7)===0){e:{if(L=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",L&&a!==Wo&&(xe=a.relatedTarget||a.fromElement)&&(tn(xe)||xe[_n]))break e;if((P||L)&&(L=F.window===F?F:(L=F.ownerDocument)?L.defaultView||L.parentWindow:window,P?(xe=a.relatedTarget||a.toElement,P=I,xe=xe?tn(xe):null,xe!==null&&(He=d(xe),me=xe.tag,xe!==He||me!==5&&me!==27&&me!==6)&&(xe=null)):(P=null,xe=I),P!==xe)){if(me=Mf,Y="onMouseLeave",R="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(me=Df,Y="onPointerLeave",R="onPointerEnter",E="pointer"),He=P==null?L:fr(P),M=xe==null?L:fr(xe),L=new me(Y,E+"leave",P,a,F),L.target=He,L.relatedTarget=M,Y=null,tn(F)===I&&(me=new me(R,E+"enter",xe,a,F),me.target=M,me.relatedTarget=He,Y=me),He=Y,P&&xe)t:{for(me=P,R=xe,E=0,M=me;M;M=qs(M))E++;for(M=0,Y=R;Y;Y=qs(Y))M++;for(;0<E-M;)me=qs(me),E--;for(;0<M-E;)R=qs(R),M--;for(;E--;){if(me===R||R!==null&&me===R.alternate)break t;me=qs(me),R=qs(R)}me=null}else me=null;P!==null&&_0(Q,L,P,me,!1),xe!==null&&He!==null&&_0(Q,He,xe,me,!0)}}e:{if(L=I?fr(I):window,P=L.nodeName&&L.nodeName.toLowerCase(),P==="select"||P==="input"&&L.type==="file")var de=qf;else if(Bf(L))if(Gf)de=pb;else{de=mb;var Ce=hb}else P=L.nodeName,!P||P.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?I&&Jo(I.elementType)&&(de=qf):de=gb;if(de&&(de=de(e,I))){Vf(Q,de,a,F);break e}Ce&&Ce(e,L,I),e==="focusout"&&I&&L.type==="number"&&I.memoizedProps.value!=null&&Qo(L,"number",L.value)}switch(Ce=I?fr(I):window,e){case"focusin":(Bf(Ce)||Ce.contentEditable==="true")&&(bs=Ce,fc=I,wr=null);break;case"focusout":wr=fc=bs=null;break;case"mousedown":hc=!0;break;case"contextmenu":case"mouseup":case"dragend":hc=!1,Jf(Q,a,F);break;case"selectionchange":if(yb)break;case"keydown":case"keyup":Jf(Q,a,F)}var he;if(oc)e:{switch(e){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else ys?Pf(e,a)&&(ge="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ge="onCompositionStart");ge&&(Uf&&a.locale!=="ko"&&(ys||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&ys&&(he=kf()):(Zn=F,ac="value"in Zn?Zn.value:Zn.textContent,ys=!0)),Ce=Ll(I,ge),0<Ce.length&&(ge=new If(ge,e,null,a,F),Q.push({event:ge,listeners:Ce}),he?ge.data=he:(he=Hf(a),he!==null&&(ge.data=he)))),(he=ob?cb(e,a):ub(e,a))&&(ge=Ll(I,"onBeforeInput"),0<ge.length&&(Ce=new If("onBeforeInput","beforeinput",null,a,F),Q.push({event:Ce,listeners:ge}),Ce.data=he)),ev(Q,e,I,a,F)}N0(Q,t)})}function Kr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Ll(e,t){for(var a=t+"Capture",i=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=hr(e,a),c!=null&&i.unshift(Kr(e,c,f)),c=hr(e,t),c!=null&&i.push(Kr(e,c,f))),e.tag===3)return i;e=e.return}return[]}function qs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function _0(e,t,a,i,c){for(var f=t._reactName,g=[];a!==null&&a!==i;){var y=a,N=y.alternate,I=y.stateNode;if(y=y.tag,N!==null&&N===i)break;y!==5&&y!==26&&y!==27||I===null||(N=I,c?(I=hr(a,f),I!=null&&g.unshift(Kr(a,I,N))):c||(I=hr(a,f),I!=null&&g.push(Kr(a,I,N)))),a=a.return}g.length!==0&&e.push({event:t,listeners:g})}var sv=/\r\n?/g,rv=/\u0000|\uFFFD/g;function j0(e){return(typeof e=="string"?e:""+e).replace(sv,`
`).replace(rv,"")}function C0(e,t){return t=j0(t),j0(e)===t}function zl(){}function Pe(e,t,a,i,c,f){switch(a){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||gs(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&gs(e,""+i);break;case"className":qi(e,"class",i);break;case"tabIndex":qi(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":qi(e,a,i);break;case"style":Af(e,i,f);break;case"data":if(t!=="object"){qi(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Fi(""+i),e.setAttribute(a,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(t!=="input"&&Pe(e,t,"name",c.name,c,null),Pe(e,t,"formEncType",c.formEncType,c,null),Pe(e,t,"formMethod",c.formMethod,c,null),Pe(e,t,"formTarget",c.formTarget,c,null)):(Pe(e,t,"encType",c.encType,c,null),Pe(e,t,"method",c.method,c,null),Pe(e,t,"target",c.target,c,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(a);break}i=Fi(""+i),e.setAttribute(a,i);break;case"onClick":i!=null&&(e.onclick=zl);break;case"onScroll":i!=null&&Ae("scroll",e);break;case"onScrollEnd":i!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(o(61));if(a=i.__html,a!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}a=Fi(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""+i):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":i===!0?e.setAttribute(a,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(a,i):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(a,i):e.removeAttribute(a);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(a):e.setAttribute(a,i);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),Vi(e,"popover",i);break;case"xlinkActuate":jn(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":jn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":jn(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":jn(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":jn(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":jn(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":jn(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":jn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":jn(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Vi(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Dy.get(a)||a,Vi(e,a,i))}}function Uu(e,t,a,i,c,f){switch(a){case"style":Af(e,i,f);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(o(61));if(a=i.__html,a!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof i=="string"?gs(e,i):(typeof i=="number"||typeof i=="bigint")&&gs(e,""+i);break;case"onScroll":i!=null&&Ae("scroll",e);break;case"onScrollEnd":i!=null&&Ae("scrollend",e);break;case"onClick":i!=null&&(e.onclick=zl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xf.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),t=a.slice(2,c?a.length-7:void 0),f=e[ht]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(t,f,c),typeof i=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,i,c);break e}a in e?e[a]=i:i===!0?e.setAttribute(a,""):Vi(e,a,i)}}}function pt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var i=!1,c=!1,f;for(f in a)if(a.hasOwnProperty(f)){var g=a[f];if(g!=null)switch(f){case"src":i=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Pe(e,t,f,g,a,null)}}c&&Pe(e,t,"srcSet",a.srcSet,a,null),i&&Pe(e,t,"src",a.src,a,null);return;case"input":Ae("invalid",e);var y=f=g=c=null,N=null,I=null;for(i in a)if(a.hasOwnProperty(i)){var F=a[i];if(F!=null)switch(i){case"name":c=F;break;case"type":g=F;break;case"checked":N=F;break;case"defaultChecked":I=F;break;case"value":f=F;break;case"defaultValue":y=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(o(137,t));break;default:Pe(e,t,i,F,a,null)}}_f(e,f,y,N,I,g,c,!1),Gi(e);return;case"select":Ae("invalid",e),i=g=f=null;for(c in a)if(a.hasOwnProperty(c)&&(y=a[c],y!=null))switch(c){case"value":f=y;break;case"defaultValue":g=y;break;case"multiple":i=y;default:Pe(e,t,c,y,a,null)}t=f,a=g,e.multiple=!!i,t!=null?ms(e,!!i,t,!1):a!=null&&ms(e,!!i,a,!0);return;case"textarea":Ae("invalid",e),f=c=i=null;for(g in a)if(a.hasOwnProperty(g)&&(y=a[g],y!=null))switch(g){case"value":i=y;break;case"defaultValue":c=y;break;case"children":f=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:Pe(e,t,g,y,a,null)}Cf(e,i,c,f),Gi(e);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(i=a[N],i!=null))switch(N){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Pe(e,t,N,i,a,null)}return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(i=0;i<Xr.length;i++)Ae(Xr[i],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in a)if(a.hasOwnProperty(I)&&(i=a[I],i!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Pe(e,t,I,i,a,null)}return;default:if(Jo(t)){for(F in a)a.hasOwnProperty(F)&&(i=a[F],i!==void 0&&Uu(e,t,F,i,a,void 0));return}}for(y in a)a.hasOwnProperty(y)&&(i=a[y],i!=null&&Pe(e,t,y,i,a,null))}function iv(e,t,a,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,g=null,y=null,N=null,I=null,F=null;for(P in a){var Q=a[P];if(a.hasOwnProperty(P)&&Q!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":N=Q;default:i.hasOwnProperty(P)||Pe(e,t,P,null,i,Q)}}for(var L in i){var P=i[L];if(Q=a[L],i.hasOwnProperty(L)&&(P!=null||Q!=null))switch(L){case"type":f=P;break;case"name":c=P;break;case"checked":I=P;break;case"defaultChecked":F=P;break;case"value":g=P;break;case"defaultValue":y=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(137,t));break;default:P!==Q&&Pe(e,t,L,P,i,Q)}}Zo(e,g,y,N,I,F,f,c);return;case"select":P=g=y=L=null;for(f in a)if(N=a[f],a.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":P=N;default:i.hasOwnProperty(f)||Pe(e,t,f,null,i,N)}for(c in i)if(f=i[c],N=a[c],i.hasOwnProperty(c)&&(f!=null||N!=null))switch(c){case"value":L=f;break;case"defaultValue":y=f;break;case"multiple":g=f;default:f!==N&&Pe(e,t,c,f,i,N)}t=y,a=g,i=P,L!=null?ms(e,!!a,L,!1):!!i!=!!a&&(t!=null?ms(e,!!a,t,!0):ms(e,!!a,a?[]:"",!1));return;case"textarea":P=L=null;for(y in a)if(c=a[y],a.hasOwnProperty(y)&&c!=null&&!i.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Pe(e,t,y,null,i,c)}for(g in i)if(c=i[g],f=a[g],i.hasOwnProperty(g)&&(c!=null||f!=null))switch(g){case"value":L=c;break;case"defaultValue":P=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==f&&Pe(e,t,g,c,i,f)}jf(e,L,P);return;case"option":for(var xe in a)if(L=a[xe],a.hasOwnProperty(xe)&&L!=null&&!i.hasOwnProperty(xe))switch(xe){case"selected":e.selected=!1;break;default:Pe(e,t,xe,null,i,L)}for(N in i)if(L=i[N],P=a[N],i.hasOwnProperty(N)&&L!==P&&(L!=null||P!=null))switch(N){case"selected":e.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Pe(e,t,N,L,i,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in a)L=a[me],a.hasOwnProperty(me)&&L!=null&&!i.hasOwnProperty(me)&&Pe(e,t,me,null,i,L);for(I in i)if(L=i[I],P=a[I],i.hasOwnProperty(I)&&L!==P&&(L!=null||P!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(o(137,t));break;default:Pe(e,t,I,L,i,P)}return;default:if(Jo(t)){for(var He in a)L=a[He],a.hasOwnProperty(He)&&L!==void 0&&!i.hasOwnProperty(He)&&Uu(e,t,He,void 0,i,L);for(F in i)L=i[F],P=a[F],!i.hasOwnProperty(F)||L===P||L===void 0&&P===void 0||Uu(e,t,F,L,i,P);return}}for(var R in a)L=a[R],a.hasOwnProperty(R)&&L!=null&&!i.hasOwnProperty(R)&&Pe(e,t,R,null,i,L);for(Q in i)L=i[Q],P=a[Q],!i.hasOwnProperty(Q)||L===P||L==null&&P==null||Pe(e,t,Q,L,i,P)}var Lu=null,zu=null;function Pl(e){return e.nodeType===9?e:e.ownerDocument}function E0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function A0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Pu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hu=null;function lv(){var e=window.event;return e&&e.type==="popstate"?e===Hu?!1:(Hu=e,!0):(Hu=null,!1)}var T0=typeof setTimeout=="function"?setTimeout:void 0,ov=typeof clearTimeout=="function"?clearTimeout:void 0,R0=typeof Promise=="function"?Promise:void 0,cv=typeof queueMicrotask=="function"?queueMicrotask:typeof R0<"u"?function(e){return R0.resolve(null).then(e).catch(uv)}:T0;function uv(e){setTimeout(function(){throw e})}function fa(e){return e==="head"}function k0(e,t){var a=t,i=0,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<i&&8>i){a=i;var g=e.ownerDocument;if(a&1&&Zr(g.documentElement),a&2&&Zr(g.body),a&4)for(a=g.head,Zr(a),g=a.firstChild;g;){var y=g.nextSibling,N=g.nodeName;g[St]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=y}}if(c===0){e.removeChild(f),si(t);return}c--}else a==="$"||a==="$?"||a==="$!"?c++:i=a.charCodeAt(0)-48;else i=0;a=f}while(a);si(t)}function Bu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Bu(a),qt(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function dv(e,t,a,i){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[St])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=sn(e.nextSibling),e===null)break}return null}function fv(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=sn(e.nextSibling),e===null))return null;return e}function Vu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function hv(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var i=function(){t(),a.removeEventListener("DOMContentLoaded",i)};a.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var qu=null;function O0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function M0(e,t,a){switch(t=Pl(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Zr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);qt(e)}var Jt=new Map,I0=new Set;function Hl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Pn=$.d;$.d={f:mv,r:gv,D:pv,C:xv,L:yv,m:bv,X:wv,S:vv,M:Nv};function mv(){var e=Pn.f(),t=kl();return e||t}function gv(e){var t=us(e);t!==null&&t.tag===5&&t.type==="form"?em(t):Pn.r(e)}var Gs=typeof document>"u"?null:document;function D0(e,t,a){var i=Gs;if(i&&typeof t=="string"&&t){var c=$t(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),I0.has(c)||(I0.add(c),e={rel:e,crossOrigin:a,href:t},i.querySelector(c)===null&&(t=i.createElement("link"),pt(t,"link",e),lt(t),i.head.appendChild(t)))}}function pv(e){Pn.D(e),D0("dns-prefetch",e,null)}function xv(e,t){Pn.C(e,t),D0("preconnect",e,t)}function yv(e,t,a){Pn.L(e,t,a);var i=Gs;if(i&&e&&t){var c='link[rel="preload"][as="'+$t(t)+'"]';t==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+$t(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+$t(a.imageSizes)+'"]')):c+='[href="'+$t(e)+'"]';var f=c;switch(t){case"style":f=$s(e);break;case"script":f=Fs(e)}Jt.has(f)||(e=b({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Jt.set(f,e),i.querySelector(c)!==null||t==="style"&&i.querySelector(Qr(f))||t==="script"&&i.querySelector(Jr(f))||(t=i.createElement("link"),pt(t,"link",e),lt(t),i.head.appendChild(t)))}}function bv(e,t){Pn.m(e,t);var a=Gs;if(a&&e){var i=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+$t(i)+'"][href="'+$t(e)+'"]',f=c;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Fs(e)}if(!Jt.has(f)&&(e=b({rel:"modulepreload",href:e},t),Jt.set(f,e),a.querySelector(c)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Jr(f)))return}i=a.createElement("link"),pt(i,"link",e),lt(i),a.head.appendChild(i)}}}function vv(e,t,a){Pn.S(e,t,a);var i=Gs;if(i&&e){var c=ds(i).hoistableStyles,f=$s(e);t=t||"default";var g=c.get(f);if(!g){var y={loading:0,preload:null};if(g=i.querySelector(Qr(f)))y.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Jt.get(f))&&Gu(e,a);var N=g=i.createElement("link");lt(N),pt(N,"link",e),N._p=new Promise(function(I,F){N.onload=I,N.onerror=F}),N.addEventListener("load",function(){y.loading|=1}),N.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Bl(g,t,i)}g={type:"stylesheet",instance:g,count:1,state:y},c.set(f,g)}}}function wv(e,t){Pn.X(e,t);var a=Gs;if(a&&e){var i=ds(a).hoistableScripts,c=Fs(e),f=i.get(c);f||(f=a.querySelector(Jr(c)),f||(e=b({src:e,async:!0},t),(t=Jt.get(c))&&$u(e,t),f=a.createElement("script"),lt(f),pt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},i.set(c,f))}}function Nv(e,t){Pn.M(e,t);var a=Gs;if(a&&e){var i=ds(a).hoistableScripts,c=Fs(e),f=i.get(c);f||(f=a.querySelector(Jr(c)),f||(e=b({src:e,async:!0,type:"module"},t),(t=Jt.get(c))&&$u(e,t),f=a.createElement("script"),lt(f),pt(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},i.set(c,f))}}function U0(e,t,a,i){var c=(c=ue.current)?Hl(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=$s(a.href),a=ds(c).hoistableStyles,i=a.get(t),i||(i={type:"style",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=$s(a.href);var f=ds(c).hoistableStyles,g=f.get(e);if(g||(c=c.ownerDocument||c,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,g),(f=c.querySelector(Qr(e)))&&!f._p&&(g.instance=f,g.state.loading=5),Jt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jt.set(e,a),f||Sv(c,e,a,g.state))),t&&i===null)throw Error(o(528,""));return g}if(t&&i!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Fs(a),a=ds(c).hoistableScripts,i=a.get(t),i||(i={type:"script",instance:null,count:0,state:null},a.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function $s(e){return'href="'+$t(e)+'"'}function Qr(e){return'link[rel="stylesheet"]['+e+"]"}function L0(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Sv(e,t,a,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),pt(t,"link",a),lt(t),e.head.appendChild(t))}function Fs(e){return'[src="'+$t(e)+'"]'}function Jr(e){return"script[async]"+e}function z0(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+$t(a.href)+'"]');if(i)return t.instance=i,lt(i),i;var c=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),lt(i),pt(i,"style",c),Bl(i,a.precedence,e),t.instance=i;case"stylesheet":c=$s(a.href);var f=e.querySelector(Qr(c));if(f)return t.state.loading|=4,t.instance=f,lt(f),f;i=L0(a),(c=Jt.get(c))&&Gu(i,c),f=(e.ownerDocument||e).createElement("link"),lt(f);var g=f;return g._p=new Promise(function(y,N){g.onload=y,g.onerror=N}),pt(f,"link",i),t.state.loading|=4,Bl(f,a.precedence,e),t.instance=f;case"script":return f=Fs(a.src),(c=e.querySelector(Jr(f)))?(t.instance=c,lt(c),c):(i=a,(c=Jt.get(f))&&(i=b({},a),$u(i,c)),e=e.ownerDocument||e,c=e.createElement("script"),lt(c),pt(c,"link",i),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,Bl(i,a.precedence,e));return t.instance}function Bl(e,t,a){for(var i=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=i.length?i[i.length-1]:null,f=c,g=0;g<i.length;g++){var y=i[g];if(y.dataset.precedence===t)f=y;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Gu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function $u(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Vl=null;function P0(e,t,a){if(Vl===null){var i=new Map,c=Vl=new Map;c.set(a,i)}else c=Vl,i=c.get(a),i||(i=new Map,c.set(a,i));if(i.has(e))return i;for(i.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var f=a[c];if(!(f[St]||f[Le]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var g=f.getAttribute(t)||"";g=e+g;var y=i.get(g);y?y.push(f):i.set(g,[f])}}return i}function H0(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function _v(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function B0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Wr=null;function jv(){}function Cv(e,t,a){if(Wr===null)throw Error(o(475));var i=Wr;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var c=$s(a.href),f=e.querySelector(Qr(c));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=ql.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=f,lt(f);return}f=e.ownerDocument||e,a=L0(a),(c=Jt.get(c))&&Gu(a,c),f=f.createElement("link"),lt(f);var g=f;g._p=new Promise(function(y,N){g.onload=y,g.onerror=N}),pt(f,"link",a),t.instance=f}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(i.count++,t=ql.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function Ev(){if(Wr===null)throw Error(o(475));var e=Wr;return e.stylesheets&&e.count===0&&Fu(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&Fu(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function ql(){if(this.count--,this.count===0){if(this.stylesheets)Fu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Gl=null;function Fu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Gl=new Map,t.forEach(Av,e),Gl=null,ql.call(e))}function Av(e,t){if(!(t.state.loading&4)){var a=Gl.get(e);if(a)var i=a.get(null);else{a=new Map,Gl.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var g=c[f];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),i=g)}i&&a.set(null,i)}c=t.instance,g=c.getAttribute("data-precedence"),f=a.get(g)||i,f===i&&a.set(null,c),a.set(g,c),this.count++,i=ql.bind(this),c.addEventListener("load",i),c.addEventListener("error",i),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var ei={$$typeof:O,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function Tv(e,t,a,i,c,f,g,y){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dr(0),this.hiddenUpdates=dr(null),this.identifierPrefix=i,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=y,this.incompleteTransitions=new Map}function V0(e,t,a,i,c,f,g,y,N,I,F,Q){return e=new Tv(e,t,a,g,y,N,I,Q),t=1,f===!0&&(t|=24),f=It(3,null,null,t),e.current=f,f.stateNode=e,t=Ec(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:i,isDehydrated:a,cache:t},kc(f),e}function q0(e){return e?(e=Ss,e):Ss}function G0(e,t,a,i,c,f){c=q0(c),i.context===null?i.context=c:i.pendingContext=c,i=Wn(t),i.payload={element:a},f=f===void 0?null:f,f!==null&&(i.callback=f),a=ea(e,i,t),a!==null&&(Pt(a,e,t),Rr(a,e,t))}function $0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Yu(e,t){$0(e,t),(e=e.alternate)&&$0(e,t)}function F0(e){if(e.tag===13){var t=Ns(e,67108864);t!==null&&Pt(t,e,67108864),Yu(e,67108864)}}var $l=!0;function Rv(e,t,a,i){var c=k.T;k.T=null;var f=$.p;try{$.p=2,Xu(e,t,a,i)}finally{$.p=f,k.T=c}}function kv(e,t,a,i){var c=k.T;k.T=null;var f=$.p;try{$.p=8,Xu(e,t,a,i)}finally{$.p=f,k.T=c}}function Xu(e,t,a,i){if($l){var c=Ku(i);if(c===null)Du(e,t,i,Fl,a),X0(e,i);else if(Mv(c,e,t,a,i))i.stopPropagation();else if(X0(e,i),t&4&&-1<Ov.indexOf(e)){for(;c!==null;){var f=us(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var g=Sn(f.pendingLanes);if(g!==0){var y=f;for(y.pendingLanes|=2,y.entangledLanes|=2;g;){var N=1<<31-Nt(g);y.entanglements[1]|=N,g&=~N}pn(f),(Ie&6)===0&&(Tl=Ot()+500,Yr(0))}}break;case 13:y=Ns(f,2),y!==null&&Pt(y,f,2),kl(),Yu(f,2)}if(f=Ku(i),f===null&&Du(e,t,i,Fl,a),f===c)break;c=f}c!==null&&i.stopPropagation()}else Du(e,t,i,null,a)}}function Ku(e){return e=ec(e),Zu(e)}var Fl=null;function Zu(e){if(Fl=null,e=tn(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Fl=e,null}function Y0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ho()){case lr:return 2;case Li:return 8;case rs:case Bo:return 32;case zi:return 268435456;default:return 32}default:return 32}}var Qu=!1,ha=null,ma=null,ga=null,ti=new Map,ni=new Map,pa=[],Ov="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X0(e,t){switch(e){case"focusin":case"focusout":ha=null;break;case"dragenter":case"dragleave":ma=null;break;case"mouseover":case"mouseout":ga=null;break;case"pointerover":case"pointerout":ti.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ni.delete(t.pointerId)}}function ai(e,t,a,i,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:a,eventSystemFlags:i,nativeEvent:f,targetContainers:[c]},t!==null&&(t=us(t),t!==null&&F0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Mv(e,t,a,i,c){switch(t){case"focusin":return ha=ai(ha,e,t,a,i,c),!0;case"dragenter":return ma=ai(ma,e,t,a,i,c),!0;case"mouseover":return ga=ai(ga,e,t,a,i,c),!0;case"pointerover":var f=c.pointerId;return ti.set(f,ai(ti.get(f)||null,e,t,a,i,c)),!0;case"gotpointercapture":return f=c.pointerId,ni.set(f,ai(ni.get(f)||null,e,t,a,i,c)),!0}return!1}function K0(e){var t=tn(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,je(e.priority,function(){if(a.tag===13){var i=zt();i=fe(i);var c=Ns(a,i);c!==null&&Pt(c,a,i),Yu(a,i)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Ku(e.nativeEvent);if(a===null){a=e.nativeEvent;var i=new a.constructor(a.type,a);Wo=i,a.target.dispatchEvent(i),Wo=null}else return t=us(a),t!==null&&F0(t),e.blockedOn=a,!1;t.shift()}return!0}function Z0(e,t,a){Yl(e)&&a.delete(t)}function Iv(){Qu=!1,ha!==null&&Yl(ha)&&(ha=null),ma!==null&&Yl(ma)&&(ma=null),ga!==null&&Yl(ga)&&(ga=null),ti.forEach(Z0),ni.forEach(Z0)}function Xl(e,t){e.blockedOn===t&&(e.blockedOn=null,Qu||(Qu=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Iv)))}var Kl=null;function Q0(e){Kl!==e&&(Kl=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Kl===e&&(Kl=null);for(var t=0;t<e.length;t+=3){var a=e[t],i=e[t+1],c=e[t+2];if(typeof i!="function"){if(Zu(i||a)===null)continue;break}var f=us(a);f!==null&&(e.splice(t,3),t-=3,Zc(f,{pending:!0,data:c,method:a.method,action:i},i,c))}}))}function si(e){function t(N){return Xl(N,e)}ha!==null&&Xl(ha,e),ma!==null&&Xl(ma,e),ga!==null&&Xl(ga,e),ti.forEach(t),ni.forEach(t);for(var a=0;a<pa.length;a++){var i=pa[a];i.blockedOn===e&&(i.blockedOn=null)}for(;0<pa.length&&(a=pa[0],a.blockedOn===null);)K0(a),a.blockedOn===null&&pa.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(i=0;i<a.length;i+=3){var c=a[i],f=a[i+1],g=c[ht]||null;if(typeof f=="function")g||Q0(a);else if(g){var y=null;if(f&&f.hasAttribute("formAction")){if(c=f,g=f[ht]||null)y=g.formAction;else if(Zu(c)!==null)continue}else y=g.action;typeof y=="function"?a[i+1]=y:(a.splice(i,3),i-=3),Q0(a)}}}function Ju(e){this._internalRoot=e}Zl.prototype.render=Ju.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,i=zt();G0(a,i,e,t,null,null)},Zl.prototype.unmount=Ju.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;G0(e.current,2,null,e,null,null),kl(),t[_n]=null}};function Zl(e){this._internalRoot=e}Zl.prototype.unstable_scheduleHydration=function(e){if(e){var t=we();e={blockedOn:null,target:e,priority:t};for(var a=0;a<pa.length&&t!==0&&t<pa[a].priority;a++);pa.splice(a,0,e),a===0&&K0(e)}};var J0=n.version;if(J0!=="19.1.0")throw Error(o(527,J0,"19.1.0"));$.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=m(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var Dv={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{Ma=Ql.inject(Dv),wt=Ql}catch{}}return ii.createRoot=function(e,t){if(!u(e))throw Error(o(299));var a=!1,i="",c=mm,f=gm,g=pm,y=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(y=t.unstable_transitionCallbacks)),t=V0(e,1,!1,null,null,a,i,c,f,g,y,null),e[_n]=t.current,Iu(e),new Ju(t)},ii.hydrateRoot=function(e,t,a){if(!u(e))throw Error(o(299));var i=!1,c="",f=mm,g=gm,y=pm,N=null,I=null;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(I=a.formState)),t=V0(e,1,!0,t,a??null,i,c,f,g,y,N,I),t.context=q0(null),a=t.current,i=zt(),i=fe(i),c=Wn(i),c.callback=null,ea(a,c,i),a=i,t.current.lanes=a,Ia(t,a),pn(t),e[_n]=t.current,Iu(e),new Zl(t)},ii.version="19.1.0",ii}var og;function $v(){if(og)return td.exports;og=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),td.exports=Gv(),td.exports}var Fv=$v();const Yv=$d(Fv);var rn=(s=>(s.Original="Original",s.Square_1_1="1:1",s.Landscape_16_9="16:9",s.Portrait_9_16="9:16",s.Landscape_4_3="4:3",s.Portrait_3_4="3:4",s))(rn||{});const va="マイガレージ - AISHA",Op="https://aisha-backend-584412696241.asia-northeast1.run.app/api",Xv=[rn.Square_1_1,rn.Landscape_16_9,rn.Portrait_9_16,rn.Landscape_4_3,rn.Portrait_3_4],Kv=[{name:"X",urlPrefix:"https://twitter.com/intent/tweet?text=",icon:"XIcon"},{name:"Facebook",urlPrefix:"https://www.facebook.com/sharer/sharer.php?u=",icon:"FacebookIcon"},{name:"Copy URL",icon:"LinkIcon"}],Mp=[{id:"tshirt_XYZ",name:"Tシャツ",creditCost:50,apiId:"tshirt_XYZ",variations:[{id:"size",typeName:"サイズ",options:["S","M","L","XL"]},{id:"color",typeName:"色",options:["白","黒","赤","青"]}]},{id:"sticker_ABC",name:"ステッカー",creditCost:25,apiId:"sticker_ABC",variations:[{id:"material",typeName:"素材",options:["通常","防水","ホログラム"]}]},{id:"mug_DEF",name:"マグカップ",creditCost:40,apiId:"mug_DEF",variations:[{id:"capacity",typeName:"容量",options:["250ml","350ml"]}]}],Zv=rn.Square_1_1,Vn=10,Cd=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0015 0m-15 0a7.5 7.5 0 1115 0m-15 0H3m1.5 0H21m-1.5 0H18m2.25-7.5H18m3.75 0H21m-3.75 0h.008v.008h-.008V12m0 0h.008v.008h-.008V12m0 0H15m3.75 0H21m-3.75 0h.008v.008h-.008V12m0 0h.008v.008h-.008V12m-9.75 5.25H3.75m1.5 0H21m-1.5 0H18m2.25 0H18m3.75 0H21m-3.75 0h.008v.008h-.008v-.008zm0 0h.008v.008h-.008v-.008zm-9.75-3H3.75m1.5 0H21m-1.5 0H18m2.25-7.5H18m3.75 0H21m-3.75 0h.008v.008h-.008V12m0 0h.008v.008h-.008V12m0 0H15m3.75 0H21m-3.75 0h.008v.008h-.008V12m0 0h.008v.008h-.008V12M12 9.75V4.5m0 15V12m0-2.25h.008v.008H12v-.008zm0 0H9.75m2.25 0H12m0 0H9.75m2.25 0H12m0 0H9.75m2.25 0H12m0 0H9.75M12 12v2.25m0 0h-.008v.008H12v-.008zm0 0h.008v.008H12v-.008zm0 0h.008v.008H12v-.008zm0 0H14.25m-2.25 0H12m0 0h.008v.008H12v-.008zm0 0H14.25m-2.25 0H12m0 0H14.25M12 12V9.75m0 0h-.008v.008H12v-.008zm0 0h.008v.008H12v-.008zm0 0h.008v.008H12v-.008zm0 0H9.75m2.25 0H12m0 0h.008v.008H12v-.008zm0 0H9.75m2.25 0H12m0 0H9.75M12 4.5V9.75m0 5.25V12m0 2.25h.008v.008H12v-.008zm0 0H9.75m2.25 0H12m0 0H9.75m2.25 0H12m0 0H9.75m2.25 0H12M12 12V9.75"})}),xi=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),ao=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 21z"})}),cg=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})}),ug=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m-12.75-3h12.75L12 9"})}),Ta=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),Wt=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.788 3.212a.75.75 0 00-1.576 0M10.788 3.212A6.341 6.341 0 006.168 8.34c0 1.26.366 2.442.99 3.49l-.003.003.001.002a6.312 6.312 0 003.637 9.444l.002.001.002.001a.75.75 0 00.99-1.324l-.003-.002-.002-.001a4.813 4.813 0 01-2.727-7.193l.002-.003.001-.002a4.836 4.836 0 014.412-2.273c1.12 0 2.175.39 3.013 1.063l.002.001.002.002a.75.75 0 001.084-1.034l-.002-.001-.002-.002A6.336 6.336 0 0010.788 3.212zM9.25 10.553a.75.75 0 00-1.5 0v.001a.75.75 0 001.5 0V10.553zM12.25 12.303a.75.75 0 00-1.5 0v.001a.75.75 0 001.5 0V12.303zM14.75 15.053a.75.75 0 00-1.5 0v.001a.75.75 0 001.5 0V15.053zM15.288 4.712a.75.75 0 00-1.06 1.061l.001.002.002.001a2.25 2.25 0 01-1.988 3.288l-.002 0-.002.001a.75.75 0 00.004 1.5l.002-.001.002 0a3.75 3.75 0 003.313-5.474l-.001-.002-.002-.001z"})}),Qv=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"})}),dg=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 13.5V3.75m0 9.75a1.5 1.5 0 010 3m0-3a1.5 1.5 0 000 3m0 3.75V16.5m12-3V3.75m0 9.75a1.5 1.5 0 010 3m0-3a1.5 1.5 0 000 3m0 3.75V16.5m-6-9V3.75m0 3a1.5 1.5 0 010 3m0-3a1.5 1.5 0 000 3m0 9.75V10.5"})}),Jv=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),Ip=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),fg=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l7.5-7.5 7.5 7.5m-15 6l7.5-7.5 7.5 7.5"})}),hg=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 12l4.179 2.25M6.429 14.25l5.571 3 5.571-3M6.429 14.25L2.25 12l4.179 2.25m0 0l5.571 3 5.571-3m0 0l4.179-2.25L12 9.75l-4.179 2.25m11.142 0L12 14.25l-4.179-2.25M21.75 12l-5.571-3-5.571 3M21.75 12l-5.571 3 5.571-3z"})}),mg=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5A.75.75 0 0114.25 12h4.5a.75.75 0 01.75.75v7.5m-6-.75h1.5m-1.5 0H5.625c-.621 0-1.125-.504-1.125-1.125v-6.75c0-.621.504-1.125 1.125-1.125H9.75V7.5a3 3 0 016 0v3.75m0 0H9.75m-4.5 0H2.25m19.5 0H18v-3.75a3 3 0 00-3-3H9.75a3 3 0 00-3 3V12m0 0v9"})}),Wv=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),Dp=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),es=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),ja=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c1.153 0 2.24.03 3.22.077m3.22-.077L10.875 5.79m.008.008L10.875 5.79m0 0c0-1.097.658-2.022 1.624-2.316C13.437 3.256 14.286 3 15.17 3c1.065 0 2.01.218 2.85.559C19.004 3.92 19.5 4.887 19.5 6c0 .598-.077 1.15-.22 1.659L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c1.153 0 2.24.03 3.22.077m3.22-.077L10.875 5.79m.008.008L10.875 5.79m0 0c0-1.097.658-2.022 1.624-2.316C13.437 3.256 14.286 3 15.17 3c1.065 0 2.01.218 2.85.559C19.004 3.92 19.5 4.887 19.5 6c0 .598-.077 1.15-.22 1.659"})}),Up=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),Lp=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"})}),ln=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),vt=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),e1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})}),So=s=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),zp=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}),t1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25A2.25 2.25 0 0113.5 8.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})}),gg=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}),n1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-3.741-5.197m-15 0A3 3 0 013 13.041M3 13.041v2.381C3 17.533 5.433 20 8.959 20S15 17.533 15 14.959V13.04M21 13.041v2.381C21 17.533 18.567 20 15.041 20S9 17.533 9 14.959V13.04M15 13.041c0-1.191.905-2.162 2.008-2.306M5.008 10.735C6.11 10.879 7 11.85 7 13.041M12 6a3 3 0 11-6 0 3 3 0 016 0zm12 0a3 3 0 11-6 0 3 3 0 016 0zM12 10a3 3 0 11-6 0 3 3 0 016 0z"})}),Ys=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Jl=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),a1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})}),s1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Pp=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM10.5 16.5h-1.5V12h1.5v4.5z"})}),r1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),i1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),l1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 6a2.25 2.25 0 00-2.25-2.25H6.319c-.316 0-.622.05-.91.144A2.25 2.25 0 003.22 5.392L2.25 7.5V15a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 15V7.5l-.97-2.108a2.25 2.25 0 00-2.19-1.252C18.002 4.05 17.696 4 17.382 4h-1.872A2.25 2.25 0 0013.26 6.078M2.25 7.5h19.5M9 17.25v2.25M12 17.25v2.25M15 17.25v2.25M9 7.5c0-1.105.152-2.14.426-3.138"})}),ji=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-3.75h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"})}),Hp=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),Bp=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 18.236V6.764L12.515 2.14A2 2 0 0114 2.418v7.582zM7 21V9m0 12H4m3 0h3"})}),Vp=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.017c.163 0 .326-.02.485.06L17 5.764V17.236L11.485 21.86A2 2 0 0110 21.582V14zM17 3v12m0-12h3m-3 0h-3"})}),pg=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"})}),u1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),rd=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),d1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),f1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),h1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"})}),m1=s=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),g1=(s,n=2e3,r=1)=>new Promise((o,u)=>{const d=new Image,h=document.createElement("canvas"),p=h.getContext("2d");if(!p){u(new Error("Canvas context not available"));return}d.onload=()=>{const{width:x,height:b}=d;if(x<=n&&b<=n){o(s);return}const w=Math.max(x,b),v=n/w,A=Math.round(x*v),j=Math.round(b*v);h.width=A,h.height=j,p.imageSmoothingEnabled=!0,p.imageSmoothingQuality="high",p.drawImage(d,0,0,A,j),h.toBlob(z=>{if(!z){u(new Error("Failed to create blob"));return}const S=new File([z],s.name,{type:s.type,lastModified:Date.now()});console.log(`🖼️ 画像リサイズ完了: ${x}x${b} → ${A}x${j} (${Math.round(s.size/1024)}KB → ${Math.round(S.size/1024)}KB)`),o(S)},s.type,r)},d.onerror=()=>{u(new Error("Failed to load image"))};const m=new FileReader;m.onload=x=>{var b;d.src=(b=x.target)==null?void 0:b.result},m.onerror=()=>{u(new Error("Failed to read file"))},m.readAsDataURL(s)}),p1=s=>new Promise((n,r)=>{const o=new Image;o.onload=()=>{n({width:o.width,height:o.height})},o.onerror=()=>{r(new Error("Failed to load image"))};const u=new FileReader;u.onload=d=>{var h;o.src=(h=d.target)==null?void 0:h.result},u.onerror=()=>{r(new Error("Failed to read file"))},u.readAsDataURL(s)}),di=C.forwardRef(({onImageSelect:s,label:n="画像アップロード (任意)",uploadedFile:r,initialPreviewUrl:o,showDeleteButton:u=!1},d)=>{const[h,p]=C.useState(null),[m,x]=C.useState(null),[b,w]=C.useState(null),[v,A]=C.useState(!1),j=C.useRef(null),z=C.useMemo(()=>h?URL.createObjectURL(h):o||null,[h,o]);C.useEffect(()=>{r&&(p(r),x(r.name))},[r]),C.useEffect(()=>()=>{z&&URL.revokeObjectURL(z)},[z]);const S=C.useCallback(async X=>{var ie;const O=(ie=X.target.files)==null?void 0:ie[0];if(O){p(O),x(O.name);try{const T=await p1(O);w(T);const G=Math.max(T.width,T.height);A(G>2e3),console.log(`🖼️ アップロード画像: ${T.width}x${T.height}${G>2e3?" (リサイズ予定)":""}`)}catch(T){console.error("画像サイズ取得エラー:",T),w(null),A(!1)}s(O)}else p(null),x(null),w(null),A(!1),s(null)},[s]),V=C.useCallback(()=>{j.current&&(j.current.value=""),p(null),x(null),w(null),A(!1),s(null)},[s]);return C.useImperativeHandle(d,()=>({reset:()=>{j.current&&(j.current.value=""),p(null),x(null),w(null),A(!1)}})),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:n}),l.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600 border-dashed rounded-md hover:border-indigo-500 transition-colors",children:l.jsxs("div",{className:"space-y-1 text-center",children:[z?l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:z,alt:"プレビュー",className:"mx-auto h-32 w-auto rounded-md object-contain"}),u&&l.jsx("button",{type:"button",onClick:V,className:"absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold transition-colors",title:"画像を削除",children:"×"})]}):l.jsx(Ta,{className:"mx-auto h-12 w-12 text-gray-500"}),l.jsxs("div",{className:"flex text-sm text-gray-500",children:[l.jsxs("label",{htmlFor:`file-upload-${n.replace(/\s/g,"-")}`,className:"relative cursor-pointer bg-gray-700 rounded-md font-medium text-indigo-400 hover:text-indigo-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-800 focus-within:ring-indigo-500 px-3 py-1",children:[l.jsx("span",{children:"ファイルをアップロード"}),l.jsx("input",{id:`file-upload-${n.replace(/\s/g,"-")}`,name:"file-upload",type:"file",className:"sr-only",accept:"image/*",onChange:S,ref:j})]}),l.jsx("p",{className:"pl-1",children:"またはドラッグ＆ドロップ"})]}),m?l.jsxs("div",{className:"text-xs text-gray-400 mt-1 space-y-1",children:[l.jsx("p",{children:m}),b&&l.jsxs("p",{className:"text-xs text-gray-500",children:["サイズ: ",b.width," × ",b.height]}),v&&l.jsx("p",{className:"text-xs text-yellow-400",children:"⚠️ 大きな画像のため、生成時に自動リサイズされます"})]}):l.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF 最大10MB"}),h&&l.jsx("button",{type:"button",onClick:()=>{j.current&&(j.current.value=""),p(null),x(null),w(null),A(!1),s(null)},className:"mt-2 text-xs text-red-400 hover:text-red-300",children:"画像をクリア"})]})})]})}),x1=({isOpen:s,onClose:n,sourceUrl:r,generatedUrl:o,menuName:u})=>s?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[70] p-4",onClick:n,"aria-labelledby":"sample-image-modal-title",role:"dialog","aria-modal":"true",children:l.jsxs("div",{className:"bg-gray-800 p-4 md:p-6 rounded-lg shadow-xl w-full max-w-xl max-h-[90vh] flex flex-col relative",onClick:d=>d.stopPropagation(),children:[l.jsx("button",{onClick:n,className:"absolute top-3 right-3 text-gray-400 hover:text-white bg-gray-700/50 hover:bg-gray-600/80 p-1.5 rounded-full z-10","aria-label":"サンプル画像モーダルを閉じる",children:l.jsx(vt,{className:"w-6 h-6"})}),l.jsxs("h2",{id:"sample-image-modal-title",className:"text-xl font-semibold text-indigo-400 mb-4",children:["「",u||"選択メニュー","」の生成サンプル"]}),l.jsxs("div",{className:"overflow-y-auto space-y-4 custom-scrollbar pr-1",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-medium text-gray-300 mb-2",children:"元画像"}),r?l.jsx("img",{src:r,alt:"サンプル元画像",className:"w-full h-auto max-h-80 object-contain rounded-md bg-gray-700 p-1"}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-40 bg-gray-700 rounded-md text-gray-500",children:[l.jsx(Ta,{className:"w-12 h-12 mb-2"}),l.jsx("p",{children:"元画像のサンプルはありません"})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-medium text-gray-300 mb-2",children:"生成画像"}),o?l.jsx("img",{src:o,alt:"サンプル生成後画像",className:"w-full h-auto max-h-80 object-contain rounded-md bg-gray-700 p-1"}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-40 bg-gray-700 rounded-md text-gray-500",children:[l.jsx(Ta,{className:"w-12 h-12 mb-2"}),l.jsx("p",{children:"生成後画像のサンプルはありません"})]})]})]}),l.jsx("button",{onClick:n,className:"mt-6 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2.5 px-4 rounded-lg transition duration-150 ease-in-out",children:"閉じる"})]})}):null;function qp(s,n){return function(){return s.apply(n,arguments)}}const{toString:y1}=Object.prototype,{getPrototypeOf:Yd}=Object,{iterator:_o,toStringTag:Gp}=Symbol,jo=(s=>n=>{const r=y1.call(n);return s[r]||(s[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),cn=s=>(s=s.toLowerCase(),n=>jo(n)===s),Co=s=>n=>typeof n===s,{isArray:ar}=Array,yi=Co("undefined");function b1(s){return s!==null&&!yi(s)&&s.constructor!==null&&!yi(s.constructor)&&Rt(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const $p=cn("ArrayBuffer");function v1(s){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(s):n=s&&s.buffer&&$p(s.buffer),n}const w1=Co("string"),Rt=Co("function"),Fp=Co("number"),Eo=s=>s!==null&&typeof s=="object",N1=s=>s===!0||s===!1,so=s=>{if(jo(s)!=="object")return!1;const n=Yd(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Gp in s)&&!(_o in s)},S1=cn("Date"),_1=cn("File"),j1=cn("Blob"),C1=cn("FileList"),E1=s=>Eo(s)&&Rt(s.pipe),A1=s=>{let n;return s&&(typeof FormData=="function"&&s instanceof FormData||Rt(s.append)&&((n=jo(s))==="formdata"||n==="object"&&Rt(s.toString)&&s.toString()==="[object FormData]"))},T1=cn("URLSearchParams"),[R1,k1,O1,M1]=["ReadableStream","Request","Response","Headers"].map(cn),I1=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ci(s,n,{allOwnKeys:r=!1}={}){if(s===null||typeof s>"u")return;let o,u;if(typeof s!="object"&&(s=[s]),ar(s))for(o=0,u=s.length;o<u;o++)n.call(null,s[o],o,s);else{const d=r?Object.getOwnPropertyNames(s):Object.keys(s),h=d.length;let p;for(o=0;o<h;o++)p=d[o],n.call(null,s[p],p,s)}}function Yp(s,n){n=n.toLowerCase();const r=Object.keys(s);let o=r.length,u;for(;o-- >0;)if(u=r[o],n===u.toLowerCase())return u;return null}const Wa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Xp=s=>!yi(s)&&s!==Wa;function Ed(){const{caseless:s}=Xp(this)&&this||{},n={},r=(o,u)=>{const d=s&&Yp(n,u)||u;so(n[d])&&so(o)?n[d]=Ed(n[d],o):so(o)?n[d]=Ed({},o):ar(o)?n[d]=o.slice():n[d]=o};for(let o=0,u=arguments.length;o<u;o++)arguments[o]&&Ci(arguments[o],r);return n}const D1=(s,n,r,{allOwnKeys:o}={})=>(Ci(n,(u,d)=>{r&&Rt(u)?s[d]=qp(u,r):s[d]=u},{allOwnKeys:o}),s),U1=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),L1=(s,n,r,o)=>{s.prototype=Object.create(n.prototype,o),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:n.prototype}),r&&Object.assign(s.prototype,r)},z1=(s,n,r,o)=>{let u,d,h;const p={};if(n=n||{},s==null)return n;do{for(u=Object.getOwnPropertyNames(s),d=u.length;d-- >0;)h=u[d],(!o||o(h,s,n))&&!p[h]&&(n[h]=s[h],p[h]=!0);s=r!==!1&&Yd(s)}while(s&&(!r||r(s,n))&&s!==Object.prototype);return n},P1=(s,n,r)=>{s=String(s),(r===void 0||r>s.length)&&(r=s.length),r-=n.length;const o=s.indexOf(n,r);return o!==-1&&o===r},H1=s=>{if(!s)return null;if(ar(s))return s;let n=s.length;if(!Fp(n))return null;const r=new Array(n);for(;n-- >0;)r[n]=s[n];return r},B1=(s=>n=>s&&n instanceof s)(typeof Uint8Array<"u"&&Yd(Uint8Array)),V1=(s,n)=>{const o=(s&&s[_o]).call(s);let u;for(;(u=o.next())&&!u.done;){const d=u.value;n.call(s,d[0],d[1])}},q1=(s,n)=>{let r;const o=[];for(;(r=s.exec(n))!==null;)o.push(r);return o},G1=cn("HTMLFormElement"),$1=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,o,u){return o.toUpperCase()+u}),xg=(({hasOwnProperty:s})=>(n,r)=>s.call(n,r))(Object.prototype),F1=cn("RegExp"),Kp=(s,n)=>{const r=Object.getOwnPropertyDescriptors(s),o={};Ci(r,(u,d)=>{let h;(h=n(u,d,s))!==!1&&(o[d]=h||u)}),Object.defineProperties(s,o)},Y1=s=>{Kp(s,(n,r)=>{if(Rt(s)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const o=s[r];if(Rt(o)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},X1=(s,n)=>{const r={},o=u=>{u.forEach(d=>{r[d]=!0})};return ar(s)?o(s):o(String(s).split(n)),r},K1=()=>{},Z1=(s,n)=>s!=null&&Number.isFinite(s=+s)?s:n;function Q1(s){return!!(s&&Rt(s.append)&&s[Gp]==="FormData"&&s[_o])}const J1=s=>{const n=new Array(10),r=(o,u)=>{if(Eo(o)){if(n.indexOf(o)>=0)return;if(!("toJSON"in o)){n[u]=o;const d=ar(o)?[]:{};return Ci(o,(h,p)=>{const m=r(h,u+1);!yi(m)&&(d[p]=m)}),n[u]=void 0,d}}return o};return r(s,0)},W1=cn("AsyncFunction"),e2=s=>s&&(Eo(s)||Rt(s))&&Rt(s.then)&&Rt(s.catch),Zp=((s,n)=>s?setImmediate:n?((r,o)=>(Wa.addEventListener("message",({source:u,data:d})=>{u===Wa&&d===r&&o.length&&o.shift()()},!1),u=>{o.push(u),Wa.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Rt(Wa.postMessage)),t2=typeof queueMicrotask<"u"?queueMicrotask.bind(Wa):typeof process<"u"&&process.nextTick||Zp,n2=s=>s!=null&&Rt(s[_o]),B={isArray:ar,isArrayBuffer:$p,isBuffer:b1,isFormData:A1,isArrayBufferView:v1,isString:w1,isNumber:Fp,isBoolean:N1,isObject:Eo,isPlainObject:so,isReadableStream:R1,isRequest:k1,isResponse:O1,isHeaders:M1,isUndefined:yi,isDate:S1,isFile:_1,isBlob:j1,isRegExp:F1,isFunction:Rt,isStream:E1,isURLSearchParams:T1,isTypedArray:B1,isFileList:C1,forEach:Ci,merge:Ed,extend:D1,trim:I1,stripBOM:U1,inherits:L1,toFlatObject:z1,kindOf:jo,kindOfTest:cn,endsWith:P1,toArray:H1,forEachEntry:V1,matchAll:q1,isHTMLForm:G1,hasOwnProperty:xg,hasOwnProp:xg,reduceDescriptors:Kp,freezeMethods:Y1,toObjectSet:X1,toCamelCase:$1,noop:K1,toFiniteNumber:Z1,findKey:Yp,global:Wa,isContextDefined:Xp,isSpecCompliantForm:Q1,toJSONObject:J1,isAsyncFn:W1,isThenable:e2,setImmediate:Zp,asap:t2,isIterable:n2};function ye(s,n,r,o,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",n&&(this.code=n),r&&(this.config=r),o&&(this.request=o),u&&(this.response=u,this.status=u.status?u.status:null)}B.inherits(ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}});const Qp=ye.prototype,Jp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{Jp[s]={value:s}});Object.defineProperties(ye,Jp);Object.defineProperty(Qp,"isAxiosError",{value:!0});ye.from=(s,n,r,o,u,d)=>{const h=Object.create(Qp);return B.toFlatObject(s,h,function(m){return m!==Error.prototype},p=>p!=="isAxiosError"),ye.call(h,s.message,n,r,o,u),h.cause=s,h.name=s.name,d&&Object.assign(h,d),h};const a2=null;function Ad(s){return B.isPlainObject(s)||B.isArray(s)}function Wp(s){return B.endsWith(s,"[]")?s.slice(0,-2):s}function yg(s,n,r){return s?s.concat(n).map(function(u,d){return u=Wp(u),!r&&d?"["+u+"]":u}).join(r?".":""):n}function s2(s){return B.isArray(s)&&!s.some(Ad)}const r2=B.toFlatObject(B,{},null,function(n){return/^is[A-Z]/.test(n)});function Ao(s,n,r){if(!B.isObject(s))throw new TypeError("target must be an object");n=n||new FormData,r=B.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(z,S){return!B.isUndefined(S[z])});const o=r.metaTokens,u=r.visitor||b,d=r.dots,h=r.indexes,m=(r.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(n);if(!B.isFunction(u))throw new TypeError("visitor must be a function");function x(j){if(j===null)return"";if(B.isDate(j))return j.toISOString();if(B.isBoolean(j))return j.toString();if(!m&&B.isBlob(j))throw new ye("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(j)||B.isTypedArray(j)?m&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function b(j,z,S){let V=j;if(j&&!S&&typeof j=="object"){if(B.endsWith(z,"{}"))z=o?z:z.slice(0,-2),j=JSON.stringify(j);else if(B.isArray(j)&&s2(j)||(B.isFileList(j)||B.endsWith(z,"[]"))&&(V=B.toArray(j)))return z=Wp(z),V.forEach(function(O,ie){!(B.isUndefined(O)||O===null)&&n.append(h===!0?yg([z],ie,d):h===null?z:z+"[]",x(O))}),!1}return Ad(j)?!0:(n.append(yg(S,z,d),x(j)),!1)}const w=[],v=Object.assign(r2,{defaultVisitor:b,convertValue:x,isVisitable:Ad});function A(j,z){if(!B.isUndefined(j)){if(w.indexOf(j)!==-1)throw Error("Circular reference detected in "+z.join("."));w.push(j),B.forEach(j,function(V,X){(!(B.isUndefined(V)||V===null)&&u.call(n,V,B.isString(X)?X.trim():X,z,v))===!0&&A(V,z?z.concat(X):[X])}),w.pop()}}if(!B.isObject(s))throw new TypeError("data must be an object");return A(s),n}function bg(s){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(o){return n[o]})}function Xd(s,n){this._pairs=[],s&&Ao(s,this,n)}const ex=Xd.prototype;ex.append=function(n,r){this._pairs.push([n,r])};ex.toString=function(n){const r=n?function(o){return n.call(this,o,bg)}:bg;return this._pairs.map(function(u){return r(u[0])+"="+r(u[1])},"").join("&")};function i2(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function tx(s,n,r){if(!n)return s;const o=r&&r.encode||i2;B.isFunction(r)&&(r={serialize:r});const u=r&&r.serialize;let d;if(u?d=u(n,r):d=B.isURLSearchParams(n)?n.toString():new Xd(n,r).toString(o),d){const h=s.indexOf("#");h!==-1&&(s=s.slice(0,h)),s+=(s.indexOf("?")===-1?"?":"&")+d}return s}class vg{constructor(){this.handlers=[]}use(n,r,o){return this.handlers.push({fulfilled:n,rejected:r,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){B.forEach(this.handlers,function(o){o!==null&&n(o)})}}const nx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},l2=typeof URLSearchParams<"u"?URLSearchParams:Xd,o2=typeof FormData<"u"?FormData:null,c2=typeof Blob<"u"?Blob:null,u2={isBrowser:!0,classes:{URLSearchParams:l2,FormData:o2,Blob:c2},protocols:["http","https","file","blob","url","data"]},Kd=typeof window<"u"&&typeof document<"u",Td=typeof navigator=="object"&&navigator||void 0,d2=Kd&&(!Td||["ReactNative","NativeScript","NS"].indexOf(Td.product)<0),f2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",h2=Kd&&window.location.href||"http://localhost",m2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Kd,hasStandardBrowserEnv:d2,hasStandardBrowserWebWorkerEnv:f2,navigator:Td,origin:h2},Symbol.toStringTag,{value:"Module"})),bt={...m2,...u2};function g2(s,n){return Ao(s,new bt.classes.URLSearchParams,Object.assign({visitor:function(r,o,u,d){return bt.isNode&&B.isBuffer(r)?(this.append(o,r.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},n))}function p2(s){return B.matchAll(/\w+|\[(\w*)]/g,s).map(n=>n[0]==="[]"?"":n[1]||n[0])}function x2(s){const n={},r=Object.keys(s);let o;const u=r.length;let d;for(o=0;o<u;o++)d=r[o],n[d]=s[d];return n}function ax(s){function n(r,o,u,d){let h=r[d++];if(h==="__proto__")return!0;const p=Number.isFinite(+h),m=d>=r.length;return h=!h&&B.isArray(u)?u.length:h,m?(B.hasOwnProp(u,h)?u[h]=[u[h],o]:u[h]=o,!p):((!u[h]||!B.isObject(u[h]))&&(u[h]=[]),n(r,o,u[h],d)&&B.isArray(u[h])&&(u[h]=x2(u[h])),!p)}if(B.isFormData(s)&&B.isFunction(s.entries)){const r={};return B.forEachEntry(s,(o,u)=>{n(p2(o),u,r,0)}),r}return null}function y2(s,n,r){if(B.isString(s))try{return(n||JSON.parse)(s),B.trim(s)}catch(o){if(o.name!=="SyntaxError")throw o}return(r||JSON.stringify)(s)}const Ei={transitional:nx,adapter:["xhr","http","fetch"],transformRequest:[function(n,r){const o=r.getContentType()||"",u=o.indexOf("application/json")>-1,d=B.isObject(n);if(d&&B.isHTMLForm(n)&&(n=new FormData(n)),B.isFormData(n))return u?JSON.stringify(ax(n)):n;if(B.isArrayBuffer(n)||B.isBuffer(n)||B.isStream(n)||B.isFile(n)||B.isBlob(n)||B.isReadableStream(n))return n;if(B.isArrayBufferView(n))return n.buffer;if(B.isURLSearchParams(n))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let p;if(d){if(o.indexOf("application/x-www-form-urlencoded")>-1)return g2(n,this.formSerializer).toString();if((p=B.isFileList(n))||o.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Ao(p?{"files[]":n}:n,m&&new m,this.formSerializer)}}return d||u?(r.setContentType("application/json",!1),y2(n)):n}],transformResponse:[function(n){const r=this.transitional||Ei.transitional,o=r&&r.forcedJSONParsing,u=this.responseType==="json";if(B.isResponse(n)||B.isReadableStream(n))return n;if(n&&B.isString(n)&&(o&&!this.responseType||u)){const h=!(r&&r.silentJSONParsing)&&u;try{return JSON.parse(n)}catch(p){if(h)throw p.name==="SyntaxError"?ye.from(p,ye.ERR_BAD_RESPONSE,this,null,this.response):p}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:bt.classes.FormData,Blob:bt.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],s=>{Ei.headers[s]={}});const b2=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),v2=s=>{const n={};let r,o,u;return s&&s.split(`
`).forEach(function(h){u=h.indexOf(":"),r=h.substring(0,u).trim().toLowerCase(),o=h.substring(u+1).trim(),!(!r||n[r]&&b2[r])&&(r==="set-cookie"?n[r]?n[r].push(o):n[r]=[o]:n[r]=n[r]?n[r]+", "+o:o)}),n},wg=Symbol("internals");function li(s){return s&&String(s).trim().toLowerCase()}function ro(s){return s===!1||s==null?s:B.isArray(s)?s.map(ro):String(s)}function w2(s){const n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=r.exec(s);)n[o[1]]=o[2];return n}const N2=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function id(s,n,r,o,u){if(B.isFunction(o))return o.call(this,n,r);if(u&&(n=r),!!B.isString(n)){if(B.isString(o))return n.indexOf(o)!==-1;if(B.isRegExp(o))return o.test(n)}}function S2(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,r,o)=>r.toUpperCase()+o)}function _2(s,n){const r=B.toCamelCase(" "+n);["get","set","has"].forEach(o=>{Object.defineProperty(s,o+r,{value:function(u,d,h){return this[o].call(this,n,u,d,h)},configurable:!0})})}let kt=class{constructor(n){n&&this.set(n)}set(n,r,o){const u=this;function d(p,m,x){const b=li(m);if(!b)throw new Error("header name must be a non-empty string");const w=B.findKey(u,b);(!w||u[w]===void 0||x===!0||x===void 0&&u[w]!==!1)&&(u[w||m]=ro(p))}const h=(p,m)=>B.forEach(p,(x,b)=>d(x,b,m));if(B.isPlainObject(n)||n instanceof this.constructor)h(n,r);else if(B.isString(n)&&(n=n.trim())&&!N2(n))h(v2(n),r);else if(B.isObject(n)&&B.isIterable(n)){let p={},m,x;for(const b of n){if(!B.isArray(b))throw TypeError("Object iterator must return a key-value pair");p[x=b[0]]=(m=p[x])?B.isArray(m)?[...m,b[1]]:[m,b[1]]:b[1]}h(p,r)}else n!=null&&d(r,n,o);return this}get(n,r){if(n=li(n),n){const o=B.findKey(this,n);if(o){const u=this[o];if(!r)return u;if(r===!0)return w2(u);if(B.isFunction(r))return r.call(this,u,o);if(B.isRegExp(r))return r.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,r){if(n=li(n),n){const o=B.findKey(this,n);return!!(o&&this[o]!==void 0&&(!r||id(this,this[o],o,r)))}return!1}delete(n,r){const o=this;let u=!1;function d(h){if(h=li(h),h){const p=B.findKey(o,h);p&&(!r||id(o,o[p],p,r))&&(delete o[p],u=!0)}}return B.isArray(n)?n.forEach(d):d(n),u}clear(n){const r=Object.keys(this);let o=r.length,u=!1;for(;o--;){const d=r[o];(!n||id(this,this[d],d,n,!0))&&(delete this[d],u=!0)}return u}normalize(n){const r=this,o={};return B.forEach(this,(u,d)=>{const h=B.findKey(o,d);if(h){r[h]=ro(u),delete r[d];return}const p=n?S2(d):String(d).trim();p!==d&&delete r[d],r[p]=ro(u),o[p]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const r=Object.create(null);return B.forEach(this,(o,u)=>{o!=null&&o!==!1&&(r[u]=n&&B.isArray(o)?o.join(", "):o)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,r])=>n+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...r){const o=new this(n);return r.forEach(u=>o.set(u)),o}static accessor(n){const o=(this[wg]=this[wg]={accessors:{}}).accessors,u=this.prototype;function d(h){const p=li(h);o[p]||(_2(u,h),o[p]=!0)}return B.isArray(n)?n.forEach(d):d(n),this}};kt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(kt.prototype,({value:s},n)=>{let r=n[0].toUpperCase()+n.slice(1);return{get:()=>s,set(o){this[r]=o}}});B.freezeMethods(kt);function ld(s,n){const r=this||Ei,o=n||r,u=kt.from(o.headers);let d=o.data;return B.forEach(s,function(p){d=p.call(r,d,u.normalize(),n?n.status:void 0)}),u.normalize(),d}function sx(s){return!!(s&&s.__CANCEL__)}function sr(s,n,r){ye.call(this,s??"canceled",ye.ERR_CANCELED,n,r),this.name="CanceledError"}B.inherits(sr,ye,{__CANCEL__:!0});function rx(s,n,r){const o=r.config.validateStatus;!r.status||!o||o(r.status)?s(r):n(new ye("Request failed with status code "+r.status,[ye.ERR_BAD_REQUEST,ye.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function j2(s){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return n&&n[1]||""}function C2(s,n){s=s||10;const r=new Array(s),o=new Array(s);let u=0,d=0,h;return n=n!==void 0?n:1e3,function(m){const x=Date.now(),b=o[d];h||(h=x),r[u]=m,o[u]=x;let w=d,v=0;for(;w!==u;)v+=r[w++],w=w%s;if(u=(u+1)%s,u===d&&(d=(d+1)%s),x-h<n)return;const A=b&&x-b;return A?Math.round(v*1e3/A):void 0}}function E2(s,n){let r=0,o=1e3/n,u,d;const h=(x,b=Date.now())=>{r=b,u=null,d&&(clearTimeout(d),d=null),s.apply(null,x)};return[(...x)=>{const b=Date.now(),w=b-r;w>=o?h(x,b):(u=x,d||(d=setTimeout(()=>{d=null,h(u)},o-w)))},()=>u&&h(u)]}const ho=(s,n,r=3)=>{let o=0;const u=C2(50,250);return E2(d=>{const h=d.loaded,p=d.lengthComputable?d.total:void 0,m=h-o,x=u(m),b=h<=p;o=h;const w={loaded:h,total:p,progress:p?h/p:void 0,bytes:m,rate:x||void 0,estimated:x&&p&&b?(p-h)/x:void 0,event:d,lengthComputable:p!=null,[n?"download":"upload"]:!0};s(w)},r)},Ng=(s,n)=>{const r=s!=null;return[o=>n[0]({lengthComputable:r,total:s,loaded:o}),n[1]]},Sg=s=>(...n)=>B.asap(()=>s(...n)),A2=bt.hasStandardBrowserEnv?((s,n)=>r=>(r=new URL(r,bt.origin),s.protocol===r.protocol&&s.host===r.host&&(n||s.port===r.port)))(new URL(bt.origin),bt.navigator&&/(msie|trident)/i.test(bt.navigator.userAgent)):()=>!0,T2=bt.hasStandardBrowserEnv?{write(s,n,r,o,u,d){const h=[s+"="+encodeURIComponent(n)];B.isNumber(r)&&h.push("expires="+new Date(r).toGMTString()),B.isString(o)&&h.push("path="+o),B.isString(u)&&h.push("domain="+u),d===!0&&h.push("secure"),document.cookie=h.join("; ")},read(s){const n=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function R2(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function k2(s,n){return n?s.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):s}function ix(s,n,r){let o=!R2(n);return s&&(o||r==!1)?k2(s,n):n}const _g=s=>s instanceof kt?{...s}:s;function ns(s,n){n=n||{};const r={};function o(x,b,w,v){return B.isPlainObject(x)&&B.isPlainObject(b)?B.merge.call({caseless:v},x,b):B.isPlainObject(b)?B.merge({},b):B.isArray(b)?b.slice():b}function u(x,b,w,v){if(B.isUndefined(b)){if(!B.isUndefined(x))return o(void 0,x,w,v)}else return o(x,b,w,v)}function d(x,b){if(!B.isUndefined(b))return o(void 0,b)}function h(x,b){if(B.isUndefined(b)){if(!B.isUndefined(x))return o(void 0,x)}else return o(void 0,b)}function p(x,b,w){if(w in n)return o(x,b);if(w in s)return o(void 0,x)}const m={url:d,method:d,data:d,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:p,headers:(x,b,w)=>u(_g(x),_g(b),w,!0)};return B.forEach(Object.keys(Object.assign({},s,n)),function(b){const w=m[b]||u,v=w(s[b],n[b],b);B.isUndefined(v)&&w!==p||(r[b]=v)}),r}const lx=s=>{const n=ns({},s);let{data:r,withXSRFToken:o,xsrfHeaderName:u,xsrfCookieName:d,headers:h,auth:p}=n;n.headers=h=kt.from(h),n.url=tx(ix(n.baseURL,n.url,n.allowAbsoluteUrls),s.params,s.paramsSerializer),p&&h.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):"")));let m;if(B.isFormData(r)){if(bt.hasStandardBrowserEnv||bt.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if((m=h.getContentType())!==!1){const[x,...b]=m?m.split(";").map(w=>w.trim()).filter(Boolean):[];h.setContentType([x||"multipart/form-data",...b].join("; "))}}if(bt.hasStandardBrowserEnv&&(o&&B.isFunction(o)&&(o=o(n)),o||o!==!1&&A2(n.url))){const x=u&&d&&T2.read(d);x&&h.set(u,x)}return n},O2=typeof XMLHttpRequest<"u",M2=O2&&function(s){return new Promise(function(r,o){const u=lx(s);let d=u.data;const h=kt.from(u.headers).normalize();let{responseType:p,onUploadProgress:m,onDownloadProgress:x}=u,b,w,v,A,j;function z(){A&&A(),j&&j(),u.cancelToken&&u.cancelToken.unsubscribe(b),u.signal&&u.signal.removeEventListener("abort",b)}let S=new XMLHttpRequest;S.open(u.method.toUpperCase(),u.url,!0),S.timeout=u.timeout;function V(){if(!S)return;const O=kt.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),T={data:!p||p==="text"||p==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:O,config:s,request:S};rx(function(re){r(re),z()},function(re){o(re),z()},T),S=null}"onloadend"in S?S.onloadend=V:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(V)},S.onabort=function(){S&&(o(new ye("Request aborted",ye.ECONNABORTED,s,S)),S=null)},S.onerror=function(){o(new ye("Network Error",ye.ERR_NETWORK,s,S)),S=null},S.ontimeout=function(){let ie=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded";const T=u.transitional||nx;u.timeoutErrorMessage&&(ie=u.timeoutErrorMessage),o(new ye(ie,T.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,s,S)),S=null},d===void 0&&h.setContentType(null),"setRequestHeader"in S&&B.forEach(h.toJSON(),function(ie,T){S.setRequestHeader(T,ie)}),B.isUndefined(u.withCredentials)||(S.withCredentials=!!u.withCredentials),p&&p!=="json"&&(S.responseType=u.responseType),x&&([v,j]=ho(x,!0),S.addEventListener("progress",v)),m&&S.upload&&([w,A]=ho(m),S.upload.addEventListener("progress",w),S.upload.addEventListener("loadend",A)),(u.cancelToken||u.signal)&&(b=O=>{S&&(o(!O||O.type?new sr(null,s,S):O),S.abort(),S=null)},u.cancelToken&&u.cancelToken.subscribe(b),u.signal&&(u.signal.aborted?b():u.signal.addEventListener("abort",b)));const X=j2(u.url);if(X&&bt.protocols.indexOf(X)===-1){o(new ye("Unsupported protocol "+X+":",ye.ERR_BAD_REQUEST,s));return}S.send(d||null)})},I2=(s,n)=>{const{length:r}=s=s?s.filter(Boolean):[];if(n||r){let o=new AbortController,u;const d=function(x){if(!u){u=!0,p();const b=x instanceof Error?x:this.reason;o.abort(b instanceof ye?b:new sr(b instanceof Error?b.message:b))}};let h=n&&setTimeout(()=>{h=null,d(new ye(`timeout ${n} of ms exceeded`,ye.ETIMEDOUT))},n);const p=()=>{s&&(h&&clearTimeout(h),h=null,s.forEach(x=>{x.unsubscribe?x.unsubscribe(d):x.removeEventListener("abort",d)}),s=null)};s.forEach(x=>x.addEventListener("abort",d));const{signal:m}=o;return m.unsubscribe=()=>B.asap(p),m}},D2=function*(s,n){let r=s.byteLength;if(r<n){yield s;return}let o=0,u;for(;o<r;)u=o+n,yield s.slice(o,u),o=u},U2=async function*(s,n){for await(const r of L2(s))yield*D2(r,n)},L2=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const n=s.getReader();try{for(;;){const{done:r,value:o}=await n.read();if(r)break;yield o}}finally{await n.cancel()}},jg=(s,n,r,o)=>{const u=U2(s,n);let d=0,h,p=m=>{h||(h=!0,o&&o(m))};return new ReadableStream({async pull(m){try{const{done:x,value:b}=await u.next();if(x){p(),m.close();return}let w=b.byteLength;if(r){let v=d+=w;r(v)}m.enqueue(new Uint8Array(b))}catch(x){throw p(x),x}},cancel(m){return p(m),u.return()}},{highWaterMark:2})},To=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ox=To&&typeof ReadableStream=="function",z2=To&&(typeof TextEncoder=="function"?(s=>n=>s.encode(n))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),cx=(s,...n)=>{try{return!!s(...n)}catch{return!1}},P2=ox&&cx(()=>{let s=!1;const n=new Request(bt.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!n}),Cg=64*1024,Rd=ox&&cx(()=>B.isReadableStream(new Response("").body)),mo={stream:Rd&&(s=>s.body)};To&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!mo[n]&&(mo[n]=B.isFunction(s[n])?r=>r[n]():(r,o)=>{throw new ye(`Response type '${n}' is not supported`,ye.ERR_NOT_SUPPORT,o)})})})(new Response);const H2=async s=>{if(s==null)return 0;if(B.isBlob(s))return s.size;if(B.isSpecCompliantForm(s))return(await new Request(bt.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(B.isArrayBufferView(s)||B.isArrayBuffer(s))return s.byteLength;if(B.isURLSearchParams(s)&&(s=s+""),B.isString(s))return(await z2(s)).byteLength},B2=async(s,n)=>{const r=B.toFiniteNumber(s.getContentLength());return r??H2(n)},V2=To&&(async s=>{let{url:n,method:r,data:o,signal:u,cancelToken:d,timeout:h,onDownloadProgress:p,onUploadProgress:m,responseType:x,headers:b,withCredentials:w="same-origin",fetchOptions:v}=lx(s);x=x?(x+"").toLowerCase():"text";let A=I2([u,d&&d.toAbortSignal()],h),j;const z=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let S;try{if(m&&P2&&r!=="get"&&r!=="head"&&(S=await B2(b,o))!==0){let T=new Request(n,{method:"POST",body:o,duplex:"half"}),G;if(B.isFormData(o)&&(G=T.headers.get("content-type"))&&b.setContentType(G),T.body){const[re,le]=Ng(S,ho(Sg(m)));o=jg(T.body,Cg,re,le)}}B.isString(w)||(w=w?"include":"omit");const V="credentials"in Request.prototype;j=new Request(n,{...v,signal:A,method:r.toUpperCase(),headers:b.normalize().toJSON(),body:o,duplex:"half",credentials:V?w:void 0});let X=await fetch(j,v);const O=Rd&&(x==="stream"||x==="response");if(Rd&&(p||O&&z)){const T={};["status","statusText","headers"].forEach(ee=>{T[ee]=X[ee]});const G=B.toFiniteNumber(X.headers.get("content-length")),[re,le]=p&&Ng(G,ho(Sg(p),!0))||[];X=new Response(jg(X.body,Cg,re,()=>{le&&le(),z&&z()}),T)}x=x||"text";let ie=await mo[B.findKey(mo,x)||"text"](X,s);return!O&&z&&z(),await new Promise((T,G)=>{rx(T,G,{data:ie,headers:kt.from(X.headers),status:X.status,statusText:X.statusText,config:s,request:j})})}catch(V){throw z&&z(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new ye("Network Error",ye.ERR_NETWORK,s,j),{cause:V.cause||V}):ye.from(V,V&&V.code,s,j)}}),kd={http:a2,xhr:M2,fetch:V2};B.forEach(kd,(s,n)=>{if(s){try{Object.defineProperty(s,"name",{value:n})}catch{}Object.defineProperty(s,"adapterName",{value:n})}});const Eg=s=>`- ${s}`,q2=s=>B.isFunction(s)||s===null||s===!1,ux={getAdapter:s=>{s=B.isArray(s)?s:[s];const{length:n}=s;let r,o;const u={};for(let d=0;d<n;d++){r=s[d];let h;if(o=r,!q2(r)&&(o=kd[(h=String(r)).toLowerCase()],o===void 0))throw new ye(`Unknown adapter '${h}'`);if(o)break;u[h||"#"+d]=o}if(!o){const d=Object.entries(u).map(([p,m])=>`adapter ${p} `+(m===!1?"is not supported by the environment":"is not available in the build"));let h=n?d.length>1?`since :
`+d.map(Eg).join(`
`):" "+Eg(d[0]):"as no adapter specified";throw new ye("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return o},adapters:kd};function od(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new sr(null,s)}function Ag(s){return od(s),s.headers=kt.from(s.headers),s.data=ld.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),ux.getAdapter(s.adapter||Ei.adapter)(s).then(function(o){return od(s),o.data=ld.call(s,s.transformResponse,o),o.headers=kt.from(o.headers),o},function(o){return sx(o)||(od(s),o&&o.response&&(o.response.data=ld.call(s,s.transformResponse,o.response),o.response.headers=kt.from(o.response.headers))),Promise.reject(o)})}const dx="1.10.0",Ro={};["object","boolean","number","function","string","symbol"].forEach((s,n)=>{Ro[s]=function(o){return typeof o===s||"a"+(n<1?"n ":" ")+s}});const Tg={};Ro.transitional=function(n,r,o){function u(d,h){return"[Axios v"+dx+"] Transitional option '"+d+"'"+h+(o?". "+o:"")}return(d,h,p)=>{if(n===!1)throw new ye(u(h," has been removed"+(r?" in "+r:"")),ye.ERR_DEPRECATED);return r&&!Tg[h]&&(Tg[h]=!0,console.warn(u(h," has been deprecated since v"+r+" and will be removed in the near future"))),n?n(d,h,p):!0}};Ro.spelling=function(n){return(r,o)=>(console.warn(`${o} is likely a misspelling of ${n}`),!0)};function G2(s,n,r){if(typeof s!="object")throw new ye("options must be an object",ye.ERR_BAD_OPTION_VALUE);const o=Object.keys(s);let u=o.length;for(;u-- >0;){const d=o[u],h=n[d];if(h){const p=s[d],m=p===void 0||h(p,d,s);if(m!==!0)throw new ye("option "+d+" must be "+m,ye.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ye("Unknown option "+d,ye.ERR_BAD_OPTION)}}const io={assertOptions:G2,validators:Ro},xn=io.validators;let ts=class{constructor(n){this.defaults=n||{},this.interceptors={request:new vg,response:new vg}}async request(n,r){try{return await this._request(n,r)}catch(o){if(o instanceof Error){let u={};Error.captureStackTrace?Error.captureStackTrace(u):u=new Error;const d=u.stack?u.stack.replace(/^.+\n/,""):"";try{o.stack?d&&!String(o.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+d):o.stack=d}catch{}}throw o}}_request(n,r){typeof n=="string"?(r=r||{},r.url=n):r=n||{},r=ns(this.defaults,r);const{transitional:o,paramsSerializer:u,headers:d}=r;o!==void 0&&io.assertOptions(o,{silentJSONParsing:xn.transitional(xn.boolean),forcedJSONParsing:xn.transitional(xn.boolean),clarifyTimeoutError:xn.transitional(xn.boolean)},!1),u!=null&&(B.isFunction(u)?r.paramsSerializer={serialize:u}:io.assertOptions(u,{encode:xn.function,serialize:xn.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),io.assertOptions(r,{baseUrl:xn.spelling("baseURL"),withXsrfToken:xn.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let h=d&&B.merge(d.common,d[r.method]);d&&B.forEach(["delete","get","head","post","put","patch","common"],j=>{delete d[j]}),r.headers=kt.concat(h,d);const p=[];let m=!0;this.interceptors.request.forEach(function(z){typeof z.runWhen=="function"&&z.runWhen(r)===!1||(m=m&&z.synchronous,p.unshift(z.fulfilled,z.rejected))});const x=[];this.interceptors.response.forEach(function(z){x.push(z.fulfilled,z.rejected)});let b,w=0,v;if(!m){const j=[Ag.bind(this),void 0];for(j.unshift.apply(j,p),j.push.apply(j,x),v=j.length,b=Promise.resolve(r);w<v;)b=b.then(j[w++],j[w++]);return b}v=p.length;let A=r;for(w=0;w<v;){const j=p[w++],z=p[w++];try{A=j(A)}catch(S){z.call(this,S);break}}try{b=Ag.call(this,A)}catch(j){return Promise.reject(j)}for(w=0,v=x.length;w<v;)b=b.then(x[w++],x[w++]);return b}getUri(n){n=ns(this.defaults,n);const r=ix(n.baseURL,n.url,n.allowAbsoluteUrls);return tx(r,n.params,n.paramsSerializer)}};B.forEach(["delete","get","head","options"],function(n){ts.prototype[n]=function(r,o){return this.request(ns(o||{},{method:n,url:r,data:(o||{}).data}))}});B.forEach(["post","put","patch"],function(n){function r(o){return function(d,h,p){return this.request(ns(p||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:d,data:h}))}}ts.prototype[n]=r(),ts.prototype[n+"Form"]=r(!0)});let $2=class fx{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(d){r=d});const o=this;this.promise.then(u=>{if(!o._listeners)return;let d=o._listeners.length;for(;d-- >0;)o._listeners[d](u);o._listeners=null}),this.promise.then=u=>{let d;const h=new Promise(p=>{o.subscribe(p),d=p}).then(u);return h.cancel=function(){o.unsubscribe(d)},h},n(function(d,h,p){o.reason||(o.reason=new sr(d,h,p),r(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const n=new AbortController,r=o=>{n.abort(o)};return this.subscribe(r),n.signal.unsubscribe=()=>this.unsubscribe(r),n.signal}static source(){let n;return{token:new fx(function(u){n=u}),cancel:n}}};function F2(s){return function(r){return s.apply(null,r)}}function Y2(s){return B.isObject(s)&&s.isAxiosError===!0}const Od={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Od).forEach(([s,n])=>{Od[n]=s});function hx(s){const n=new ts(s),r=qp(ts.prototype.request,n);return B.extend(r,ts.prototype,n,{allOwnKeys:!0}),B.extend(r,n,null,{allOwnKeys:!0}),r.create=function(u){return hx(ns(s,u))},r}const pe=hx(Ei);pe.Axios=ts;pe.CanceledError=sr;pe.CancelToken=$2;pe.isCancel=sx;pe.VERSION=dx;pe.toFormData=Ao;pe.AxiosError=ye;pe.Cancel=pe.CanceledError;pe.all=function(n){return Promise.all(n)};pe.spread=F2;pe.isAxiosError=Y2;pe.mergeConfig=ns;pe.AxiosHeaders=kt;pe.formToJSON=s=>ax(B.isHTMLForm(s)?new FormData(s):s);pe.getAdapter=ux.getAdapter;pe.HttpStatusCode=Od;pe.default=pe;const{Axios:Qj,AxiosError:Jj,CanceledError:Wj,isCancel:e3,CancelToken:t3,VERSION:n3,all:a3,Cancel:s3,isAxiosError:r3,spread:i3,toFormData:l3,AxiosHeaders:o3,HttpStatusCode:c3,formToJSON:u3,getAdapter:d3,mergeConfig:f3}=pe;function mx(s){return s.replace(/([A-Z])/g,"_$1").toLowerCase()}function qn(s){return Array.isArray(s)?s.map(qn):s!==null&&typeof s=="object"?Object.fromEntries(Object.entries(s).map(([n,r])=>[mx(n),qn(r)])):s}function nt(s){return Array.isArray(s)?s.map(nt):s!==null&&typeof s=="object"?Object.fromEntries(Object.entries(s).map(([n,r])=>[n.replace(/_([a-z])/g,(o,u)=>u.toUpperCase()),nt(r)])):s}const ko="https://aisha-backend-584412696241.asia-northeast1.run.app/api/categories",X2=async s=>{try{const n=await pe.get(ko);return nt(n.data)}catch(n){return console.error("カテゴリ取得失敗",n),s==null||s(n),[]}},K2=async(s,n)=>{try{const r=await pe.post(`${ko}/`,qn(s));return nt(r.data)}catch(r){return console.error("カテゴリ作成失敗",r),n==null||n(r),null}},Z2=async(s,n)=>{try{const r=await pe.put(`${ko}/${s.id}/`,qn(s));return nt(r.data)}catch(r){return console.error("カテゴリ更新失敗",r),n==null||n(r),null}},Q2=async(s,n)=>{try{return await pe.delete(`${ko}/${s}/`),!0}catch(r){return console.error("カテゴリ削除失敗",r),n==null||n(r),!1}},gx=C.createContext(void 0),J2=({children:s})=>{const[n,r]=C.useState(null),[o,u]=C.useState(null),d=(p,m)=>{r(m),u(p)},h=()=>{r(null),u(null)};return l.jsx(gx.Provider,{value:{toastMessage:n,toastType:o,showToast:d,clearToast:h},children:s})},wn=()=>{const s=C.useContext(gx);if(!s)throw new Error("useToast must be used within a ToastProvider");return s},Zd=C.createContext(null),px=()=>{const s=C.useContext(Zd);if(!s)throw new Error("useCategories must be used within CategoriesProvider");return s.categories},W2=()=>{const s=C.useContext(Zd);if(!s)throw new Error("useCategoriesActions must be used within CategoriesProvider");return{refreshCategories:s.refresh}},ew=({children:s})=>{const[n,r]=C.useState([]),{showToast:o}=wn(),u=()=>{X2(()=>{o("error","カテゴリの取得に失敗しました")}).then(r).catch(()=>{r([])})};return C.useEffect(()=>{u()},[]),l.jsx(Zd.Provider,{value:{categories:n,refresh:u},children:s})},Oo="https://aisha-backend-584412696241.asia-northeast1.run.app/api/menus",tw=async s=>{try{const n=await pe.get(Oo);return nt(n.data)}catch(n){return console.error("メニュー取得失敗",n),s==null||s(n),[]}},nw=async(s,n)=>{try{const r=await pe.post(`${Oo}/`,qn(s));return nt(r.data)}catch(r){return console.error("メニュー作成失敗",r),n==null||n(r),null}},aw=async(s,n)=>{try{const r=await pe.put(`${Oo}/${s.id}/`,qn(s));return nt(r.data)}catch(r){return console.error("メニュー更新失敗",r),n==null||n(r),null}},sw=async(s,n)=>{try{return await pe.delete(`${Oo}/${s}/`),!0}catch(r){return console.error("メニュー削除失敗",r),n==null||n(r),!1}},Qd=C.createContext(null),Jd=()=>{const s=C.useContext(Qd);if(!s)throw new Error("useMenus must be used within MenusProvider");return s.menus},rw=()=>{const s=C.useContext(Qd);if(!s)throw new Error("useMenusActions must be used within MenusProvider");return{refreshMenus:s.refresh}},iw=({children:s})=>{const[n,r]=C.useState([]),{showToast:o}=wn(),u=()=>{tw(()=>{o("error","メニューの取得に失敗しました")}).then(r).catch(()=>{r([])})};return C.useEffect(()=>{u()},[]),l.jsx(Qd.Provider,{value:{menus:n,refresh:u},children:s})},bi="https://aisha-backend-584412696241.asia-northeast1.run.app/api",lw=async(s,n)=>{console.log("🌐 fetchCredits called with:",{userId:s,API_BASE:bi});try{const r=`${bi}/users/${s}/credits/`;console.log("📡 Making API call to:",r);const o=await pe.get(r);console.log("✅ API response status:",o.status),console.log("📊 API response data:",o.data);const u=nt(o.data);console.log("🔄 Converted data:",u);const d={credits:u.creditBalance};return console.log("💎 Final result:",d),d}catch(r){return console.error("💥 クレジット取得失敗",r),n==null||n(r),null}},Md=async(s,n)=>{try{const r=await pe.post(`${bi}/consume/`,qn(s));return nt(r.data)}catch(r){return console.error("クレジット消費失敗",r),n==null||n(r),null}},ow=async(s,n=20,r=0,o)=>{console.log("🌐 fetchPaymentHistory called with:",{userId:s,limit:n,offset:r,API_BASE:bi});try{const u=`${bi}/users/${s}/charge-history/?limit=${n}&offset=${r}`;console.log("📡 Making API call to:",u);const d=await pe.get(u);console.log("✅ API response status:",d.status),console.log("📊 API response data:",d.data);const h=nt(d.data);return console.log("🔄 Converted data:",h),h}catch(u){return console.error("💥 決済履歴取得失敗",u),o==null||o(u),null}},Wd=C.createContext(null),rr=()=>{const s=C.useContext(Wd);if(!s)throw new Error("useCredits must be used within CreditsProvider");return s.credits},xx=()=>{const s=C.useContext(Wd);if(!s)throw new Error("useCreditsActions must be used within CreditsProvider");return{refreshCredits:s.refresh}},cw=({children:s})=>{const[n,r]=C.useState(0),{showToast:o}=wn(),u=d=>{if(console.log("🔍 CreditsContext.load called with userId:",d),!d){console.warn("userId is not available for credits fetch"),r(0);return}lw(d,()=>{o("error","クレジットの取得に失敗しました")}).then(h=>{console.log("💰 Credits API response:",h),r((h==null?void 0:h.credits)??0)}).catch(h=>{console.error("💥 Credits fetch error:",h),r(0)})};return l.jsx(Wd.Provider,{value:{credits:n,refresh:u},children:s})},uw=({onGenerateClick:s,isGenerating:n,formData:r,setFormData:o})=>{var G,re,le,ee,ae;const u=px(),d=Jd(),h=rr(),p=C.useRef(null),[m,x]=C.useState(!1);C.useEffect(()=>{let K=null;if(r.category||(K=u&&0<u.length?u[0]:null,o(q=>({...q,category:K}))),!r.menu){const q=K&&d?d.find(U=>U.categoryId===K.id)??null:null;o(U=>({...U,menu:q}))}},[]);const b=K=>{o(q=>({...q,category:u.find(U=>U.id===K)??null,menu:d.find(U=>U.categoryId===K)??null,promptVariables:[]}))},w=K=>{o(q=>({...q,menu:d.find(U=>U.id===K)??null,promptVariables:[]}))},v=C.useCallback(K=>{o(q=>({...q,image:K}))},[]),A=C.useCallback(K=>{o(q=>({...q,additionalPromptForMyCar:K}))},[]),j=C.useCallback(K=>{o(q=>({...q,additionalPromptForOthers:K}))},[]),z=C.useCallback(K=>{o(q=>({...q,aspectRatio:K}))},[]),S=(K,q)=>{o(U=>{const te=U.promptVariables.some(ne=>ne.key===K)?U.promptVariables.map(ne=>ne.key===K?{...ne,value:q}:ne):[...U.promptVariables,{key:K,value:q}];return{...U,promptVariables:te}})},V=K=>{o(q=>({...q,inputType:K}))},X=((G=r.menu)==null?void 0:G.credit)??0,O=h>=X&&r.menu&&(r.inputType==="upload"?r.image!==null:((re=r.additionalPromptForMyCar)==null?void 0:re.trim())&&(!r.menu.promptVariables||r.menu.promptVariables.length===0||r.menu.promptVariables.length===r.promptVariables.length)),ie=d.filter(K=>{var q;return K.categoryId===((q=r.category)==null?void 0:q.id)}),T=()=>{s(r)};return l.jsxs("div",{className:"bg-gray-800 p-4 md:p-6 rounded-lg shadow-xl flex flex-col h-full",children:[l.jsxs("div",{className:"flex-grow space-y-4 overflow-y-auto custom-scrollbar pr-1 pb-2",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-md lg:text-lg font-semibold text-indigo-400 mb-2 flex items-center",children:[l.jsx(i1,{className:"w-5 h-5 lg:w-6 lg:h-6 mr-2"}),"カテゴリ選択"]}),l.jsxs("select",{value:((le=r.category)==null?void 0:le.id)??"",onChange:K=>b(parseInt(K.target.value,10)),className:"w-full p-2.5 text-xs lg:text-sm bg-gray-700 border border-gray-600 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-200",children:[l.jsx("option",{value:"",disabled:!0,children:"カテゴリを選択..."}),u.map(K=>l.jsx("option",{value:K.id,children:K.name},K.id))]})]}),r.category&&0<ie.length&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mt-3 mb-2",children:[l.jsxs("h3",{className:"text-md lg:text-lg font-semibold text-indigo-400 flex items-center",children:[l.jsx(Wt,{className:"w-5 h-5 lg:w-6 lg:h-6 mr-2"}),"生成メニュー選択"]}),r.menu&&(r.menu.sampleInputImageUrl||r.menu.sampleResultImageUrl)&&l.jsxs("button",{onClick:()=>x(!0),className:"text-xs bg-gray-600 hover:bg-gray-500 text-indigo-300 px-2 py-1 rounded-md flex items-center",title:"このメニューの生成サンプルを見る",children:[l.jsx(So,{className:"w-4 h-4 mr-1"})," ","生成後のサンプルはこちら"]})]}),l.jsxs("select",{value:((ee=r.menu)==null?void 0:ee.id)||"",onChange:K=>w(parseInt(K.target.value,10)),className:"w-full p-2.5 text-xs lg:text-sm bg-gray-700 border border-gray-600 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-200",children:[l.jsx("option",{value:"",disabled:!0,children:"メニューを選択..."}),ie.map(K=>l.jsx("option",{value:K.id,children:K.name},K.id))]})]}),r.menu&&l.jsxs("div",{children:[l.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700/60 space-y-3",children:[l.jsx("p",{className:"text-sm text-gray-300 italic",children:r.menu.description}),r.menu.promptVariables&&0<r.menu.promptVariables.length&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-indigo-300 mb-1.5",children:"追加入力:"}),r.menu.promptVariables.map(K=>{var q;return l.jsxs("div",{className:"mb-2.5",children:[l.jsx("label",{htmlFor:K.key,className:"block text-xs lg:text-sm font-medium text-gray-300 mb-0.5",children:K.label}),l.jsx("input",{type:"text",id:K.key,value:((q=r.promptVariables.find(U=>U.key===K.key))==null?void 0:q.value)||"",onChange:U=>S(K.key,U.target.value),placeholder:`${K.label.replace(/^追加入力:\s*/,"")} を入力`,className:"w-full p-2 text-xs lg:text-sm bg-gray-700 border border-gray-600 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-200 placeholder-gray-500"})]},K.key)})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-md font-semibold text-indigo-400 mb-1 mt-2 flex items-center",children:[l.jsx(l1,{className:"w-5 h-5 mr-1.5"}),"愛車入力ソース"]}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:["upload","prompt"].map(K=>l.jsx("button",{onClick:()=>V(K),"aria-pressed":r.inputType===K,className:`p-2 rounded-md text-xs font-medium transition-all duration-150 ease-in-out flex items-center justify-center
                        ${r.inputType===K?"bg-indigo-600 text-white ring-1 ring-indigo-400":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:K==="upload"?l.jsxs(l.Fragment,{children:[l.jsx(Ta,{className:"w-4 h-4 mr-1"}),"画像アップロード"]}):l.jsxs(l.Fragment,{children:[l.jsx(Ip,{className:"w-4 h-4 mr-1"}),"テキスト入力ベース"]})},K))})]}),r.inputType==="upload"&&l.jsx(l.Fragment,{children:l.jsx(di,{ref:p,onImageSelect:v,label:"基準にする愛車写真",uploadedFile:r.image,showDeleteButton:!1})}),r.inputType==="prompt"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"additionalPromptForMyCar",className:"block text-xs lg:text-sm font-medium text-gray-300 mb-1",children:"主な被写体の説明 (テキスト入力ベース時)"}),l.jsx("textarea",{id:"additionalPromptForMyCar",value:r.additionalPromptForMyCar,onChange:K=>A(K.target.value),rows:2,placeholder:"例: 赤い流線型のスポーツカー、未来的なデザイン",className:"w-full p-2 text-xs lg:text-sm bg-gray-700 border border-gray-600 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-200 placeholder-gray-500"})]})]}),l.jsxs("div",{className:"pt-2",children:[l.jsxs("h3",{className:"text-md font-semibold text-indigo-400 mb-2 mt-2 flex items-center",children:[l.jsx(Qv,{className:"w-5 h-5 lg:w-6 lg:h-6 mr-2"}),"追加共通オプション"]}),r.inputType==="prompt"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"aspectRatio",className:"block text-xs lg:text-sm font-medium text-gray-300 mb-1",children:"画像比率"}),l.jsx("select",{id:"aspectRatio",value:r.aspectRatio,onChange:K=>z(K.target.value),className:"w-full p-2 text-xs lg:text-sm bg-gray-700 border border-gray-600 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-200",children:Xv.map(K=>l.jsx("option",{value:K,children:K},K))})]}),l.jsxs("div",{className:"mt-3",children:[l.jsx("label",{htmlFor:"additionalPromptForOthers",className:"block text-xs lg:text-sm font-medium text-gray-300 mb-1",children:"追加プロンプト (全体に効果、任意)"}),l.jsx("input",{type:"text",id:"additionalPromptForOthers",value:r.additionalPromptForOthers,onChange:K=>j(K.target.value),placeholder:"例: 超リアル、映画風ライト、魚眼レンズ",className:"w-full p-2 text-xs lg:text-sm bg-gray-700 border border-gray-600 rounded-md focus:ring-indigo-500 focus:border-indigo-500 text-gray-200 placeholder-gray-500"})]})]})]})]}),l.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-700",children:[l.jsxs("div",{className:"mb-3",children:[l.jsxs("p",{className:"text-xs lg:text-sm text-gray-400",children:["生成コスト:"," ",l.jsxs("span",{className:"font-semibold text-indigo-400",children:[X," クレジット"]})]}),l.jsxs("p",{className:"text-xs lg:text-sm text-gray-400",children:["保有クレジット:"," ",l.jsxs("span",{className:"font-semibold text-green-400",children:[h," クレジット"]})]}),!O&&h<X&&l.jsx("p",{className:"text-xs lg:text-sm text-red-400 mt-1",children:"クレジットが不足しています。"}),!O&&h>=X&&!r.menu&&l.jsx("p",{className:"text-xs lg:text-sm text-yellow-400 mt-1",children:"カテゴリとメニューを選択してください。"}),!O&&h>=X&&r.menu&&r.inputType==="upload"&&!r.image&&l.jsx("p",{className:"text-xs lg:text-sm text-yellow-400 mt-1",children:"基準画像をアップロードまたは選択してください。"}),!O&&h>=X&&r.menu&&r.inputType==="prompt"&&(!((ae=r.additionalPromptForMyCar)!=null&&ae.trim())||!(r.menu.promptVariables&&0<r.menu.promptVariables.length&&r.menu.promptVariables.some(K=>r.promptVariables.find(q=>q.key===K.key)&&r.promptVariables.some(q=>q.value.trim()===""))))&&l.jsx("p",{className:"text-xs lg:text-sm text-yellow-400 mt-1",children:"「主な被写体の説明」またはメニュー固有の「追加入力」を入力してください。"})]}),l.jsxs("button",{onClick:()=>T(),disabled:n||!O,className:"w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-500 disabled:cursor-not-allowed text-white font-bold py-3.5 px-4 rounded-lg shadow-md transition duration-150 ease-in-out flex items-center justify-center text-sm lg:text-base","aria-label":`画像を生成 (${X} クレジット)`,children:[l.jsx(Jv,{className:"w-5 h-5 mr-2"}),n?"生成中...":`画像を生成 (${X} クレジット)`]})]}),r.menu&&m&&l.jsx(x1,{isOpen:m,onClose:()=>x(!1),sourceUrl:r.menu.sampleInputImageUrl,generatedUrl:r.menu.sampleResultImageUrl,menuName:r.menu.name})]})},dw=s=>l.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",fill:"currentColor",...s,children:l.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),fw=s=>l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",...s,children:l.jsx("path",{d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878V14.89H8.078v-2.89h2.36V9.607c0-2.343 1.393-3.642 3.528-3.642 1.015 0 1.88.075 2.133.109v2.467h-1.45c-1.146 0-1.368.546-1.368 1.345v1.745h2.75l-.356 2.89h-2.394v7.008C18.343 21.128 22 16.991 22 12z"})}),yx=({isOpen:s,onClose:n,image:r,currentUser:o})=>{const[u,d]=Te.useState(r.url),[h,p]=Te.useState(!1);if(Te.useEffect(()=>{console.log("🔍 Share Modal - Image URL:",r.url),console.log("🔍 Share Modal - Is Localhost?:",r.url&&(r.url.includes("localhost")||r.url.includes("127.0.0.1"))),s&&(async()=>{if(r.url&&(r.url.includes("localhost")||r.url.includes("127.0.0.1"))){console.log("🔍 Share Modal - Starting upload for localhost URL:",r.url),p(!0);try{const j=await fetch("https://aisha-backend-584412696241.asia-northeast1.run.app/api/images/upload/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_url:r.url,user_id:(o==null?void 0:o.id)||"anonymous"})});if(j.ok){const z=await j.json();console.log("🔍 Share Modal - Upload successful:",z.public_url),d(z.public_url)}else{const z=await j.text();console.error("画像アップロード失敗:",j.status,j.statusText,z),console.log("🔍 Share Modal - Upload failed, using original URL:",r.url)}}catch(A){console.error("画像アップロードエラー:",A),console.log("🔍 Share Modal - Upload error, using original URL:",r.url)}finally{p(!1)}}else console.log("🔍 Share Modal - No upload needed, using existing URL:",r.url)})()},[s,r.url,o==null?void 0:o.id]),!s)return null;const m="https://aisha.mygarage.jp",x=r.displayPrompt.length>150?r.displayPrompt.substring(0,147)+"...":r.displayPrompt,b=`${m}?share=true&user=${encodeURIComponent((o==null?void 0:o.name)||r.authorName||"ゲスト")}&date=${encodeURIComponent(new Date(r.timestamp).toISOString())}&image=${encodeURIComponent(u)}&prompt=${encodeURIComponent(x)}&menu=${encodeURIComponent(r.menuName||"カスタム")}`,w=v=>{if(h){alert("画像をアップロード中です。しばらくお待ちください。");return}let A="";const j=encodeURIComponent(`${va}で画像を生成しました！ ${r.menuName||""} #マイガレージAISHA`);switch(v){case"X":A=`https://twitter.com/intent/tweet?url=${encodeURIComponent(b)}&text=${j}`;break;case"Facebook":A=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(b)}&quote=${j}`;break;case"Copy URL":navigator.clipboard.writeText(b).then(()=>{alert("シェアページのURLをクリップボードにコピーしました！")}).catch(z=>console.error("URLのコピーに失敗しました: ",z));return}A&&window.open(A,"_blank","noopener,noreferrer")};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[90] p-4",onClick:n,children:l.jsxs("div",{className:"bg-gray-800 border border-gray-700 shadow-2xl rounded-lg w-full max-w-3xl p-6 md:p-8 relative overflow-y-auto max-h-[90vh] custom-scrollbar",onClick:v=>v.stopPropagation(),children:[l.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white p-2 rounded-full hover:bg-gray-700/70 transition-colors z-10","aria-label":"シェアモーダルを閉じる",children:l.jsx(vt,{className:"w-7 h-7"})}),l.jsx("div",{className:"flex items-center mb-6",children:l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-indigo-400",children:"画像をシェア"}),l.jsx("p",{className:"text-xs text-gray-400",children:va})]})}),u?l.jsxs("div",{className:"mb-5 rounded-lg overflow-hidden shadow-lg bg-gray-700/40",children:[l.jsx("img",{src:u,alt:r.menuName||"AI画像生成",className:"w-full h-auto max-h-[45vh] object-contain"}),h&&l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:l.jsx("div",{className:"text-white text-sm",children:"画像をアップロード中..."})})]}):l.jsx("div",{className:"mb-5 p-8 text-center bg-gray-700/40 rounded-lg",children:h?l.jsx("p",{className:"text-lg text-blue-400",children:"画像をアップロード中..."}):l.jsx("p",{className:"text-lg text-red-400",children:"画像プレビューが利用できません。"})}),l.jsxs("div",{className:"space-y-2.5 text-xs md:text-sm mb-5",children:[r.menuName&&l.jsxs("div",{className:"flex items-start",children:[l.jsx(Wt,{className:"w-4 h-4 mr-2 mt-0.5 text-indigo-400 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium text-gray-300",children:"メニュー:"}),l.jsx("p",{className:"text-gray-200 ml-1 inline",children:r.menuName})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(xi,{className:"w-4 h-4 mr-2 text-indigo-400 flex-shrink-0"}),l.jsx("span",{className:"font-medium text-gray-300",children:"ユーザー:"}),l.jsx("p",{className:"text-gray-200 ml-1 inline",children:(o==null?void 0:o.name)||r.authorName||"ゲスト"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(ji,{className:"w-4 h-4 mr-2 text-indigo-400 flex-shrink-0"}),l.jsx("span",{className:"font-medium text-gray-300",children:"日時:"}),l.jsx("p",{className:"text-gray-200 ml-1 inline",children:new Date(r.timestamp).toLocaleString("ja-JP")})]})]}),l.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"共有方法を選択:"}),l.jsx("div",{className:"grid grid-cols-3 gap-2.5",children:Kv.map(v=>l.jsxs("button",{onClick:()=>w(v.name),className:"flex flex-col items-center justify-center p-2.5 space-y-1 rounded-md bg-gray-700 hover:bg-indigo-600 text-gray-300 hover:text-white transition-all duration-150 ease-in-out text-xs focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50",children:[v.name==="X"&&l.jsx(dw,{className:"w-5 h-5 mb-0.5"}),v.name==="Facebook"&&l.jsx(fw,{className:"w-5 h-5 mb-0.5"}),v.name==="Copy URL"&&l.jsx(Up,{className:"w-5 h-5 mb-0.5"}),l.jsx("span",{children:v.name==="Copy URL"?"URLコピー":v.name})]},v.name))})]})})};class hw{constructor(){this.baseUrl=Op}async makeRequest(n,r={}){const o=localStorage.getItem("token"),u=await fetch(`${this.baseUrl}${n}`,{...r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`,...r.headers}});if(!u.ok)throw new Error(`API Error: ${u.status}`);return u.json()}async getAvailableItems(){return this.makeRequest("/suzuri/items/")}async createMerchandise(n){return this.makeRequest("/suzuri/merchandise/",{method:"POST",body:JSON.stringify(n)})}async getUserProducts(n=1,r=20){return this.makeRequest(`/suzuri/products/?page=${n}&per_page=${r}`)}async getProductDetail(n){return this.makeRequest(`/suzuri/products/${n}/`)}async createPurchaseIntent(n){return this.makeRequest("/suzuri/purchase/intent/",{method:"POST",body:JSON.stringify(n)})}async confirmPurchase(n){return this.makeRequest("/suzuri/purchase/confirm/",{method:"POST",body:JSON.stringify(n)})}async getUserGoodsHistory(n){const r=new URLSearchParams({user_id:n});return this.makeRequest(`/suzuri/history/?${r}`)}}const ef=new hw,Rg=[{id:"heavyweight-t-shirt",name:"heavyweight-t-shirt",displayName:"Tシャツ",icon:"👕",basePrice:"",description:"",gradient:"from-blue-400 to-blue-600"},{id:"heavyweight-hoodie",name:"heavyweight-hoodie",displayName:"パーカー",icon:"🧥",basePrice:"",description:"",gradient:"from-purple-400 to-purple-600"},{id:"tote-bag",name:"tote-bag",displayName:"トートバッグ",icon:"👜",basePrice:"",description:"",gradient:"from-green-400 to-green-600"},{id:"mug-cup",name:"mug-cup",displayName:"マグカップ",icon:"☕",basePrice:"",description:"",gradient:"from-orange-400 to-orange-600"},{id:"heavyweight-sweat",name:"heavyweight-sweat",displayName:"スウェット",icon:"👔",basePrice:"",description:"",gradient:"from-indigo-400 to-indigo-600"},{id:"sticker",name:"sticker",displayName:"ステッカー",icon:"🏷️",basePrice:"",description:"",gradient:"from-yellow-400 to-yellow-600"}],Mo=({isOpen:s,onClose:n,image:r,currentUser:o,onGoodsCreated:u,initialStep:d="select",existingProductData:h})=>{const p=()=>h&&Rg.find(ee=>ee.id===h.selectedItemId)||null,[m,x]=C.useState(p()),[b,w]=C.useState(!1),[v,A]=C.useState((h==null?void 0:h.merchandiseResult)||null),[j,z]=C.useState(d),[S,V]=C.useState(!1);if(C.useEffect(()=>{if(j==="preview"){V(!0);const ee=setTimeout(()=>V(!1),300);return()=>clearTimeout(ee)}},[j]),!s)return null;const X=ee=>{if(!ee)return"AISHA生成画像";let ae=ee.replace(/^背景拡張[:：]\s*/g,"").replace(/^Please take photos of the car[^.]*\./g,"").replace(/^画像拡張[:：]\s*/g,"").replace(/^Extension[:：]\s*/g,"");const K=["NISSAN","TOYOTA","HONDA","MAZDA","SUBARU","MITSUBISHI","BMW","MERCEDES","AUDI","VOLKSWAGEN","PORSCHE","FERRARI","LAMBORGHINI","MASERATI","FORD","CHEVROLET","DODGE","TESLA","FAIRLADY","SUPRA","CIVIC","ACCORD","SKYLINE","GT-R"];for(const q of K)if(ae.toUpperCase().includes(q)){const U=ae.toUpperCase().indexOf(q),te=Math.max(0,U-10),ne=Math.min(ae.length,U+q.length+20);return ae.slice(te,ne).trim()}return ae.slice(0,50).trim()||"AISHA生成画像"},O=ee=>({"heavyweight-t-shirt":"¥3,500〜","heavyweight-hoodie":"¥4,800〜","heavyweight-sweat":"¥4,200〜","tote-bag":"¥2,800〜","mug-cup":"¥2,500〜",sticker:"¥800〜"})[ee]||"¥3,500〜",ie=X(r.displayPrompt),T=ee=>{x(ee),z("preview")},G=async()=>{if(m){w(!0),z("result");try{const ee={image_url:r.url,car_name:ie,description:`${ie} ${m.displayName}`,item_type:m.id,user_id:o==null?void 0:o.id},ae=await ef.createMerchandise(ee);A(ae),ae.success&&u&&u()}catch(ee){console.error("SUZURI merchandise creation failed:",ee);let ae="グッズ作成中にエラーが発生しました";ee.message.includes("API Error: 400")?ae="リクエストの形式が正しくありません。画像または車名に問題があります。":ee.message.includes("API Error: 401")?ae="SUZURI APIの認証に失敗しました。管理者に問い合わせてください。":ee instanceof Error&&(ae=`エラー: ${ee.message}`),A({success:!1,error:ae})}finally{w(!1)}}},re=()=>{j==="preview"?(z("select"),x(null)):j==="result"&&(z("select"),x(null),A(null))},le=()=>{z("select"),x(null),A(null),n()};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden relative transform transition-all duration-300 scale-100",onClick:ee=>ee.stopPropagation(),children:[l.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-purple-600 p-4 text-white relative",children:[l.jsx("button",{onClick:le,className:"absolute top-3 right-3 p-1.5 hover:bg-white hover:bg-opacity-20 rounded-full transition-all duration-200",children:l.jsx(vt,{className:"w-5 h-5"})}),l.jsx("div",{className:"pr-10",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-full",children:l.jsx(ln,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold",children:"オリジナルグッズ作成"}),l.jsx("p",{className:"text-pink-100 text-sm",children:"あなただけの特別なアイテムを作ろう"})]})]})})]}),l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[l.jsxs("div",{className:`flex items-center space-x-2 ${j==="select"?"text-purple-600":"text-gray-400"}`,children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${j==="select"?"bg-purple-600 text-white":"bg-gray-200 text-gray-600"}`,children:"1"}),l.jsx("span",{className:"text-sm font-medium",children:"アイテム選択"})]}),l.jsx("div",{className:"w-8 h-1 bg-gray-200 rounded-full",children:l.jsx("div",{className:`h-full bg-purple-400 rounded-full transition-all duration-500 ${j!=="select"?"w-full":"w-0"}`})}),l.jsxs("div",{className:`flex items-center space-x-2 ${j==="preview"?"text-purple-600":"text-gray-400"}`,children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${j==="preview"?"bg-purple-600 text-white":j==="result"?"bg-green-500 text-white":"bg-gray-200 text-gray-600"}`,children:j==="result"?l.jsx(rd,{className:"w-4 h-4"}):"2"}),l.jsx("span",{className:"text-sm font-medium",children:"プレビュー"})]}),l.jsx("div",{className:"w-8 h-1 bg-gray-200 rounded-full",children:l.jsx("div",{className:`h-full bg-purple-400 rounded-full transition-all duration-500 ${j==="result"?"w-full":"w-0"}`})}),l.jsxs("div",{className:`flex items-center space-x-2 ${j==="result"?"text-purple-600":"text-gray-400"}`,children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${j==="result"?"bg-green-500 text-white":"bg-gray-200 text-gray-600"}`,children:j==="result"?l.jsx(rd,{className:"w-4 h-4"}):"3"}),l.jsx("span",{className:"text-sm font-medium",children:"完成"})]})]})}),l.jsxs("div",{className:"p-6 max-h-[65vh] overflow-y-auto",children:[j==="select"&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 p-4 rounded-2xl border border-purple-100 shadow-sm",children:l.jsx("div",{className:"flex items-center justify-center",children:l.jsx("div",{className:"relative",children:l.jsx("img",{src:r.url,alt:"生成画像",className:"w-20 h-20 object-cover rounded-xl shadow-md border-2 border-white"})})})}),l.jsx("div",{className:"text-center",children:l.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-2 flex items-center justify-center",children:[l.jsx(ln,{className:"w-5 h-5 text-purple-500 mr-2"}),"作成するグッズを選択してください"]})}),l.jsx("div",{className:"grid grid-cols-3 gap-4",children:Rg.map(ee=>l.jsxs("button",{onClick:ae=>{ae.stopPropagation(),T(ee)},className:"group p-4 bg-white border border-gray-200 rounded-xl hover:border-purple-300 hover:shadow-md transition-all duration-200 text-center",children:[l.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${ee.gradient} rounded-lg flex items-center justify-center text-xl mb-2 mx-auto group-hover:scale-105 transition-transform duration-200`,children:ee.icon}),l.jsx("h4",{className:"font-semibold text-gray-800 text-sm",children:ee.displayName})]},ee.id))}),l.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-xl",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("div",{className:"text-blue-500 mt-0.5",children:"💡"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-blue-800 font-semibold text-sm mb-1",children:"SUZURIについて"}),l.jsx("p",{className:"text-blue-700 text-xs leading-relaxed",children:"作成後、SUZURIのサイトで安全にお買い物ができます。"})]})]})})]}),j==="preview"&&m&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${m.gradient} rounded-2xl flex items-center justify-center text-2xl mx-auto mb-4`,children:m.icon}),l.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:m.displayName})]}),l.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-6 border border-purple-200",children:l.jsxs("div",{className:"grid md:grid-cols-2 gap-6 items-center",children:[l.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md",children:l.jsxs("div",{className:"w-full h-48 bg-gray-100 rounded-lg flex items-center justify-center relative overflow-hidden",children:[l.jsx("img",{src:r.url,alt:"車の画像",className:"w-32 h-24 object-contain rounded-md"}),l.jsx("div",{className:"absolute bottom-2 right-2 bg-gradient-to-r from-purple-400 to-pink-400 text-white text-xs px-2 py-1 rounded-full font-bold",children:m.displayName})]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h4",{className:"text-lg font-bold text-gray-800 flex items-center",children:[l.jsx(ln,{className:"w-5 h-5 text-purple-500 mr-2"}),"商品詳細"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"アイテム"}),l.jsx("span",{className:"font-bold text-gray-800",children:m.displayName})]})}),l.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"プリント位置"}),l.jsx("span",{className:"font-medium text-gray-800",children:"フロント中央"})]})}),l.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"印刷品質"}),l.jsx("span",{className:"font-medium text-gray-800",children:"高品質プリント"})]})}),l.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"販売価格"}),l.jsx("span",{className:"font-bold text-purple-600 text-xl",children:O(m.id)})]}),l.jsx("div",{className:"text-right mt-1",children:l.jsx("span",{className:"text-gray-500 text-xs",children:"※サイズ・カラーにより異なります"})})]})]})]})]})}),l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(Wt,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-blue-800 mb-1",children:"準備完了！"}),l.jsx("p",{className:"text-blue-700 text-sm leading-relaxed",children:"グッズを作成してSUZURIで購入できるようになります。"})]})]})})]}),j==="result"&&l.jsx("div",{className:"text-center space-y-8",children:b?l.jsxs("div",{className:"py-12",children:[l.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-6",children:[l.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full flex items-center justify-center shadow-lg animate-bounce",children:l.jsx(es,{className:"w-12 h-12 text-purple-600 animate-spin"})}),l.jsx("div",{className:"absolute -top-2 -right-2 w-4 h-4 bg-yellow-400 rounded-full animate-ping"}),l.jsx("div",{className:"absolute -bottom-2 -left-2 w-3 h-3 bg-pink-400 rounded-full animate-ping animation-delay-300"}),l.jsx("div",{className:"absolute top-1/2 -left-4 w-2 h-2 bg-blue-400 rounded-full animate-ping animation-delay-600"})]}),l.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"✨ グッズを作成中..."}),l.jsxs("p",{className:"text-gray-600 text-lg leading-relaxed max-w-md mx-auto mb-8",children:["素敵な",m==null?void 0:m.displayName,"を作成しています。"]}),l.jsxs("div",{className:"max-w-xs mx-auto",children:[l.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full overflow-hidden shadow-inner",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-purple-400 via-pink-400 to-yellow-400 rounded-full animate-pulse relative",children:l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"})})}),l.jsx("p",{className:"text-sm text-gray-500 mt-2 text-center",children:"作成中..."})]}),l.jsxs("div",{className:"mt-8 flex justify-center",children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:r.url,alt:"作成中の画像",className:"w-20 h-16 object-contain rounded-lg shadow-lg border-2 border-white transform animate-float"}),l.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center",children:l.jsx(Wt,{className:"w-4 h-4 text-white animate-pulse"})})]}),l.jsx("div",{className:"mx-6 flex items-center",children:l.jsx(es,{className:"w-6 h-6 text-purple-500 animate-spin"})}),l.jsx("div",{className:"w-20 h-16 bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg flex items-center justify-center shadow-lg border-2 border-white",children:l.jsx("span",{className:"text-2xl animate-bounce",children:m==null?void 0:m.icon})})]})]}):v?l.jsx("div",{children:v.success?l.jsxs("div",{className:"py-8 space-y-8",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-green-100 to-emerald-100 rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl animate-bounce",children:l.jsx(rd,{className:"w-12 h-12 text-green-600"})}),l.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-4",children:l.jsx(Wt,{className:"w-8 h-8 text-yellow-400 animate-pulse"})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-3xl font-bold text-gray-800 mb-4",children:"🎉 グッズ作成完了！"}),l.jsxs("p",{className:"text-gray-600 text-lg mb-2",children:["素敵な",m==null?void 0:m.displayName,"が正常に作成されました"]}),l.jsx("p",{className:"text-purple-600 font-semibold",children:"おめでとうございます！"})]}),(v.sampleImageUrl||v.sample_image_url)&&l.jsx("div",{className:"flex justify-center",children:l.jsxs("div",{className:"relative group",children:[l.jsx("img",{src:v.sampleImageUrl||v.sample_image_url,alt:"作成されたグッズ",className:"max-w-[250px] h-auto rounded-2xl shadow-2xl border-4 border-white transform hover:scale-105 transition-all duration-500 group-hover:shadow-3xl"}),l.jsx("div",{className:"absolute -top-3 -right-3 bg-gradient-to-r from-green-400 to-emerald-400 text-white text-sm px-3 py-1 rounded-full font-bold shadow-lg animate-pulse",children:"完成品"}),l.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-r from-yellow-400/20 to-pink-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),l.jsx("div",{className:"absolute -top-2 -left-2 w-4 h-4 bg-yellow-400 rounded-full animate-ping opacity-75"}),l.jsx("div",{className:"absolute -bottom-2 -right-2 w-3 h-3 bg-pink-400 rounded-full animate-ping opacity-75 animation-delay-300"})]})}),l.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[v.productUrl||v.product_url?l.jsxs("a",{href:v.productUrl||v.product_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-full px-8 py-4 bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 text-white font-bold rounded-2xl hover:from-purple-700 hover:to-pink-600 transition-all shadow-xl hover:shadow-2xl transform hover:-translate-y-1",onClick:ee=>{const ae=v.productUrl||v.product_url;if(!ae){ee.preventDefault(),alert("商品URLが見つかりません。");return}try{new URL(ae)}catch{ee.preventDefault(),console.error("無効なURL:",ae),alert("無効な商品URLです: "+ae);return}},children:[l.jsx(ln,{className:"w-6 h-6 mr-3"}),"SUZURIで購入する"]}):l.jsxs("div",{className:"text-center py-4",children:[l.jsx("p",{className:"text-red-600 mb-4",children:"商品URLが取得できませんでした"}),l.jsx("button",{onClick:()=>{alert("SUZURI応答の詳細をコンソールで確認してください")},className:"text-sm text-gray-500 underline",children:"詳細をコンソールで確認"})]}),l.jsx("button",{onClick:re,className:"w-full px-8 py-4 bg-gray-100 text-gray-700 font-semibold rounded-2xl hover:bg-gray-200 transition-all border-2 border-gray-200 hover:border-gray-300",children:"他のグッズも作成する"})]})]}):l.jsxs("div",{className:"py-8 space-y-6",children:[l.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:l.jsx(d1,{className:"w-10 h-10 text-red-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"エラーが発生しました"}),l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 max-w-lg mx-auto",children:l.jsx("p",{className:"text-red-700 leading-relaxed",children:v.error})})]}),l.jsx("button",{onClick:re,className:"px-8 py-3 bg-gray-100 text-gray-700 font-semibold rounded-xl hover:bg-gray-200 transition-colors",children:"戻る"})]})}):null})]}),j!=="result"&&l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:j==="select"?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex items-center space-x-1 text-gray-500",children:l.jsx("span",{className:"text-sm",children:"AISHA × SUZURI"})}),l.jsx("button",{onClick:le,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors font-medium rounded-lg hover:bg-gray-100",children:"キャンセル"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:re,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors font-medium rounded-lg hover:bg-gray-100",children:[l.jsx(u1,{className:"w-4 h-4"}),l.jsx("span",{children:"戻る"})]}),l.jsx("button",{onClick:G,disabled:!m||b,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg",children:b?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(es,{className:"w-4 h-4 animate-spin"}),l.jsx("span",{children:"作成中..."})]}):l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Wt,{className:"w-4 h-4"}),l.jsx("span",{children:"グッズを作成"})]})})]})})]})})},mw=({image:s,currentUser:n,applyRegenerateFormDataToMenuExePanel:r,onRegenerate:o,onExtendImage:u,onDelete:d,onSaveToLibrary:h,onRate:p,onCreateGoods:m,onTogglePublic:x,onGoodsUpdate:b})=>{var D,W;const w=rr(),[v,A]=C.useState(null),[j,z]=C.useState({}),[S,V]=C.useState(!1),[X,O]=C.useState(!1),[ie,T]=C.useState(!1),[G,re]=C.useState(!1),[le,ee]=C.useState(null),[ae,K]=C.useState(!1),q=async()=>{try{const H=await fetch(s.url);if(!H.ok)throw new Error("Failed to fetch image");const J=await H.blob(),oe=window.URL.createObjectURL(J),ue=document.createElement("a");ue.href=oe;const Ue=J.type.includes("png")?"png":J.type.includes("jpeg")||J.type.includes("jpg")?"jpg":J.type.includes("webp")?"webp":"jpg";ue.download=`aisha_image_${s.id||Date.now()}.${Ue}`,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),window.URL.revokeObjectURL(oe)}catch(H){console.error("Download failed:",H);const J=document.createElement("a");J.href=s.url,J.target="_blank",J.rel="noopener noreferrer",document.body.appendChild(J),J.click(),document.body.removeChild(J),alert("直接ダウンロードに失敗しました。新しいタブで画像を開きました。右クリックで「名前を付けて画像を保存」を選択してください。")}},U=()=>{var H;return((H=s.usedFormData)==null?void 0:H.image)instanceof File},te=()=>{r(s.usedFormData)},ne=()=>{r(s.usedFormData,s.url)},k=()=>{T(!0)},$=(H,J)=>{z(oe=>({...oe,[H]:J}))},se=async()=>{K(!0);try{const H=await ef.createMerchandise({image_url:s.url,car_name:s.displayPrompt||"AI生成画像",description:`AI生成された画像から作成されたTシャツです。

生成プロンプト: ${s.displayPrompt}`,item_type:"heavyweight-t-shirt"});ee(H)}catch(H){console.error("SUZURI merchandise creation failed:",H),ee({success:!1,error:H.message||"グッズ作成中にエラーが発生しました"})}finally{K(!1)}},be=H=>{if(H.variations&&H.variations.length>0){for(const J of H.variations)if(!j[J.id]){alert(`${J.typeName}を選択してください。`);return}}m(H,s,j),A(null),z({})},_=({onClick:H,icon:J,label:oe,title:ue,className:Ue,disabled:Se})=>l.jsxs("button",{onClick:H,title:ue||oe,disabled:Se,className:`flex flex-col items-center justify-center p-1.5 sm:p-2 space-y-0.5 rounded-md bg-gray-700/80 hover:bg-indigo-600 text-gray-300 hover:text-white transition-all duration-150 ease-in-out text-xs disabled:opacity-50 disabled:hover:bg-gray-700/80 disabled:cursor-not-allowed ${Ue||""}`,children:[J,l.jsx("span",{className:"text-[9px] sm:text-[10px] leading-tight pt-0.5",children:oe})]});return l.jsxs("div",{className:"bg-gray-800/80 rounded-lg shadow-xl p-3 md:p-4 flex flex-col",children:[l.jsx("div",{className:"flex-grow flex items-center justify-center mb-3 overflow-hidden rounded-md bg-gray-900/50 aspect-video",children:l.jsx("img",{src:s.url,alt:s.menuName||"AI画像生成",className:"max-w-full max-h-full object-contain rounded-md shadow-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>O(!0),title:"クリックして拡大表示"})}),l.jsxs("div",{className:"space-y-2.5",children:[l.jsxs("div",{className:"flex items-center justify-between px-1 mt-1.5",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("span",{className:"text-xs font-semibold text-indigo-300",children:["メニュー: ",s.menuName||"カスタム"]}),l.jsx("button",{onClick:()=>p(s.id,"good"),title:"良い",className:`p-1 rounded-full hover:bg-gray-600 ${s.rating==="good"?"text-green-400 ring-1 ring-green-500":"text-gray-500 hover:text-green-300"}`,"aria-pressed":s.rating==="good",children:l.jsx(Bp,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>p(s.id,"bad"),title:"悪い",className:`p-1 rounded-full hover:bg-gray-600 ${s.rating==="bad"?"text-red-400 ring-1 ring-red-500":"text-gray-500 hover:text-red-300"}`,"aria-pressed":s.rating==="bad",children:l.jsx(Vp,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"flex items-center space-x-2 ml-auto",children:[l.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[l.jsx(ji,{className:"w-3.5 h-3.5 mr-1.5"}),l.jsx("span",{children:new Date(s.timestamp).toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})})]}),l.jsxs("button",{onClick:()=>x(s.id,!s.isPublic),title:s.isPublic?"非公開にする":"公開する",className:`flex items-center px-2 py-1 rounded-md text-xs transition-colors duration-150 ${s.isPublic?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300"}`,children:[s.isPublic?l.jsx(So,{className:"w-4 h-4 mr-1"}):l.jsx(zp,{className:"w-4 h-4 mr-1"}),s.isPublic?"公開中":"非公開"]})]})]}),l.jsxs("div",{className:"grid grid-cols-4 gap-1.5 pt-1",children:[l.jsx(_,{onClick:te,icon:l.jsx(es,{className:"w-4 h-4 sm:w-5 sm:h-5"}),label:"再生成",title:U()?"この画像生成時の設定と元画像を再利用して生成パネルへセット":"元画像が利用できません（ローカルキャッシュなし）",disabled:!U()}),l.jsx(_,{onClick:ne,icon:l.jsx(es,{className:"w-4 h-4 sm:w-5 sm:h-5"}),label:"生成画像で生成",title:"この生成画像と設定を再利用して生成パネルへセット"}),l.jsx(_,{onClick:()=>u(s),icon:l.jsx(Wt,{className:"w-4 h-4 sm:w-5 sm:h-5"}),label:`拡張 (${Vn}C)`,title:`画像を拡張 (コスト: ${Vn} クレジット)`}),l.jsx(_,{onClick:()=>h(s),icon:l.jsx(e1,{className:"w-4 h-4 sm:w-5 sm:h-5"}),label:"ライブラリ保存",title:"ライブラリへ保存"})]}),l.jsx("div",{className:"border-t border-gray-700/50 pt-2.5",children:l.jsxs("div",{className:"grid grid-cols-4 gap-1.5",children:[l.jsx(_,{onClick:q,icon:l.jsx(Dp,{className:"w-4 h-4 sm:w-5 sm:h-5"}),label:"DL",title:"画像をダウンロード"}),l.jsx(_,{onClick:()=>V(!0),icon:l.jsx(Lp,{className:"w-4 h-4 sm:w-5 sm:h-5"}),label:"シェア"}),l.jsx(_,{onClick:k,icon:l.jsx(ln,{className:"w-4 h-4 sm:w-5 sm:h-5"}),label:"グッズ"}),l.jsx(_,{onClick:()=>d(s.id),icon:l.jsx(ja,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-400/80 hover:text-red-400"}),label:"削除"})]})})]}),l.jsx(Mo,{isOpen:ie,onClose:()=>T(!1),image:s,currentUser:n,onGoodsCreated:()=>{console.log("🔄 GeneratedImagePanel - グッズ作成成功:",s.id),b(s.id)}}),G&&v&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>{re(!1),A(null),z({})},children:l.jsxs("div",{className:"bg-gray-800 border border-gray-700 rounded-3xl p-6 w-full max-w-lg relative flex flex-col max-h-[80vh]",onClick:H=>H.stopPropagation(),children:[l.jsx("button",{onClick:()=>{re(!1),A(null),z({})},className:"absolute top-3 right-3 text-gray-400 hover:text-white",children:l.jsx(vt,{className:"w-6 h-6"})}),l.jsx("h3",{className:"text-xl font-semibold text-indigo-400 mb-4 flex-shrink-0",children:"グッズ作成"}),l.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-1",children:[l.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-purple-900/30 to-blue-900/30 rounded-lg border border-purple-500/30",children:[l.jsxs("h4",{className:"text-lg font-semibold text-purple-300 mb-2 flex items-center",children:[l.jsx(ln,{className:"w-5 h-5 mr-2"}),"SUZURI でリアルグッズ作成"]}),l.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"この画像からTシャツなどの実物グッズを作成できます"}),le?l.jsx("div",{className:`p-3 rounded-md ${le.success?"bg-green-900/30 border border-green-500/30":"bg-red-900/30 border border-red-500/30"}`,children:le.success?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-2xl",children:"🎉"}),l.jsx("p",{className:"text-green-300 font-medium",children:"グッズ作成完了！"})]}),le.sample_image_url&&l.jsx("div",{className:"flex justify-center mb-3",children:l.jsxs("div",{className:"relative group",children:[l.jsx("img",{src:le.sample_image_url,alt:"作成されたグッズのプレビュー",className:"max-w-[200px] h-auto rounded-md border border-gray-600 shadow-lg group-hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>{const H=document.createElement("div");H.className="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[80] p-4",H.onclick=()=>document.body.removeChild(H);const J=document.createElement("img");J.src=le.sample_image_url,J.className="max-w-[90vw] max-h-[90vh] object-contain",J.onclick=oe=>oe.stopPropagation(),H.appendChild(J),document.body.appendChild(H)}}),l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all rounded-md flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-50 px-2 py-1 rounded",children:"クリックで拡大"})})]})}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("a",{href:le.product_url||le.productUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center px-3 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded-md transition-colors",children:"🛒 SUZURIで購入する"}),(le.product_title||le.item_name)&&l.jsxs("div",{className:"mt-2 p-2 bg-gray-800/50 rounded text-xs text-gray-300",children:[le.product_title&&l.jsxs("p",{children:[l.jsx("strong",{children:"商品名:"})," ",le.product_title]}),le.item_name&&l.jsxs("p",{children:[l.jsx("strong",{children:"アイテム:"})," ",le.item_name]}),le.product_id&&l.jsxs("p",{children:[l.jsx("strong",{children:"商品ID:"})," ",le.product_id]})]})]})]}):l.jsxs("p",{className:"text-red-300",children:["❌ ",le.error]})}):l.jsx("button",{onClick:se,disabled:ae,className:"w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white font-medium rounded-md transition-colors flex items-center justify-center",children:ae?l.jsxs(l.Fragment,{children:[l.jsx(es,{className:"w-4 h-4 mr-2 animate-spin"}),"作成中..."]}):l.jsxs(l.Fragment,{children:[l.jsx(ln,{className:"w-4 h-4 mr-2"}),"Tシャツを作成"]})})]}),v?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4",children:[" ",v.imageUrl?l.jsx("div",{className:"w-full aspect-video bg-gray-700/50 rounded-md flex items-center justify-center overflow-hidden my-3",children:l.jsx("img",{src:v.imageUrl,alt:v.name,className:"max-h-48 w-auto object-contain"})}):l.jsxs("div",{className:"w-full aspect-video bg-gray-700/50 rounded-md flex items-center justify-center text-gray-500 my-3",children:[l.jsx(Ta,{className:"w-20 h-20"})," "]}),l.jsxs("div",{className:"text-center",children:[" ",l.jsx("p",{className:"text-lg font-semibold text-indigo-300",children:v.name}),l.jsxs("p",{className:"text-sm text-gray-400",children:[v.creditCost," クレジット"]})]})]}),v.variations&&v.variations.length>0&&l.jsx("div",{className:"space-y-3 mb-4",children:v.variations.map(H=>l.jsxs("div",{children:[l.jsx("label",{htmlFor:`variation-${H.id}`,className:"block text-xs font-medium text-gray-300 mb-1",children:H.typeName}),l.jsxs("select",{id:`variation-${H.id}`,value:j[H.id]||"",onChange:J=>$(H.id,J.target.value),className:"w-full p-2 bg-gray-700 border border-gray-600 rounded-md text-gray-200 focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[l.jsxs("option",{value:"",disabled:!0,children:[H.typeName,"を選択..."]}),H.options.map(J=>l.jsx("option",{value:J,children:J},J))]})]},H.id))}),l.jsx("button",{onClick:()=>be(v),className:"w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition mt-2",disabled:((D=v.variations)==null?void 0:D.some(H=>!j[H.id]))||w<v.creditCost,children:w<v.creditCost?`クレジット不足 (${v.creditCost}必要)`:(W=v.variations)!=null&&W.some(H=>!j[H.id])?"バリエーションを選択":`${v.name}を作成 (${v.creditCost}C)`}),l.jsx("button",{onClick:()=>A(null),className:"mt-2 w-full text-sm text-gray-400 hover:text-indigo-300",children:"アイテム選択に戻る"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"border-t border-gray-600 pt-4",children:[l.jsxs("p",{className:"text-sm text-gray-400 mb-1 flex-shrink-0",children:["画像:"," ",l.jsxs("span",{className:"italic truncate",children:[s.displayPrompt.substring(0,30),"..."]})]}),l.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"モック機能 - 作成するアイテムを選択 (クレジット消費):"})]}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:Mp.map(H=>l.jsxs("button",{onClick:()=>{A(H);const J={};H.variations&&H.variations.forEach(oe=>{oe.options.length>0&&(J[oe.id]=oe.options[0])}),z(J)},className:"flex flex-col items-center p-3 bg-gray-700 hover:bg-indigo-700 rounded-md transition-colors text-center shadow-md",children:[l.jsx("div",{className:"w-full aspect-square bg-gray-600 rounded mb-2 flex items-center justify-center overflow-hidden",children:H.imageUrl?l.jsx("img",{src:H.imageUrl,alt:H.name,className:"w-full h-full object-cover"}):l.jsx(Ta,{className:"w-12 h-12 text-gray-500"})}),l.jsx("span",{className:"text-sm font-medium text-gray-200 mt-1",children:H.name}),l.jsxs("span",{className:"text-xs text-indigo-300 mt-0.5",children:[H.creditCost," クレジット"]})]},H.id))})]})]})]})}),S&&l.jsx(yx,{isOpen:S,onClose:()=>V(!1),image:s,currentUser:n}),X&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-[80] p-4",onClick:()=>O(!1),children:l.jsxs("div",{className:"relative max-w-[95vw] max-h-[95vh] flex items-center justify-center",children:[l.jsx("button",{onClick:()=>O(!1),className:"absolute top-2 right-2 text-white bg-black/50 hover:bg-black/70 p-2 rounded-full z-10 transition-colors","aria-label":"拡大表示を閉じる",children:l.jsx(vt,{className:"w-6 h-6"})}),l.jsx("img",{src:s.url,alt:s.menuName||"AI画像生成",className:"max-w-full max-h-full object-contain shadow-2xl",onClick:H=>H.stopPropagation()}),l.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black/70 text-white p-3 rounded-lg",children:l.jsx("p",{className:"text-sm font-medium",children:s.menuName||"カスタム生成"})})]})})]})},gw=({images:s,isLoading:n,currentUser:r,applyRegenerateFormDataToMenuExePanel:o,onRegenerate:u,onExtendImage:d,onDeleteImage:h,onSaveToLibrary:p,onRateImage:m,onCreateGoodsForImage:x,onToggleImagePublicStatus:b,onGoodsUpdate:w})=>{const v=C.useRef(null),A=C.useRef(void 0);return C.useEffect(()=>{if(v.current&&s.length>0){const j=s[0].id;j!==A.current&&(v.current.scrollTop=0),A.current=j}else s.length===0&&(A.current=void 0)},[s]),n&&s.length===0?l.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-800/50 backdrop-blur-sm rounded-lg shadow-xl p-6 text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-500 mb-4"}),l.jsx("p",{className:"text-xl font-semibold text-indigo-300",children:"傑作を生成中..."}),l.jsx("p",{className:"text-gray-400",children:"少々お待ちください。"})]}):!n&&s.length===0?l.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-800/50 backdrop-blur-sm rounded-lg shadow-xl p-6 text-center",children:[l.jsx(Ta,{className:"w-24 h-24 text-gray-600 mb-4"}),l.jsx("p",{className:"text-xl font-semibold text-gray-500",children:"生成された画像はここに表示されます。"}),l.jsx("p",{className:"text-gray-400",children:"左側でオプションを設定し、「生成」をクリックしてください。"})]}):l.jsxs("div",{ref:v,className:"h-full overflow-y-auto space-y-4 pr-2 custom-scrollbar",children:[n&&s.length>0&&l.jsxs("div",{className:"sticky top-0 z-10 bg-gray-800/80 backdrop-blur-sm p-3 rounded-b-lg shadow-lg flex items-center justify-center text-sm text-indigo-300",children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-indigo-400 mr-2"}),"新しい画像を生成中..."]}),s.map(j=>l.jsx(mw,{image:j,currentUser:r,applyRegenerateFormDataToMenuExePanel:o,onRegenerate:u,onExtendImage:d,onDelete:h,onSaveToLibrary:p,onRate:m,onCreateGoods:x,onTogglePublic:b,onGoodsUpdate:w},j.id))]})},pw=[["top-left","top-center","top-right"],["mid-left","center","mid-right"],["bottom-left","bottom-center","bottom-right"]],xw=s=>({"top-left":{"top-left":"●","top-center":"→","top-right":"","mid-left":"↓",center:"↘","mid-right":"","bottom-left":"","bottom-center":"","bottom-right":""},"top-center":{"top-left":"←","top-center":"●","top-right":"→","mid-left":"↙",center:"↓","mid-right":"↘","bottom-left":"","bottom-center":"","bottom-right":""},"top-right":{"top-left":"","top-center":"←","top-right":"●","mid-left":"",center:"↙","mid-right":"↓","bottom-left":"","bottom-center":"","bottom-right":""},"mid-left":{"top-left":"↑","top-center":"↗","top-right":"","mid-left":"●",center:"→","mid-right":"","bottom-left":"↓","bottom-center":"↘","bottom-right":""},center:{"top-left":"↖","top-center":"↑","top-right":"↗","mid-left":"←",center:"●","mid-right":"→","bottom-left":"↙","bottom-center":"↓","bottom-right":"↘"},"mid-right":{"top-left":"","top-center":"↖","top-right":"↑","mid-left":"",center:"←","mid-right":"●","bottom-left":"","bottom-center":"↙","bottom-right":"↓"},"bottom-left":{"top-left":"","top-center":"","top-right":"","mid-left":"↑",center:"↗","mid-right":"","bottom-left":"●","bottom-center":"→","bottom-right":""},"bottom-center":{"top-left":"","top-center":"","top-right":"","mid-left":"↖",center:"↑","mid-right":"↗","bottom-left":"←","bottom-center":"●","bottom-right":"→"},"bottom-right":{"top-left":"","top-center":"","top-right":"","mid-left":"",center:"↖","mid-right":"↑","bottom-left":"","bottom-center":"←","bottom-right":"●"}})[s]||{},bx=({isOpen:s,onClose:n,onConfirm:r,imageName:o="画像"})=>{const[u,d]=C.useState("center"),h=m=>{d(m)},p=()=>{r(u),n()};return s?l.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center bg-black bg-opacity-10",children:l.jsxs("div",{className:"bg-gray-800 border-2 border-indigo-500 rounded-lg shadow-2xl max-w-sm w-full mx-4 p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-white",children:"拡張方向を選択"}),l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-300 transition-colors",children:l.jsx(vt,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"grid grid-cols-3 gap-2 mb-6",children:pw.map((m,x)=>m.map((b,w)=>{const v=u===b,j=xw(u)[b]||"";return l.jsx("button",{onClick:()=>h(b),className:`
                    aspect-square border-2 rounded-lg flex items-center justify-center text-2xl transition-all cursor-pointer
                    ${v||j?"border-blue-400 bg-blue-600 text-white shadow-lg":"border-gray-600 bg-gray-700 hover:border-gray-500 hover:bg-gray-600 text-gray-300"}
                  `,children:j},b)}))}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:n,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-300 bg-gray-600 hover:bg-gray-500 rounded-lg transition-colors",children:"キャンセル"}),l.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"拡張を実行"})]})]})}):null},yw="https://aisha-backend-584412696241.asia-northeast1.run.app/api/menus",bw=s=>{var n;return{menuId:s.menu.id,image:s.image??void 0,additionalPromptForMyCar:s.additionalPromptForMyCar||void 0,additionalPromptForOthers:s.additionalPromptForOthers||void 0,aspectRatio:s.aspectRatio||void 0,promptVariables:(n=s.promptVariables)!=null&&n.length?s.promptVariables:void 0}},vw=async(s,n,r)=>{const o=new FormData,{menuId:u,image:d,...h}=s;if(n&&o.append("user_id",n),d instanceof File)try{console.log(`🖼️ 元画像サイズをチェック中: ${d.name}`);const p=await g1(d,2e3,1);o.append("image",p,p.name),console.log(`✅ 画像リサイズ完了: ${p.name}`)}catch(p){console.error("❌ 画像リサイズエラー:",p),o.append("image",d,d.name),console.log(`⚠️ 元画像をそのまま使用: ${d.name}`)}Object.entries(h).forEach(([p,m])=>{if(m==null)return;const x=mx(p);x==="prompt_variables"?o.append(x,JSON.stringify(m)):o.append(x,m)});try{const p=await pe.post(`${yw}/${s.menuId}/execute/`,o,{headers:{"Content-Type":"multipart/form-data"}});console.log("🔍 Raw API Response:",p.data);const m=nt(p.data);return console.log("🔍 Camel Case Data:",m),m}catch(p){return console.error("画像生成API実行失敗",p),r==null||r(p),null}},ww="https://aisha-backend-584412696241.asia-northeast1.run.app/api/image-expansion/",vx=async(s,n,r,o)=>{var u,d,h,p;try{const m={image_id:s,anchor_position:n,user_id:r};console.log("画像拡張API呼び出し:",m);const x=await pe.post(ww,m);if(console.log("画像拡張APIレスポンス:",x.data),!x.data.success)throw new Error(x.data.message||"画像拡張に失敗しました");const b=nt(x.data.expanded_image),w={...b,timestamp:new Date(b.timestamp),isSavedToLibrary:!1};return console.log("拡張画像データ:",w),w}catch(m){console.error("画像拡張API実行失敗:",m);let x="画像拡張中にエラーが発生しました";return(d=(u=m.response)==null?void 0:u.data)!=null&&d.error?x=m.response.data.error:(p=(h=m.response)==null?void 0:h.data)!=null&&p.details?x=`バリデーションエラー: ${JSON.stringify(m.response.data.details)}`:m.message&&(x=m.message),o==null||o(new Error(x)),null}},Ai="https://aisha-backend-584412696241.asia-northeast1.run.app/api/timeline",kg=async(s,n=!1,r)=>{try{const o=await pe.get(`${Ai}/`,{params:{user_id:s,saved_only:n}});return nt(o.data).map(d=>({...d,timestamp:new Date(d.timestamp)}))}catch(o){return console.error("タイムライン取得API実行失敗",o),[]}},Og=async(s,n,r)=>{try{const o={user_id:s,id:n.id,url:n.url,displayPrompt:n.displayPrompt,menuName:n.menuName||null,usedFormData:n.usedFormData,timestamp:n.timestamp,rating:n.rating||null,isPublic:n.isPublic||!1,authorName:n.authorName||null},u=await pe.post(`${Ai}/`,o),d=nt(u.data);return{...d,timestamp:new Date(d.timestamp)}}catch(o){return console.error("タイムライン保存API実行失敗",o),null}},cd=async(s,n,r,o)=>{try{const u={user_id:s,...r},d=await pe.put(`${Ai}/${n}/`,u),h=nt(d.data);return{...h,timestamp:new Date(h.timestamp)}}catch(u){return console.error("タイムライン更新API実行失敗",u),null}},wx=async(s,n,r)=>{try{return await pe.delete(`${Ai}/${n}/`,{params:{user_id:s}}),!0}catch(o){return console.error("タイムライン削除API実行失敗",o),!1}},Nw=async s=>{try{const n=await pe.get(`${Ai}/public/`);return nt(n.data).map(o=>({...o,timestamp:new Date(o.timestamp)}))}catch(n){return console.error("公開タイムライン取得API実行失敗",n),[]}},Sw=({currentUser:s,addToGenerationHistory:n,saveToTimelineOnGeneration:r,saveExistingImageToLibrary:o,onAddToGoodsHistory:u,onUpdateCredits:d,menuExePanelFormData:h,setMenuExePanelFormData:p,generatedImages:m,setGeneratedImages:x,onToggleImagePublicStatus:b,onRateImage:w,onReloadUserHistory:v,isLibraryExtending:A=!1,actionAfterLoad:j,onActionAfterLoadPerformed:z})=>{const{showToast:S}=wn(),V=Jd(),X=rr(),{refreshCredits:O}=xx(),[ie,T]=C.useState(!1),G=ie||A,[re,le]=C.useState(!1),[ee,ae]=C.useState(null),K=D=>s?X<D?(S("error","画像を生成するためのクレジットが不足しています。"),!1):!0:(S("error","ログインが必要です。"),!1),q=C.useCallback(async D=>{var Se,ft;if(!s){S("error","ログインが必要です。");return}const W=V==null?void 0:V.find(Ge=>{var en;return Ge.id===((en=D.menu)==null?void 0:en.id)});if(!W){S("error","生成メニューが見つかりません。");return}const H=W.credit??0;if(X<H){S("error","クレジットが不足しています。");return}const J=bw(D),oe=((Se=W.promptVariables)==null?void 0:Se.length)??0;if((((ft=J.promptVariables)==null?void 0:ft.filter(Ge=>Ge.value.trim()!=="").length)??0)<oe){S("error","追加入力欄が未入力です。");return}T(!0);const Ue=await vw(J,s.id,()=>S("error","画像生成に失敗しました。"));if(Ue){const Ge={id:Date.now().toString(),url:Ue.generatedImageUrl,displayPrompt:Ue.promptFormatted,menuName:W.name,usedFormData:D,timestamp:Ue.createdAt,isPublic:!1,authorName:(s==null?void 0:s.name)||"ゲスト"};x(Vt=>[Ge,...Vt]),r(Ge),S("success","画像が正常に生成されました。");const en={credits:H,user_id:s.id};await Md(en,()=>S("error","クレジット消費に失敗しました（画像生成は成功）")),O(s.id)}T(!1)},[s,V,d,S]),U=C.useCallback(async(D,W)=>{var ue;const H=((ue=D.menu)==null?void 0:ue.id)&&V.some(Ue=>{var Se;return Ue.id===((Se=D.menu)==null?void 0:Se.id)});if(!H&&!W){S("error","再生成に必要な情報が不足しています。メニューが削除されているか、画像が利用できません。");return}let J;if(W)try{const Se=await(await fetch(W)).blob(),ft=W.split("/"),Ge=ft[ft.length-1].split("?")[0]||`download_${Date.now()}.png`;J=new File([Se],Ge,{type:Se.type})}catch{S("error","生成画像取得に失敗しました。生成画像URLが期限切れの可能性があります。");return}const oe=H?{...D,image:J??D.image,inputType:J?"upload":D.inputType}:{category:h.category,menu:h.menu,image:J,additionalPromptForMyCar:D.additionalPromptForMyCar||"",additionalPromptForOthers:D.additionalPromptForOthers||"",aspectRatio:D.aspectRatio||rn.Original,promptVariables:[],inputType:"upload"};p(oe),S("success",H?"再生成用パラメータをセットしました。":"画像アップロードモードで再生成用パラメータをセットしました。")},[V,h]);C.useEffect(()=>{j&&typeof j=="object"&&j.type==="loadFromLibrary"&&(U(j.formData,j.generatedImageUrl),z&&z())},[j,z,U]);const te=C.useCallback(D=>{if(!s){S("error","ログインが必要です。");return}if(X<Vn){S("error","画像拡張に必要なクレジットが不足しています。");return}ae(D),le(!0)},[s,X,S]),ne=C.useCallback(async D=>{if(s!=null&&s.id)try{await wx(s.id,D)?(x(H=>H.filter(J=>J.id!==D)),v(),S("info","画像を完全に削除しました。")):S("error","画像の削除に失敗しました。")}catch(W){console.error("画像削除エラー:",W),S("error","画像の削除中にエラーが発生しました。")}},[s,v,S]),k=C.useCallback(()=>{le(!1),ae(null)},[]),$=C.useCallback(async D=>{if(!ee||!s){S("error","画像拡張の準備ができていません。");return}T(!0);try{const W={credits:Vn,user_id:s.id};await Md(W,()=>S("error","クレジット消費に失敗しました（画像拡張は成功）")),O(s.id);const J=await vx(ee.id,D,s.id,oe=>{console.error("画像拡張エラー:",oe),S("error",oe instanceof Error?oe.message:"画像拡張に失敗しました")});J&&(x(oe=>[J,...oe]),S("success","画像の拡張が完了しました！"))}catch(W){console.error("画像拡張処理エラー:",W),S("error","画像拡張処理中にエラーが発生しました")}finally{T(!1),k()}},[ee,s,O,S,x,n,r,k]),se=C.useCallback(D=>{o(D),S("success","画像がライブラリに保存されました！")},[o]),be=C.useCallback((D,W,H)=>{if(!s||!K(D.creditCost))return;const J=X-D.creditCost;d(J);const oe={id:`${D.id}-${Date.now()}`,goodsName:D.name,imageId:W.id,imageUrl:W.url,prompt:W.displayPrompt,timestamp:new Date,creditCost:D.creditCost,selectedVariations:H};u(oe),S("success",`(モック) ${D.name}を作成しました。コスト: ${D.creditCost}クレジット。`)},[s,X,d,u]),_=D=>{console.log("🔄 UserView - handleGoodsUpdate 呼び出し - imageId:",D),x(W=>{const H=W.map(oe=>oe.id===D?{...oe,goods_creation_count:(oe.goods_creation_count||0)+1}:oe),J=H.find(oe=>oe.id===D);return J&&console.log("✅ UserView - カウンタ更新完了 - 新しいカウント:",J.goods_creation_count),H})};return l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 md:gap-8 h-[calc(100vh-100px)] md:h-[calc(100vh-120px)]",children:[l.jsx("div",{className:"md:w-1/3 lg:w-1/4 xl:w-2/5 h-full",children:l.jsx(uw,{onGenerateClick:q,isGenerating:G,formData:h,setFormData:p})}),l.jsx("div",{className:"md:w-2/3 lg:w-3/4 xl:w-3/5 flex flex-col gap-4 h-full",children:l.jsx("div",{className:"flex-grow min-h-0",children:l.jsx(gw,{images:m,isLoading:G,currentUser:s,applyRegenerateFormDataToMenuExePanel:U,onRegenerate:q,onExtendImage:te,onDeleteImage:ne,onSaveToLibrary:se,onRateImage:w,onCreateGoodsForImage:be,onToggleImagePublicStatus:b,onGoodsUpdate:_})})}),l.jsx(bx,{isOpen:re,onClose:k,onConfirm:$,imageName:(ee==null?void 0:ee.displayPrompt)||"画像"})]})},_w={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_AISHA_API_BASE:"https://aisha-backend-584412696241.asia-northeast1.run.app/api",VITE_AISHA_SHARE_BASE_URL:"https://aisha.mygarage.jp",VITE_FIREBASE_API_KEY:"AIzaSyAMj_nLbIhWVurQNO-EH0lSGZjlj8BztOI",VITE_FIREBASE_APP_ID:"1:139166899282:web:7dc281d297b92b18a8938b",VITE_FIREBASE_AUTH_DOMAIN:"aisha-f9c6c.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-PEKY2T7RXG",VITE_FIREBASE_MESSAGING_SENDER_ID:"139166899282",VITE_FIREBASE_PROJECT_ID:"aisha-f9c6c",VITE_FIREBASE_STORAGE_BUCKET:"aisha-f9c6c.firebasestorage.app",VITE_MGDRIVE_API_BASE_URL:"https://md2.mygare.jp/api",VITE_MOCK_API_BASE:"http://localhost:4000/api"};var ud={};const Mg=s=>typeof window<"u"?_w[s]||"":(ud==null?void 0:ud[s])||"",Io=`${Mg("VITE_MOCK_API_BASE")||Mg("MOCK_API_BASE")||"http://localhost:4000/api"}/charge-options`,jw=async s=>{try{const n=await pe.get(Io);return nt(n.data)}catch(n){return console.error("チャージオプション取得失敗",n),s==null||s(n),[]}},Cw=async(s,n)=>{try{const r=await pe.post(`${Io}/`,qn(s));return nt(r.data)}catch(r){return console.error("チャージオプション作成失敗",r),n==null||n(r),null}},Ew=async(s,n)=>{try{const r=await pe.put(`${Io}/${s.id}/`,qn(s));return nt(r.data)}catch(r){return console.error("チャージオプション更新失敗",r),n==null||n(r),null}},Aw=async(s,n)=>{try{return await pe.delete(`${Io}/${s}/`),!0}catch(r){return console.error("チャージオプション削除失敗",r),n==null||n(r),!1}},tf=C.createContext(null),Nx=()=>{const s=C.useContext(tf);if(!s)throw new Error("useChargeOptions must be used within ChargeOptionsProvider");return s.options},Tw=()=>{const s=C.useContext(tf);if(!s)throw new Error("useChargeOptionsActions must be used within ChargeOptionsProvider");return{refreshChargeOptions:s.refresh}},Rw=({children:s})=>{const[n,r]=C.useState(null),{showToast:o}=wn(),u=()=>{jw(()=>{o("error","チャージオプションの取得に失敗しました")}).then(r)};return C.useEffect(()=>{u()},[]),l.jsx(tf.Provider,{value:{options:n,refresh:u},children:s})},kw=Mp.map(s=>({id:s.id,suzuriApiId:s.apiId,goodsName:s.name,creditCost:s.creditCost,variations:s.variations?JSON.parse(JSON.stringify(s.variations)):[],imageUrl:s.imageUrl||void 0})),Ow=()=>{const{showToast:s}=wn(),n=px(),{refreshCategories:r}=W2(),[o,u]=C.useState(null),d=Jd(),{refreshMenus:h}=rw(),[p,m]=C.useState(null),x=Nx(),{refreshChargeOptions:b}=Tw(),[w,v]=C.useState(null),[A,j]=C.useState("genMenuCategories"),[z,S]=C.useState(kw),[V,X]=C.useState(null),O=(T,G,re)=>l.jsxs("button",{onClick:()=>{j(T)},className:`flex items-center space-x-3 p-3 rounded-md w-full text-left transition-colors duration-150
                  ${A===T?"bg-indigo-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-indigo-400"}`,children:[re,l.jsx("span",{children:G})]},T),ie=()=>{switch(A){case"genMenuCategories":return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-indigo-300",children:"生成メニューカテゴリ管理"}),l.jsxs("button",{onClick:()=>u({id:0,name:"",description:""}),className:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg flex items-center",children:[l.jsx(Ys,{className:"w-5 h-5 mr-2"})," 新規カテゴリ追加"]})]}),o&&l.jsx(Mw,{item:o,onSave:async T=>{const G=()=>s("error","カテゴリ保存に失敗しました");(T.id===0?await K2(T,G):await Z2(T,G))&&(s("success","カテゴリを保存しました"),r(),u(null))},onCancel:()=>u(null)}),l.jsx("ul",{className:"space-y-3 mt-4",children:n==null?void 0:n.map(T=>l.jsxs("li",{className:"bg-gray-700 p-4 rounded-md shadow flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-indigo-400",children:T.name}),l.jsx("p",{className:"text-sm text-gray-300 mt-1",children:T.description||"説明なし"})]}),l.jsxs("div",{className:"space-x-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>u(T),className:"p-2 text-gray-400 hover:text-indigo-300","aria-label":`Edit ${T.name}`,children:l.jsx(Jl,{className:"w-5 h-5"})}),l.jsx("button",{onClick:async()=>{window.confirm(`${T.name}を削除しますか？`)&&await Q2(T.id,()=>{s("error","カテゴリ削除に失敗しました")})&&(s("success","カテゴリを削除しました"),r())},className:"p-2 text-gray-400 hover:text-red-400","aria-label":`Delete ${T.name}`,children:l.jsx(ja,{className:"w-5 h-5"})})]})]},T.id))})]});case"engines":return l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-semibold text-indigo-300 mb-4",children:"利用エンジン設定"}),l.jsx("p",{className:"text-gray-400 mb-6",children:"アプリケーションで使用するAIエンジンのAPIキーは、サーバー側の環境変数で設定する必要があります。以下は、各エンジンに必要な代表的な環境変数名です。"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-gray-700 p-4 rounded-md",children:[l.jsx("h4",{className:"text-lg font-medium text-indigo-400 mb-3",children:"画像生成モデル"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-200",children:"Google Imagen (Gemini API経由)"}),l.jsxs("p",{className:"text-sm text-gray-300",children:["環境変数:"," ",l.jsx("code",{className:"bg-gray-600 px-1.5 py-0.5 rounded text-indigo-300",children:"API_KEY"})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-200",children:"OpenAI DALL·E 3"}),l.jsxs("p",{className:"text-sm text-gray-300",children:["環境変数:"," ",l.jsx("code",{className:"bg-gray-600 px-1.5 py-0.5 rounded text-indigo-300",children:"OPENAI_API_KEY"})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-200",children:"Flux Kontext"}),l.jsxs("p",{className:"text-sm text-gray-300",children:["環境変数:"," ",l.jsx("code",{className:"bg-gray-600 px-1.5 py-0.5 rounded text-indigo-300",children:"FLUX_API_KEY"})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-200",children:"Midjourney"}),l.jsx("p",{className:"text-sm text-gray-400",children:"(通常、公式APIは提供されておらず、Discord Bot経由での利用となります。)"})]})]})]}),l.jsxs("div",{className:"bg-gray-700 p-4 rounded-md",children:[l.jsx("h4",{className:"text-lg font-medium text-indigo-400 mb-3",children:"言語モデル"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-200",children:"Google Gemini (Text)"}),l.jsxs("p",{className:"text-sm text-gray-300",children:["環境変数:"," ",l.jsx("code",{className:"bg-gray-600 px-1.5 py-0.5 rounded text-indigo-300",children:"API_KEY"})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-200",children:"OpenAI ChatGPT (GPT-3.5/4)"}),l.jsxs("p",{className:"text-sm text-gray-300",children:["環境変数:"," ",l.jsx("code",{className:"bg-gray-600 px-1.5 py-0.5 rounded text-indigo-300",children:"OPENAI_API_KEY"})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-gray-200",children:"Ideogram (Text-to-Imageも)"}),l.jsxs("p",{className:"text-sm text-gray-300",children:["環境変数:"," ",l.jsx("code",{className:"bg-gray-600 px-1.5 py-0.5 rounded text-indigo-300",children:"IDEOGRAM_API_KEY"})," ","(仮)"]})]})]})]})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-8",children:"注意: APIキーはUI上では設定・表示できません。サーバー環境で安全に管理してください。上記は代表的な例であり、使用するSDKやライブラリによって異なる場合があります。"})]});case"genMenus":return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-indigo-300",children:"生成メニュー管理"}),l.jsxs("button",{onClick:()=>m({id:0,name:"",engine:"imagen3",prompt:"",credit:10,promptVariables:[],sampleInputImageUrl:"",sampleResultImageUrl:""}),className:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg flex items-center",children:[l.jsx(Ys,{className:"w-5 h-5 mr-2"})," 新規メニュー追加"]})]}),p&&l.jsx(Iw,{item:p,categories:n??[],onSave:async T=>{var K;const G=((K=T.promptVariables)==null?void 0:K.length)??0,re=T.prompt.match(/{{.*?}}/g);if((re?re.length:0)!==G){s("error","ユーザー追加入力項目数がプロンプトと一致しません。");return}const ee=()=>s("error","メニュー保存に失敗しました");(T.id===0?await nw(T,ee):await aw(T,ee))&&(s("success","メニューを保存しました"),h(),m(null))},onCancel:()=>m(null)}),l.jsx("ul",{className:"space-y-3 mt-4",children:d==null?void 0:d.map(T=>{const G=n==null?void 0:n.find(re=>re.id===T.categoryId);return l.jsxs("li",{className:"bg-gray-700 p-4 rounded-md shadow flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-semibold text-indigo-400",children:[T.name," ",l.jsxs("span",{className:"text-xs text-gray-400",children:["(",T.engine,")"]})]}),G&&l.jsxs("p",{className:"text-xs text-cyan-400 bg-cyan-900/50 px-1.5 py-0.5 rounded-full inline-block my-1",children:["カテゴリ: ",G.name]}),l.jsxs("p",{className:"text-sm text-gray-300 mt-1",title:T.description,children:["簡易説明: ",T.description||"未設定"]}),l.jsxs("p",{className:"text-sm text-gray-300 mt-1 truncate max-w-md",title:T.engine,children:["プロンプト: ",T.engine]}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["コスト: ",T.credit," クレジット"]}),(T.sampleInputImageUrl||T.sampleResultImageUrl)&&l.jsxs("div",{className:"mt-2 flex space-x-2",children:[T.sampleInputImageUrl&&l.jsx("img",{src:T.sampleInputImageUrl,alt:"Sample Source",className:"w-16 h-10 object-cover rounded border border-gray-600"}),T.sampleResultImageUrl&&l.jsx("img",{src:T.sampleResultImageUrl,alt:"Sample Generated",className:"w-16 h-10 object-cover rounded border border-gray-600"})]})]}),l.jsxs("div",{className:"space-x-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>m(T),className:"p-2 text-gray-400 hover:text-indigo-300","aria-label":`Edit ${T.name}`,children:l.jsx(Jl,{className:"w-5 h-5"})}),l.jsx("button",{onClick:async()=>{window.confirm(`${T.name}を削除しますか？`)&&await sw(T.id,()=>{s("error","メニュー削除に失敗しました")})&&(s("success","メニューを削除しました"),h())},className:"p-2 text-gray-400 hover:text-red-400","aria-label":`Delete ${T.name}`,children:l.jsx(ja,{className:"w-5 h-5"})})]})]},T.id)})})]});case"goods":return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-indigo-300",children:"グッズ管理"}),l.jsxs("button",{onClick:()=>X({id:`new_${Date.now()}`,goodsName:"",suzuriApiId:"",creditCost:0,variations:[],imageUrl:void 0}),className:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg flex items-center",children:[l.jsx(Ys,{className:"w-5 h-5 mr-2"})," 新規グッズ追加"]})]}),V&&l.jsx(Dw,{item:V,onSave:T=>{S(G=>G.find(re=>re.id===T.id)?G.map(re=>re.id===T.id?T:re):[...G,T]),X(null)},onCancel:()=>X(null)}),l.jsx("ul",{className:"space-y-3 mt-4",children:z.map(T=>l.jsxs("li",{className:"bg-gray-700 p-4 rounded-md shadow flex justify-between items-start",children:[l.jsxs("div",{className:"flex items-start space-x-4",children:[T.imageUrl&&l.jsx("img",{src:T.imageUrl,alt:T.goodsName,className:"w-20 h-20 object-cover rounded-md border border-gray-600 flex-shrink-0"}),!T.imageUrl&&l.jsx("div",{className:"w-20 h-20 bg-gray-600 rounded-md flex items-center justify-center text-gray-500 flex-shrink-0",children:l.jsx(gg,{className:"w-10 h-10"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-indigo-400",children:T.goodsName}),l.jsxs("p",{className:"text-sm text-gray-300",children:["SUZURI API ID: ",T.suzuriApiId]}),l.jsxs("p",{className:"text-xs text-gray-500",children:["コスト: ",T.creditCost," クレジット"]}),T.variations&&T.variations.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-xs font-medium text-gray-400",children:"バリエーション:"}),T.variations.map(G=>l.jsxs("p",{className:"text-xs text-gray-500 ml-2",children:[G.typeName,": ",G.options.join(", ")]},G.id))]})]})]}),l.jsxs("div",{className:"space-x-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>X(T),className:"p-2 text-gray-400 hover:text-indigo-300","aria-label":`Edit ${T.goodsName}`,children:l.jsx(Jl,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>{window.confirm(`${T.goodsName}を削除しますか？`)&&S(G=>G.filter(re=>re.id!==T.id))},className:"p-2 text-gray-400 hover:text-red-400","aria-label":`Delete ${T.goodsName}`,children:l.jsx(ja,{className:"w-5 h-5"})})]})]},T.id))})]});case"chargeManagement":return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-indigo-300",children:"チャージオプション管理"}),l.jsxs("button",{onClick:()=>v({id:0,name:"",priceYen:0,creditsAwarded:0,displayInfo:"",isActive:!0,creditsBonus:0}),className:"bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg flex items-center",children:[l.jsx(Ys,{className:"w-5 h-5 mr-2"})," ","新規チャージオプション追加"]})]}),w&&l.jsx(Uw,{item:w,onSave:async T=>{const G=()=>s("error","チャージオプション保存に失敗しました");(T.id===0?await Cw(T,G):await Ew(T,G))&&(s("success","チャージオプションを保存しました"),b(),v(null))},onCancel:()=>v(null)}),l.jsx("ul",{className:"space-y-3 mt-4",children:x==null?void 0:x.map(T=>l.jsxs("li",{className:`bg-gray-700 p-4 rounded-md shadow flex justify-between items-center ${T.isActive?"":"opacity-60"}`,children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-semibold text-indigo-400",children:[T.name," ",T.isActive?l.jsx("span",{className:"text-xs text-green-400",children:"(有効)"}):l.jsx("span",{className:"text-xs text-gray-500",children:"(無効)"})]}),l.jsxs("p",{className:"text-sm text-gray-300",children:["価格: ",T.priceYen,"円"]}),l.jsxs("p",{className:"text-sm text-gray-300",children:["付与クレジット: ",T.creditsAwarded," (表示:"," ",T.displayInfo,")"]}),T.creditsBonus&&T.creditsBonus>0?l.jsxs("p",{className:"text-xs text-yellow-400",children:["ボーナス: +",T.creditsBonus," クレジット"]}):null]}),l.jsxs("div",{className:"space-x-2",children:[l.jsx("button",{onClick:()=>v(T),className:"p-2 text-gray-400 hover:text-indigo-300","aria-label":`Edit ${T.name}`,children:l.jsx(Jl,{className:"w-5 h-5"})}),l.jsx("button",{onClick:async()=>{window.confirm(`${T.name}を削除しますか？`)&&await Aw(T.id,()=>{s("error","チャージオプション削除に失敗しました")})&&(s("success","チャージオプションを削除しました"),b())},className:"p-2 text-gray-400 hover:text-red-400","aria-label":`Delete ${T.name}`,children:l.jsx(ja,{className:"w-5 h-5"})})]})]},T.id))})]});case"suzuriApi":return l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-semibold text-indigo-300 mb-4",children:"SUZURI API 設定"}),l.jsx("p",{className:"text-gray-400 mb-2",children:"SUZURIとの連携（グッズ作成など）には、SUZURI APIアクセストークンが必要です。 このアクセストークンは、サーバー側の環境変数で設定してください。"}),l.jsxs("div",{className:"p-4 bg-gray-700 rounded-md mt-4",children:[l.jsx("h4",{className:"text-lg font-medium text-indigo-400",children:"アクセストークン"}),l.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["必要な環境変数名:"," ",l.jsx("code",{className:"bg-gray-600 px-1.5 py-0.5 rounded text-indigo-300",children:"SUZURI_ACCESS_TOKEN"})]})]}),l.jsxs("p",{className:"text-gray-400 mt-4",children:["APIドキュメントはこちらを参照してください:"," ",l.jsx("a",{href:"https://suzuri.jp/developer/documentation/v1",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-400 hover:text-indigo-300 underline",children:"SUZURI API Documentation"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-6",children:"注意: APIアクセストークンはUI上では設定できません。サーバー環境で安全に管理してください。"})]});case"stripeApi":return l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-semibold text-indigo-300 mb-4",children:"Stripe API 設定"}),l.jsx("p",{className:"text-gray-400 mb-2",children:"Stripe決済代行サービスとの連携には、Stripe APIキーが必要です。 これらのキーは、サーバー側の環境変数で設定してください。"}),l.jsxs("div",{className:"space-y-3 mt-4",children:[l.jsxs("div",{className:"p-4 bg-gray-700 rounded-md",children:[l.jsx("h4",{className:"text-lg font-medium text-indigo-400",children:"公開可能キー (Publishable Key)"}),l.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["必要な環境変数名:"," ",l.jsx("code",{className:"bg-gray-600 px-1.5 py-0.5 rounded text-indigo-300",children:"STRIPE_PUBLISHABLE_KEY"})]})]}),l.jsxs("div",{className:"p-4 bg-gray-700 rounded-md",children:[l.jsx("h4",{className:"text-lg font-medium text-indigo-400",children:"シークレットキー (Secret Key)"}),l.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["必要な環境変数名:"," ",l.jsx("code",{className:"bg-gray-600 px-1.5 py-0.5 rounded text-indigo-300",children:"STRIPE_SECRET_KEY"})]})]})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-6",children:"注意: APIキーはUI上では設定できません。サーバー環境で安全に管理してください。"})]});case"users":return l.jsxs("div",{className:"text-gray-400",children:[l.jsx("h3",{className:"text-xl font-semibold text-indigo-300 mb-2",children:"ユーザー管理"}),l.jsx("p",{children:"ユーザーアカウントの一覧表示、ロール変更、アカウント停止などの機能。(現在プレースホルダー)"})]});case"sales":return l.jsxs("div",{className:"text-gray-400",children:[l.jsx("h3",{className:"text-xl font-semibold text-indigo-300 mb-2",children:"売上管理"}),l.jsx("p",{children:"チャージ履歴、クレジット消費履歴、月別レポートなどの機能。(現在プレースホルダー)"})]});case"generationHistory":return l.jsxs("div",{className:"text-gray-400",children:[l.jsx("h3",{className:"text-xl font-semibold text-indigo-300 mb-2",children:"生成履歴"}),l.jsx("p",{children:"全ユーザーの画像生成履歴、フィルター機能（ユーザー別、メニュー別、評価別）、詳細表示などの機能。(現在プレースホルダー)"})]});default:return null}};return l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 md:gap-8 h-full",children:[l.jsxs("nav",{className:"md:w-1/4 lg:w-1/5 bg-gray-800 p-4 rounded-lg shadow-lg space-y-2 flex-shrink-0",children:[O("genMenuCategories","メニューカテゴリ管理",l.jsx(s1,{className:"w-5 h-5"})),O("genMenus","生成メニュー管理",l.jsx(t1,{className:"w-5 h-5"})),O("engines","利用エンジン設定",l.jsx(Cd,{className:"w-5 h-5"})),O("chargeManagement","チャージ管理",l.jsx(ao,{className:"w-5 h-5"})),O("sales","売上管理",l.jsx(r1,{className:"w-5 h-5"})),O("goods","グッズ管理",l.jsx(gg,{className:"w-5 h-5"})),O("users","ユーザー管理",l.jsx(n1,{className:"w-5 h-5"})),O("generationHistory","生成履歴",l.jsx(Pp,{className:"w-5 h-5"})),O("suzuriApi","SUZURI API設定",l.jsx(Up,{className:"w-5 h-5"})),O("stripeApi","Stripe API設定",l.jsx(a1,{className:"w-5 h-5"}))]}),l.jsx("div",{className:"md:w-3/4 lg:w-4/5 bg-gray-800 p-6 rounded-lg shadow-lg overflow-y-auto custom-scrollbar",children:ie()})]})},Mw=({item:s,onSave:n,onCancel:r})=>{const[o,u]=C.useState(s),d=h=>{const{name:p,value:m}=h.target;u(x=>({...x,[p]:m}))};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg space-y-4",children:[l.jsx("h4",{className:"text-lg font-semibold text-indigo-300",children:s.id===0?"新規カテゴリ追加":`編集: ${s.name}`}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"categoryName",className:"text-sm text-gray-400 block mb-1",children:"カテゴリ名"}),l.jsx("input",{id:"categoryName",name:"name",value:o.name||"",onChange:d,className:"w-full bg-gray-700 p-2 rounded text-gray-200",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"categoryDescription",className:"text-sm text-gray-400 block mb-1",children:"補足説明 (任意)"}),l.jsx("textarea",{id:"categoryDescription",name:"description",value:o.description||"",onChange:d,rows:3,className:"w-full bg-gray-700 p-2 rounded text-gray-200"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:r,className:"bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-gray-200 font-medium",children:"キャンセル"}),l.jsx("button",{type:"button",onClick:()=>n(o),className:"bg-indigo-500 hover:bg-indigo-600 px-4 py-2 rounded text-white font-medium",disabled:!o.name.trim(),children:"保存"})]})]})})},Iw=({item:s,categories:n,onSave:r,onCancel:o})=>{const[u,d]=C.useState(s),h=b=>{const{name:w,value:v}=b.target;d(w==="engine"?A=>({...A,engine:v}):w==="categoryId"?A=>({...A,categoryId:v===""?null:parseInt(v,10)}):A=>({...A,[w]:w==="credit"?parseInt(v,10)||0:v}))},p=(b,w,v)=>{const A=[...u.promptVariables||[]];A[b]={...A[b],[w]:v},d(j=>({...j,promptVariables:A}))},m=()=>{d(b=>({...b,promptVariables:[...b.promptVariables||[],{key:"",label:""}]}))},x=b=>{d(w=>{var v;return{...w,promptVariables:(v=w.promptVariables)==null?void 0:v.filter((A,j)=>j!==b)}})};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-xl space-y-4 overflow-y-auto max-h-[90vh] custom-scrollbar",children:[l.jsx("h4",{className:"text-lg font-semibold text-indigo-300 mb-2",children:s.id===0?"新規生成メニュー追加":`編集: ${s.name}`}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"text-sm text-gray-400 block mb-1",children:"メニュー名"}),l.jsx("input",{id:"name",name:"name",value:u.name||"",onChange:h,className:"w-full bg-gray-700 p-2 rounded text-gray-200",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"categoryId",className:"text-sm text-gray-400 block mb-1",children:"カテゴリ (任意)"}),l.jsxs("select",{id:"categoryId",name:"categoryId",value:u.categoryId??"",onChange:h,className:"w-full bg-gray-700 p-2 rounded text-gray-200",children:[l.jsx("option",{value:"",children:"カテゴリなし"}),n.map(b=>l.jsx("option",{value:b.id,children:b.name},b.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"text-sm text-gray-400 block mb-1",children:"簡易説明 (任意)"}),l.jsx("textarea",{id:"description",name:"description",value:u.description||"",onChange:h,rows:2,className:"w-full bg-gray-700 p-2 rounded text-gray-200",placeholder:"メニューの簡単な説明"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"engine",className:"text-sm text-gray-400 block mb-1",children:"生成エンジン"}),l.jsxs("select",{id:"engine",name:"engine",value:u.engine||"Imagen3",onChange:h,className:"w-full bg-gray-700 p-2 rounded text-gray-200",children:[l.jsx("option",{value:"imagen3",children:"Imagen3"}),l.jsx("option",{value:"ideogram",children:"Ideogram"}),l.jsx("option",{value:"midjourney",children:"Midjourney"}),l.jsx("option",{value:"black_forest_labs",children:"Black Forest Labs"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"prompt",className:"text-sm text-gray-400 block mb-1",children:"生成プロンプト"}),l.jsx("textarea",{id:"prompt",name:"prompt",value:u.prompt||"",onChange:h,rows:4,className:"w-full bg-gray-700 p-2 rounded text-gray-200",placeholder:"例: A futuristic sports car, {{user_color}}, driving on Mars.",required:!0}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ユーザー入力は"," ",l.jsx("code",{className:"bg-gray-600 px-1 py-0.5 rounded text-indigo-300",children:"{{placeholder_name}}"})," ","形式で挿入できます。"]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"negativePrompt",className:"text-sm text-gray-400 block mb-1",children:"ネガティブプロンプト (任意)"}),l.jsx("textarea",{id:"negativePrompt",name:"negativePrompt",value:u.negativePrompt||"",onChange:h,rows:2,className:"w-full bg-gray-700 p-2 rounded text-gray-200",placeholder:"例: blurry, watermark, text"})]}),l.jsxs("div",{className:"border-t border-gray-700 pt-3 mt-3 space-y-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"sampleInputImageUrl",className:"text-sm text-gray-400 block mb-1",children:"サンプル元画像URL (任意)"}),l.jsx("input",{id:"sampleInputImageUrl",name:"sampleInputImageUrl",value:u.sampleInputImageUrl||"",onChange:h,className:"w-full bg-gray-700 p-2 rounded text-gray-200",placeholder:"https://example.com/source.jpg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"sampleResultImageUrl",className:"text-sm text-gray-400 block mb-1",children:"サンプル生成後画像URL (任意)"}),l.jsx("input",{id:"sampleResultImageUrl",name:"sampleResultImageUrl",value:u.sampleResultImageUrl||"",onChange:h,className:"w-full bg-gray-700 p-2 rounded text-gray-200",placeholder:"https://example.com/generated.jpg"})]})]}),l.jsxs("div",{className:"border-t border-gray-700 pt-3 mt-3",children:[l.jsx("h5",{className:"text-md font-semibold text-indigo-400 mb-2",children:"ユーザー追加入力項目設定 (任意)"}),u.promptVariables&&u.promptVariables.map((b,w)=>l.jsxs("div",{className:"mb-3 p-3 border border-gray-600 rounded-md space-y-2 relative",children:[l.jsxs("p",{className:"text-xs text-gray-400",children:["入力項目 #",w+1]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`label-${w}`,className:"text-sm text-gray-400 block mb-1",children:b.label.startsWith("追加入力: ")?b.label.substring(6):b.label}),l.jsx("input",{id:`label-${w}`,value:b.label,onChange:v=>p(w,"label",v.target.value),className:"w-full bg-gray-700 p-2 rounded text-gray-200",placeholder:"例: 車の色, 背景テーマ"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`key-${w}`,className:"text-sm text-gray-400 block mb-1",children:"プロンプト内プレースホルダー名"}),l.jsx("input",{id:`key-${w}`,value:b.key,onChange:v=>p(w,"key",v.target.value),className:"w-full bg-gray-700 p-2 rounded text-gray-200",placeholder:"例: user_color (英数字とアンダースコア)"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["プロンプト内で"," ",l.jsx("code",{className:"bg-gray-600 px-1 py-0.5 rounded text-indigo-300",children:`{{${b.key||"placeholder_name"}}}`})," ","として使用"]})]}),l.jsx("button",{type:"button",onClick:()=>x(w),className:"absolute top-2 right-2 p-1 text-red-400 hover:text-red-300","aria-label":"この入力項目を削除",children:l.jsx(ja,{className:"w-4 h-4"})})]},w)),l.jsxs("button",{type:"button",onClick:m,className:"mt-1 text-sm bg-gray-600 hover:bg-gray-500 text-gray-300 px-3 py-1.5 rounded flex items-center",children:[l.jsx(Ys,{className:"w-4 h-4 mr-1.5"})," テキスト入力項目を追加"]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"credit",className:"text-sm text-gray-400 block mb-1 mt-3",children:"消費クレジット"}),l.jsx("input",{id:"credit",type:"number",name:"credit",value:u.credit||0,onChange:h,className:"w-full bg-gray-700 p-2 rounded text-gray-200"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:o,className:"bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-gray-200 font-medium",children:"キャンセル"}),l.jsx("button",{type:"button",onClick:()=>{console.log("送信するメニュー:",u),r(u)},className:"bg-indigo-500 hover:bg-indigo-600 px-4 py-2 rounded text-white font-medium",disabled:!u.name.trim()||!u.engine.trim(),children:"保存"})]})]})})},Dw=({item:s,onSave:n,onCancel:r})=>{const[o,u]=C.useState(s),d=C.useRef(null),h=w=>{const{name:v,value:A}=w.target;u(j=>({...j,[v]:v==="creditCost"?parseInt(A,10)||0:A}))},p=w=>{if(w){const v=new FileReader;v.onloadend=()=>{u(A=>({...A,imageUrl:v.result}))},v.readAsDataURL(w)}else u(v=>({...v,imageUrl:void 0}))},m=(w,v,A)=>{const j=[...o.variations||[]];typeof j[w][v]=="string"?j[w][v]=A:j[w][v]=Array.isArray(A)?A:A.split(",").map(z=>z.trim()).filter(z=>z),u(z=>({...z,variations:j}))},x=()=>{u(w=>({...w,variations:[...w.variations||[],{id:`var_${Date.now()}`,typeName:"",options:[]}]}))},b=w=>{u(v=>{var A;return{...v,variations:(A=v.variations)==null?void 0:A.filter((j,z)=>z!==w)}})};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg space-y-4 overflow-y-auto max-h-[90vh] custom-scrollbar",children:[l.jsx("h4",{className:"text-lg font-semibold text-indigo-300",children:s.id.startsWith("new_")?"新規グッズアイテム追加":`編集: ${s.goodsName}`}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"goodsName",className:"text-sm text-gray-400 block mb-1",children:"グッズ名"}),l.jsx("input",{id:"goodsName",name:"goodsName",value:o.goodsName||"",onChange:h,className:"w-full bg-gray-700 p-2 rounded text-gray-200",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"suzuriApiId",className:"text-sm text-gray-400 block mb-1",children:"SUZURI API ID (または相当品ID)"}),l.jsx("input",{id:"suzuriApiId",name:"suzuriApiId",value:o.suzuriApiId||"",onChange:h,className:"w-full bg-gray-700 p-2 rounded text-gray-200",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"creditCostGoods",className:"text-sm text-gray-400 block mb-1",children:"消費クレジット"}),l.jsx("input",{id:"creditCostGoods",type:"number",name:"creditCost",value:o.creditCost||0,onChange:h,className:"w-full bg-gray-700 p-2 rounded text-gray-200"})]}),l.jsx(di,{ref:d,onImageSelect:p,label:"グッズ代表画像 (任意)"}),l.jsxs("div",{className:"border-t border-gray-700 pt-3 mt-3",children:[l.jsx("h5",{className:"text-md font-semibold text-indigo-400 mb-2",children:"バリエーション設定 (任意)"}),o.variations&&o.variations.map((w,v)=>l.jsxs("div",{className:"mb-3 p-3 border border-gray-600 rounded-md space-y-2 relative",children:[l.jsxs("p",{className:"text-xs text-gray-400",children:["バリエーションタイプ #",v+1]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`variationTypeName-${v}`,className:"text-sm text-gray-400 block mb-1",children:"タイプ名"}),l.jsx("input",{id:`variationTypeName-${v}`,value:w.typeName,onChange:A=>m(v,"typeName",A.target.value),className:"w-full bg-gray-700 p-2 rounded text-gray-200",placeholder:"例: サイズ、色、スタイル"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`variationOptions-${v}`,className:"text-sm text-gray-400 block mb-1",children:"選択肢 (カンマ区切り)"}),l.jsx("input",{id:`variationOptions-${v}`,value:w.options.join(", "),onChange:A=>m(v,"options",A.target.value),className:"w-full bg-gray-700 p-2 rounded text-gray-200",placeholder:"例: S, M, L  または  赤, 青, 緑"})]}),l.jsx("button",{type:"button",onClick:()=>b(v),className:"absolute top-2 right-2 p-1 text-red-400 hover:text-red-300","aria-label":"このバリエーションタイプを削除",children:l.jsx(ja,{className:"w-4 h-4"})})]},w.id||v)),l.jsxs("button",{type:"button",onClick:x,className:"mt-1 text-sm bg-gray-600 hover:bg-gray-500 text-gray-300 px-3 py-1.5 rounded flex items-center",children:[l.jsx(Ys,{className:"w-4 h-4 mr-1.5"})," ","バリエーションタイプを追加"]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:r,className:"bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-gray-200 font-medium",children:"キャンセル"}),l.jsx("button",{type:"button",onClick:()=>n(o),className:"bg-indigo-500 hover:bg-indigo-600 px-4 py-2 rounded text-white font-medium",disabled:!o.goodsName.trim()||!o.suzuriApiId.trim(),children:"保存"})]})]})})},Uw=({item:s,onSave:n,onCancel:r})=>{const[o,u]=C.useState(s),d=h=>{const{name:p,value:m,type:x}=h.target;if(x==="checkbox"){const{checked:b}=h.target;u(w=>({...w,[p]:b}))}else u(b=>({...b,[p]:p==="priceYen"||p==="creditsAwarded"||p==="creditsBonus"?parseInt(m,10)||0:m}))};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-lg space-y-4 overflow-y-auto max-h-[90vh] custom-scrollbar",children:[l.jsx("h4",{className:"text-lg font-semibold text-indigo-300",children:s.id===0?"新規チャージオプション追加":`編集: ${s.name}`}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"chargeName",className:"text-sm text-gray-400 block mb-1",children:"オプション名"}),l.jsx("input",{id:"chargeName",name:"name",value:o.name||"",onChange:d,className:"w-full bg-gray-700 p-2 rounded text-gray-200",placeholder:"例: 500円お得プラン",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"priceYen",className:"text-sm text-gray-400 block mb-1",children:"価格 (円)"}),l.jsx("input",{id:"priceYen",name:"priceYen",type:"number",value:o.priceYen,onChange:d,className:"w-full bg-gray-700 p-2 rounded text-gray-200"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"creditsAwarded",className:"text-sm text-gray-400 block mb-1",children:"付与クレジット数"}),l.jsx("input",{id:"creditsAwarded",name:"creditsAwarded",type:"number",value:o.creditsAwarded,onChange:d,className:"w-full bg-gray-700 p-2 rounded text-gray-200"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"creditsBonus",className:"text-sm text-gray-400 block mb-1",children:"ボーナスクレジット (表示用、任意)"}),l.jsx("input",{id:"creditsBonus",name:"creditsBonus",type:"number",value:o.creditsBonus||0,onChange:d,className:"w-full bg-gray-700 p-2 rounded text-gray-200"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"displayInfo",className:"text-sm text-gray-400 block mb-1",children:"表示情報テキスト"}),l.jsx("input",{id:"displayInfo",name:"displayInfo",value:o.displayInfo||"",onChange:d,className:"w-full bg-gray-700 p-2 rounded text-gray-200",placeholder:"例: 550 クレジット (+50お得)",required:!0})]}),l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("input",{id:"isActive",name:"isActive",type:"checkbox",checked:o.isActive,onChange:d,className:"h-4 w-4 text-indigo-600 border-gray-600 rounded focus:ring-indigo-500 bg-gray-700"}),l.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-300",children:"有効にする"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:r,className:"bg-gray-600 hover:bg-gray-500 px-4 py-2 rounded text-gray-200 font-medium",children:"キャンセル"}),l.jsx("button",{type:"button",onClick:()=>n(o),className:"bg-indigo-500 hover:bg-indigo-600 px-4 py-2 rounded text-white font-medium",disabled:!o.name.trim()||!o.displayInfo.trim(),children:"保存"})]})]})})},ya=Op;class Lw{async getLibraryIdFromFrontendId(n){const r=await fetch(`${ya}/timeline/?user_id=200120`);if(!r.ok)throw new Error("タイムライン取得に失敗しました");if(!(await r.json()).find(b=>b.id===n))throw new Error("ライブラリが見つかりません");const d=await fetch(`${ya}/timeline/public/`);if(!d.ok)throw new Error("公開タイムライン取得に失敗しました");if(!(await d.json()).find(b=>b.id===n))throw new Error("公開ライブラリが見つかりません");const m=await fetch(`${ya}/timeline/${n}/?user_id=200120`);if(!m.ok)throw new Error("ライブラリUUID取得に失敗しました");return(await m.json()).library_uuid||n}async getComments(n){const r=await fetch(`${ya}/timeline/${n}/comments/`);if(!r.ok)throw new Error(`コメント取得に失敗しました: ${r.statusText}`);return r.json()}async createComment(n,r){const o=await fetch(`${ya}/timeline/${n}/comments/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok){const u=await o.json().catch(()=>({}));throw new Error(u.error||`コメント作成に失敗しました: ${o.statusText}`)}return o.json()}async deleteComment(n,r,o){const u=await fetch(`${ya}/timeline/${n}/comments/${r}/?user_id=${o}`,{method:"DELETE"});if(!u.ok){const d=await u.json().catch(()=>({}));throw new Error(d.error||`コメント削除に失敗しました: ${u.statusText}`)}}async toggleLike(n,r){const o=await fetch(`${ya}/timeline/${n}/like/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok){const u=await o.json().catch(()=>({}));throw new Error(u.error||`いいね処理に失敗しました: ${o.statusText}`)}return o.json()}async getLikeStatus(n,r){const o=r?`?user_id=${r}`:"",u=await fetch(`${ya}/timeline/${n}/like/status/${o}`);if(!u.ok)throw new Error(`いいね状態取得に失敗しました: ${u.statusText}`);return u.json()}}const Id=new Lw,zw=({isOpen:s,onClose:n,image:r,currentUser:o,onCommentUpdate:u})=>{const[d,h]=C.useState([]),[p,m]=C.useState(""),[x,b]=C.useState(!1),w=C.useRef(null);C.useEffect(()=>{s&&(console.log("CommentModal opened",{currentUser:o,imageId:r.id}),A())},[s,r.id]),C.useEffect(()=>{v()},[d]);const v=()=>{var S;(S=w.current)==null||S.scrollIntoView({behavior:"smooth"})},A=async()=>{try{b(!0);const S=await Id.getComments(r.id);h(S)}catch(S){console.error("Failed to load comments:",S),h([])}finally{b(!1)}},j=async S=>{if(S.preventDefault(),console.log("Submit comment clicked",{newComment:p,currentUser:o,imageId:r.id}),!p.trim()){console.log("Comment is empty");return}if(!o){console.log("No current user"),alert("ログインが必要です");return}try{b(!0),console.log("Sending comment API request...");const V=await Id.createComment(r.id,{user_id:o.id,user_name:o.name,content:p});console.log("Comment created successfully:",V),h(X=>{const O=[...X,V];return u&&u(r.id,O.length),O}),m("")}catch(V){console.error("Failed to submit comment:",V);const X=V instanceof Error?V.message:"Unknown error occurred";alert(`コメントの投稿に失敗しました: ${X}`)}finally{b(!1)}},z=S=>new Date(S).toLocaleString("ja-JP",{month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit"});return s?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-md h-[80vh] flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("img",{src:r.url,alt:r.menuName||"AI画像生成",className:"w-12 h-12 object-cover rounded-lg"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-semibold text-sm",children:"コメント"}),l.jsx("p",{className:"text-gray-400 text-xs",children:r.authorName||"匿名ユーザー"})]})]}),l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white transition-colors",children:l.jsx(vt,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:x&&d.length===0?l.jsx("div",{className:"text-center text-gray-400",children:"コメントを読み込み中..."}):d.length===0?l.jsx("div",{className:"text-center text-gray-400",children:"まだコメントがありません"}):l.jsxs(l.Fragment,{children:[d.map(S=>l.jsx("div",{className:"flex",children:l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[l.jsx("span",{className:"text-white font-semibold text-sm",children:S.user_name}),l.jsx("span",{className:"text-gray-400 text-xs",children:z(S.created_at)})]}),l.jsx("p",{className:"text-gray-200 text-sm",children:S.content})]})})},S.id)),l.jsx("div",{ref:w})]})}),o&&l.jsxs("form",{onSubmit:j,className:"p-4 border-t border-gray-700",children:[l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white text-xs font-semibold",children:o.name.charAt(0)}),l.jsxs("div",{className:"flex-1 flex space-x-2",children:[l.jsx("input",{type:"text",value:p,onChange:S=>m(S.target.value),placeholder:"コメントを入力...",maxLength:500,className:"flex-1 bg-gray-700 text-white rounded-lg px-3 py-2 text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:x}),l.jsx("button",{type:"submit",disabled:!p.trim()||x,className:"bg-indigo-600 text-white rounded-lg px-3 py-2 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l.jsx(m1,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"text-right text-xs text-gray-400 mt-1",children:[p.length,"/500"]})]}),!o&&l.jsx("div",{className:"p-4 border-t border-gray-700 text-center text-gray-400 text-sm",children:"コメントするにはログインが必要です"})]})}):null},Ig=({publicImages:s,currentUser:n})=>{const[r,o]=C.useState(null),[u,d]=C.useState(!1),[h,p]=C.useState(!1),[m,x]=C.useState(null),[b,w]=C.useState(!1),[v,A]=C.useState(null),[j,z]=C.useState(s);C.useEffect(()=>{z(s)},[s]);const S=G=>{o(G),d(!0)},V=G=>{x(G),p(!0)},X=G=>{A(G),w(!0)},O=(G,re)=>{z(le=>le.map(ee=>ee.id===G?{...ee,commentCount:re}:ee))},ie=G=>{console.log("🔄 handleGoodsUpdate 呼び出し - imageId:",G),z(re=>{const le=re.map(ae=>ae.id===G?{...ae,goodsCreationCount:(ae.goodsCreationCount||ae.goods_creation_count||0)+1,goods_creation_count:(ae.goodsCreationCount||ae.goods_creation_count||0)+1}:ae),ee=le.find(ae=>ae.id===G);return ee&&console.log("✅ カウンタ更新完了 - 新しいカウント:",ee.goodsCreationCount||ee.goods_creation_count),le})},T=async G=>{if(!n){console.log("ログインが必要です");return}try{const re=await Id.toggleLike(G.id,{user_id:n.id});z(le=>le.map(ee=>ee.id===G.id?{...ee,likeCount:re.like_count}:ee))}catch(re){console.error("いいね処理でエラーが発生しました:",re)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-indigo-400 mb-8 text-center",children:"公開タイムライン"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(G=>l.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl overflow-hidden flex flex-col",children:[l.jsx("div",{className:"aspect-video bg-gray-700/50 flex items-center justify-center overflow-hidden",children:l.jsx("img",{src:G.url,alt:G.menuName||"AI画像生成",className:"w-full h-full object-cover cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>X(G),title:"クリックして拡大表示"})}),l.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[l.jsx("div",{className:"flex-grow space-y-2 mb-3",children:G.menuName&&l.jsxs("div",{className:"flex items-center text-sm text-indigo-300",children:[l.jsx(Wt,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),l.jsx("span",{children:G.menuName})]})}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between text-xs text-gray-500 pt-2 border-t border-gray-700",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(xi,{className:"w-4 h-4 mr-1"}),l.jsx("span",{children:G.authorName||"匿名ユーザー"})]}),l.jsxs("button",{onClick:()=>S(G),className:"flex items-center hover:text-blue-400 transition-colors",children:[l.jsx(h1,{className:"w-4 h-4 mr-1"}),l.jsx("span",{children:G.commentCount||0})]}),l.jsxs("button",{onClick:()=>T(G),className:"flex items-center hover:text-red-400 transition-colors",children:[l.jsx(f1,{className:"w-4 h-4 mr-1"}),l.jsx("span",{children:G.likeCount||0})]}),l.jsxs("button",{onClick:()=>V(G),className:`flex items-center transition-colors ${(G.goodsCreationCount||G.goods_creation_count||0)>0?"text-orange-400 hover:text-orange-500":"text-gray-500 hover:text-gray-600"}`,children:[l.jsx(ln,{className:"w-4 h-4 mr-1"}),l.jsx("span",{children:G.goodsCreationCount||G.goods_creation_count||0})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(ji,{className:"w-4 h-4 mr-1"}),l.jsx("span",{children:new Date(G.timestamp).toLocaleDateString("ja-JP")})]})]})]})]},G.id))}),r&&l.jsx(zw,{isOpen:u,onClose:()=>d(!1),image:r,currentUser:n,onCommentUpdate:O}),m&&l.jsx(Mo,{isOpen:h,onClose:()=>p(!1),image:m,currentUser:n,onGoodsCreated:()=>ie(m.id)}),b&&v&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-[80] p-4",onClick:()=>w(!1),children:l.jsxs("div",{className:"relative max-w-[95vw] max-h-[95vh] flex items-center justify-center",children:[l.jsx("button",{onClick:()=>w(!1),className:"absolute top-2 right-2 text-white bg-black/50 hover:bg-black/70 p-2 rounded-full z-10 transition-colors","aria-label":"拡大表示を閉じる",children:l.jsx(vt,{className:"w-6 h-6"})}),l.jsx("img",{src:v.url,alt:v.menuName||"AI画像生成",className:"max-w-full max-h-full object-contain shadow-2xl",onClick:G=>G.stopPropagation()}),l.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black/70 text-white p-3 rounded-lg",children:l.jsx("p",{className:"text-sm font-medium",children:v.menuName||"公開画像"})})]})})]})},Pw=({user:s,onLoginClick:n,onLogoutClick:r,onPlansClick:o,onToggleAdminView:u,isAdminView:d,onGenerationHistoryClick:h,onGoodsHistoryClick:p,currentAppView:m,onToggleAppViewMode:x,onPersonalSettingsClick:b})=>{const w=rr(),[v,A]=C.useState(!1),j=C.useRef(null);C.useEffect(()=>{const O=ie=>{j.current&&!j.current.contains(ie.target)&&A(!1)};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]);const z=O=>{O&&O(),A(!1)},S=m==="generator"?"タイムライン":"愛車から生成",V=m==="generator"?l.jsx(pg,{className:"w-5 h-5 md:mr-1.5"}):l.jsx(Wt,{className:"w-5 h-5 md:mr-1.5"}),X=m==="generator"?"公開タイムラインを見る":"愛車から画像を生成";return l.jsx("header",{className:"bg-gray-800 shadow-lg sticky top-0 z-40",children:l.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[l.jsx("div",{className:"flex items-center",children:l.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-indigo-400 tracking-tight",children:[va,l.jsx("span",{className:"text-sm font-normal text-gray-400 ml-2",children:"(β版)"})]})}),l.jsxs("nav",{className:"hidden md:flex items-center space-x-2 md:space-x-3",children:[s?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center text-sm text-gray-300",children:[l.jsx(xi,{className:"w-5 h-5 mr-1.5 text-indigo-400"}),l.jsx("span",{children:s.name})]}),l.jsxs("div",{className:"flex items-center text-sm text-green-400",children:[l.jsx(ao,{className:"w-5 h-5 mr-1"}),l.jsxs("span",{children:[w," クレジット"]})]}),l.jsxs("button",{onClick:o,className:"text-sm text-gray-300 hover:text-indigo-400 transition-colors duration-150 flex items-center bg-gray-700 hover:bg-gray-600 px-2 md:px-3 py-1.5 rounded-lg",title:"クレジットをチャージ",children:[l.jsx(ao,{className:"w-5 h-5 md:mr-1.5"})," ",l.jsx("span",{className:"hidden md:inline",children:"チャージ"})]}),l.jsxs("button",{onClick:h,className:"text-sm text-gray-300 hover:text-indigo-400 transition-colors duration-150 flex items-center bg-gray-700 hover:bg-gray-600 px-2 md:px-3 py-1.5 rounded-lg",title:"ライブラリを見る",children:[l.jsx(hg,{className:"w-5 h-5 md:mr-1.5"})," ",l.jsx("span",{className:"hidden md:inline",children:"ライブラリ"})]}),l.jsxs("button",{onClick:p,className:"text-sm text-gray-300 hover:text-indigo-400 transition-colors duration-150 flex items-center bg-gray-700 hover:bg-gray-600 px-2 md:px-3 py-1.5 rounded-lg",title:"グッズ履歴を見る",children:[l.jsx(mg,{className:"w-5 h-5 md:mr-1.5"})," ",l.jsx("span",{className:"hidden md:inline",children:"グッズ履歴"})]}),x&&!d&&l.jsxs("button",{onClick:x,className:"text-sm text-gray-300 hover:text-indigo-400 transition-colors duration-150 flex items-center bg-gray-700 hover:bg-gray-600 px-2 md:px-3 py-1.5 rounded-lg",title:X,children:[V,l.jsx("span",{className:"hidden md:inline",children:S})]}),b&&!d&&(s==null?void 0:s.isAdmin)&&l.jsxs("button",{onClick:b,className:"text-sm text-gray-300 hover:text-indigo-400 transition-colors duration-150 flex items-center bg-gray-700 hover:bg-gray-600 px-2 md:px-3 py-1.5 rounded-lg",title:"愛車設定",children:[l.jsx(dg,{className:"w-5 h-5 md:mr-1.5"})," ",l.jsx("span",{className:"hidden md:inline",children:"愛車設定"})]}),l.jsxs("button",{onClick:r,className:"text-sm text-gray-300 hover:text-red-400 transition-colors duration-150 flex items-center bg-gray-700 hover:bg-red-700/50 px-2 md:px-3 py-1.5 rounded-lg",title:"ログアウト",children:[l.jsx(ug,{className:"w-5 h-5 md:mr-1.5"})," ",l.jsx("span",{className:"hidden md:inline",children:"ログアウト"})]})]}):l.jsxs("button",{onClick:n,className:"text-sm text-gray-300 hover:text-indigo-400 transition-colors duration-150 flex items-center bg-indigo-600 hover:bg-indigo-700 px-3 md:px-4 py-2 rounded-lg",children:[l.jsx(cg,{className:"w-5 h-5 mr-2"})," ログイン"]}),(s==null?void 0:s.isAdmin)&&l.jsx("button",{onClick:u,title:d?"ユーザービューへ切替":"管理者ビューへ切替",className:"p-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-indigo-400 transition-colors duration-150",children:d?l.jsx(fg,{className:"w-6 h-6"}):l.jsx(Cd,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"md:hidden flex items-center",ref:j,children:s?l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>A(O=>!O),className:"p-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-indigo-400 transition-colors duration-150 flex items-center",children:[l.jsx(xi,{className:"w-6 h-6"}),l.jsx(Wv,{className:`w-4 h-4 ml-1 transition-transform ${v?"rotate-180":""}`})]}),v&&l.jsxs("div",{className:"absolute right-0 mt-2 w-60 bg-gray-700 rounded-md shadow-lg py-1 z-50 border border-gray-600",children:[l.jsxs("div",{className:"px-4 py-2 border-b border-gray-600",children:[l.jsx("p",{className:"text-sm font-medium text-indigo-300",children:s.name}),l.jsxs("p",{className:"text-xs text-green-400",children:[w," クレジット"]})]}),l.jsxs("button",{onClick:()=>z(o),className:"w-full text-left px-4 py-2 text-sm text-gray-200 hover:bg-indigo-600 hover:text-white flex items-center",children:[l.jsx(ao,{className:"w-5 h-5 mr-2"})," チャージ"]}),l.jsxs("button",{onClick:()=>z(h),className:"w-full text-left px-4 py-2 text-sm text-gray-200 hover:bg-indigo-600 hover:text-white flex items-center",children:[l.jsx(hg,{className:"w-5 h-5 mr-2"})," ライブラリ"]}),l.jsxs("button",{onClick:()=>z(p),className:"w-full text-left px-4 py-2 text-sm text-gray-200 hover:bg-indigo-600 hover:text-white flex items-center",children:[l.jsx(mg,{className:"w-5 h-5 mr-2"})," グッズ履歴"]}),x&&!d&&l.jsxs("button",{onClick:()=>z(x),className:"w-full text-left px-4 py-2 text-sm text-gray-200 hover:bg-indigo-600 hover:text-white flex items-center",children:[m==="generator"?l.jsx(pg,{className:"w-5 h-5 mr-2"}):l.jsx(Wt,{className:"w-5 h-5 mr-2"}),S]}),b&&!d&&(s==null?void 0:s.isAdmin)&&l.jsxs("button",{onClick:()=>z(b),className:"w-full text-left px-4 py-2 text-sm text-gray-200 hover:bg-indigo-600 hover:text-white flex items-center",children:[l.jsx(dg,{className:"w-5 h-5 mr-2"})," ","愛車設定"]}),l.jsxs("button",{onClick:()=>z(r),className:"w-full text-left px-4 py-2 text-sm text-gray-200 hover:bg-red-600 hover:text-white flex items-center border-t border-gray-600",children:[l.jsx(ug,{className:"w-5 h-5 mr-2"})," ログアウト"]}),(s==null?void 0:s.isAdmin)&&l.jsxs("button",{onClick:()=>z(u),className:"w-full text-left px-4 py-2 text-sm text-gray-200 hover:bg-indigo-600 hover:text-white flex items-center border-t border-gray-600 mt-1 pt-2",children:[d?l.jsx(fg,{className:"w-5 h-5 mr-2"}):l.jsx(Cd,{className:"w-5 h-5 mr-2"}),d?"ユーザービュー":"管理者ビュー"]})]})]}):l.jsxs("button",{onClick:n,className:"text-sm text-gray-300 hover:text-indigo-400 transition-colors duration-150 flex items-center bg-indigo-600 hover:bg-indigo-700 px-3 py-1.5 rounded-lg",children:[l.jsx(cg,{className:"w-5 h-5 mr-1.5"})," ログイン"]})})]})})},Hw=({image:s,onClose:n,onLoadOptions:r,onRateImage:o,onDeleteImage:u,onCreateGoods:d,onExtendImage:h,onTogglePublicStatus:p,currentUser:m})=>{const x=rr(),[b,w]=C.useState(!1),[v,A]=C.useState(!1);C.useEffect(()=>{},[b]),C.useEffect(()=>()=>{},[]);const[j,z]=C.useState(!1),[S,V]=C.useState(s.isPublic),[X,O]=C.useState(s.rating);C.useEffect(()=>{O(s.rating)},[s.rating]);const ie=async()=>{try{const ae=await fetch(s.url);if(!ae.ok)throw new Error("Failed to fetch image");const K=await ae.blob(),q=window.URL.createObjectURL(K),U=document.createElement("a");U.href=q;const te=K.type.includes("png")?"png":K.type.includes("jpeg")||K.type.includes("jpg")?"jpg":K.type.includes("webp")?"webp":"jpg";U.download=`aisha_library_image_${s.id||Date.now()}.${te}`,document.body.appendChild(U),U.click(),document.body.removeChild(U),window.URL.revokeObjectURL(q)}catch(ae){console.error("Download failed:",ae);const K=document.createElement("a");K.href=s.url,K.target="_blank",K.rel="noopener noreferrer",document.body.appendChild(K),K.click(),document.body.removeChild(K),alert("直接ダウンロードに失敗しました。新しいタブで画像を開きました。右クリックで「名前を付けて画像を保存」を選択してください。")}},T=({onClick:ae,icon:K,label:q,title:U,className:te,disabled:ne})=>l.jsxs("button",{onClick:ae,title:U||q,disabled:ne,className:`flex flex-col items-center justify-center p-2 space-y-1 rounded-md bg-gray-700 hover:bg-indigo-600 text-gray-300 hover:text-white transition-all duration-150 ease-in-out text-xs disabled:opacity-50 disabled:hover:bg-gray-700 ${te}`,children:[K,l.jsx("span",{className:"text-[10px] sm:text-xs",children:q})]}),G=()=>{const ae=s.usedFormData||{category:null,menu:null,image:null,additionalPromptForMyCar:"",additionalPromptForOthers:"",aspectRatio:rn.Original,promptVariables:[],inputType:"upload"};console.log("この画像で生成: formData =",ae),console.log("画像URL =",s.url),r(ae,s.url),n()},re=()=>{h(s)},le=()=>{window.confirm("この画像をライブラリから本当に削除しますか？この操作は元に戻せません。")&&(u(s.id),n())},ee=()=>{const ae=!S;V(ae),p(s.id,ae)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[70] p-4",onClick:()=>{n()},children:[l.jsxs("div",{className:"bg-gray-850 border border-gray-700 p-4 md:p-6 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col md:flex-row gap-4 md:gap-6 relative",onClick:ae=>ae.stopPropagation(),children:[l.jsx("button",{onClick:()=>{n()},className:"absolute top-3 right-3 text-gray-500 hover:text-white bg-gray-800/50 hover:bg-gray-700/80 p-1.5 rounded-full z-10","aria-label":"詳細ビューを閉じる",children:l.jsx(vt,{className:"w-6 h-6"})}),l.jsx("div",{className:"md:w-2/3 flex-shrink-0 flex items-center justify-center bg-gray-900 rounded-lg overflow-hidden aspect-video md:aspect-auto md:max-h-[calc(90vh-6rem)]",children:l.jsx("img",{src:s.url,alt:s.menuName||"AI画像生成",className:"max-w-full max-h-full object-contain cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>z(!0),title:"クリックして拡大表示"})}),l.jsxs("div",{className:"md:w-1/3 flex flex-col space-y-3 overflow-y-auto custom-scrollbar pr-1 pb-1",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-indigo-300 mb-1",children:s.menuName||"カスタム生成"}),l.jsxs("p",{className:"text-xs text-gray-500",children:["保存日: ",new Date(s.timestamp).toLocaleString("ja-JP")]})]}),l.jsx("div",{className:"border-t border-gray-700 pt-3 space-y-2",children:l.jsxs("div",{className:"flex items-center justify-start space-x-2",children:[l.jsx("p",{className:"text-sm text-gray-300",children:"評価:"}),l.jsx("button",{onClick:()=>{o(s.id,"good"),O("good")},title:"良い",className:`p-1.5 rounded-full hover:bg-gray-600 ${X==="good"?"text-green-400 ring-1 ring-green-500":"text-gray-500 hover:text-green-300"}`,"aria-pressed":X==="good",children:l.jsx(Bp,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>{o(s.id,"bad"),O("bad")},title:"悪い",className:`p-1.5 rounded-full hover:bg-gray-600 ${X==="bad"?"text-red-400 ring-1 ring-red-500":"text-gray-500 hover:text-red-300"}`,"aria-pressed":X==="bad",children:l.jsx(Vp,{className:"w-5 h-5"})})]})}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2",children:[l.jsx(T,{onClick:G,icon:l.jsx(es,{className:"w-5 h-5"}),label:"この画像で生成",title:"この画像と設定を再利用"}),l.jsx(T,{onClick:re,icon:l.jsx(Wt,{className:"w-5 h-5"}),label:"生成拡張",title:`画像を拡張 (コスト: ${Vn}C)`,disabled:x<Vn}),l.jsx(T,{onClick:ie,icon:l.jsx(Dp,{className:"w-5 h-5"}),label:"DL",title:"画像をダウンロード"})]}),l.jsxs("div",{className:"border-t border-gray-700 mt-2 pt-2 grid grid-cols-3 gap-2",children:[l.jsx(T,{onClick:()=>A(!0),icon:l.jsx(Lp,{className:"w-5 h-5"}),label:"シェア"}),l.jsx(T,{onClick:()=>w(!0),icon:l.jsx(ln,{className:"w-5 h-5"}),label:"グッズ"}),l.jsx(T,{onClick:le,icon:l.jsx(ja,{className:"w-5 h-5 text-red-400/80 group-hover:text-red-400"}),label:"削除",className:"hover:bg-red-700/30 group"})]}),l.jsx("div",{className:"border-t border-gray-700 mt-2 pt-3",children:l.jsxs("button",{onClick:ee,title:S?"非公開にする":"公開する",className:`w-full flex items-center justify-center px-3 py-2 rounded-md text-sm font-medium transition-colors duration-150 ${S?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-200"}`,children:[S?l.jsx(So,{className:"w-5 h-5 mr-2"}):l.jsx(zp,{className:"w-5 h-5 mr-2"}),S?"公開中":"非公開にする"]})})]})]}),b&&l.jsx(Mo,{isOpen:b,onClose:()=>{w(!1)},image:s,currentUser:m,onGoodsCreated:()=>{}})]}),v&&l.jsx(yx,{isOpen:v,onClose:()=>A(!1),image:s,currentUser:m}),j&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-[80] p-4",onClick:()=>z(!1),children:l.jsxs("div",{className:"relative max-w-[95vw] max-h-[95vh] flex items-center justify-center",children:[l.jsx("button",{onClick:()=>z(!1),className:"absolute top-2 right-2 text-white bg-black/50 hover:bg-black/70 p-2 rounded-full z-10 transition-colors","aria-label":"拡大表示を閉じる",children:l.jsx(vt,{className:"w-6 h-6"})}),l.jsx("img",{src:s.url,alt:s.menuName||"Generated library image",className:"max-w-full max-h-full object-contain shadow-2xl",onClick:ae=>ae.stopPropagation()}),l.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black/70 text-white p-3 rounded-lg",children:l.jsx("p",{className:"text-sm font-medium",children:s.menuName||"カスタム生成"})})]})})]})},Bw=({isOpen:s,onClose:n,history:r,onLoadOptions:o,onRateImageInLibrary:u,onDeleteFromLibrary:d,onCreateGoodsForLibrary:h,onExtendImageFromLibrary:p,onToggleLibraryImagePublicStatus:m,currentUser:x})=>{const[b,w]=C.useState(null);if(!s)return null;const v=r.filter(V=>V.isSavedToLibrary===!0),A=V=>{w(V)},j=()=>{console.log("🔍 GenerationHistoryModal - handleCloseDetailView 呼び出し"),console.trace("🔍 GenerationHistoryModal - handleCloseDetailView呼び出し元:"),w(null)},z=(V,X)=>{o(V,X),n(),j()},S=V=>{p(V)};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-3xl max-h-[85vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-indigo-400",children:"ライブラリ"}),l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white p-1 rounded-full hover:bg-gray-700",children:l.jsx(vt,{className:"w-7 h-7"})})]}),v.length===0?l.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-gray-500",children:[l.jsx(Ta,{className:"w-20 h-20 mb-4"}),l.jsx("p",{className:"text-xl",children:"ライブラリはまだ空です。"}),l.jsx("p",{className:"text-md",children:"画像を生成後、「ライブラリへ保存」するとここに追加されます。"})]}):l.jsx("ul",{className:"space-y-3 overflow-y-auto flex-grow custom-scrollbar pr-2",children:v.map(V=>l.jsxs("li",{className:"bg-gray-700 p-3 rounded-lg shadow hover:bg-gray-600 transition-colors duration-150 flex items-center space-x-4 cursor-pointer",onClick:()=>A(V),title:"詳細を表示して操作",children:[l.jsx("img",{src:V.url,alt:V.menuName||"AI画像生成",className:"w-24 h-24 object-cover rounded-md border border-gray-500"}),l.jsxs("div",{className:"flex-grow min-w-0",children:[l.jsxs("p",{className:"text-sm font-semibold text-indigo-300 truncate",title:V.displayPrompt,children:[V.menuName?`メニュー: ${V.menuName}`:"カスタム生成",V.isPublic&&l.jsx("span",{className:"ml-2 text-xs text-green-400 bg-green-700/50 px-1.5 py-0.5 rounded-full",children:"公開中"})]}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["日時:"," ",new Date(V.timestamp).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),V.rating&&l.jsxs("p",{className:"text-xs mt-1",children:["評価:"," ",l.jsx("span",{className:`font-semibold ${V.rating==="good"?"text-green-400":"text-red-400"}`,children:V.rating==="good"?"良い":"悪い"})]})]}),l.jsx("button",{onClick:X=>{X.stopPropagation(),A(V)},className:"p-2 text-gray-400 hover:text-indigo-300",title:"詳細表示 & 操作",children:l.jsx(So,{className:"w-6 h-6"})})]},V.id))})]})}),b&&l.jsx(Hw,{image:b,onClose:j,onLoadOptions:z,onRateImage:u,onDeleteImage:d,onCreateGoods:h,onExtendImage:S,onTogglePublicStatus:m,currentUser:x})]})},Vw=({isOpen:s,onClose:n,history:r,currentUser:o,onGoodsCreated:u})=>{const[d,h]=C.useState(!1),[p,m]=C.useState(null),x=S=>({"heavyweight-t-shirt":"¥3,500〜","heavyweight-hoodie":"¥4,800〜","heavyweight-sweat":"¥4,200〜","tote-bag":"¥2,800〜","mug-cup":"¥2,500〜",sticker:"¥800〜",mug:"¥2,500〜"})[S]||"¥3,500〜",b=S=>({"heavyweight-t-shirt":"Tシャツ","heavyweight-hoodie":"パーカー","heavyweight-sweat":"スウェット","tote-bag":"トートバッグ","mug-cup":"マグカップ",sticker:"ステッカー",mug:"マグカップ"})[S]||"グッズ";if(!s)return null;const w=S=>{if(!S.selectedVariations)return null;const{itemType:V,productId:X,productUrl:O,originalImageUrl:ie}=S.selectedVariations;return!V||!X||!O?null:{selectedItemId:V,merchandiseResult:{success:!0,productUrl:O,product_url:O,productId:parseInt(X),product_id:parseInt(X),productTitle:S.goodsName,product_title:S.goodsName,sampleImageUrl:S.imageUrl,sample_image_url:S.imageUrl,itemName:V,item_name:V}}},v=S=>{var X;const V=((X=S.selectedVariations)==null?void 0:X.originalImageUrl)||S.imageUrl||"";return{id:S.imageId,url:V,displayPrompt:S.prompt||S.goodsName,menuName:S.goodsName,usedFormData:{category:null,menu:null,image:null,additionalPromptForMyCar:"",additionalPromptForOthers:"",aspectRatio:rn.Square_1_1,promptVariables:[],inputType:"upload"},fullOptions:{finalPromptForService:S.prompt||S.goodsName,generationEngineForService:"imagen3",creditCostForService:S.creditCost,aspectRatio:rn.Square_1_1},timestamp:S.timestamp,isPublic:!1,isSavedToLibrary:!0}},A=S=>{if(!S.imageUrl){console.error("画像URLが見つかりません");return}m(S),h(!0)},j=()=>{h(!1),m(null)},z=()=>{u&&u()};return l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:[l.jsxs("div",{className:"bg-gray-800 p-4 md:p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[l.jsx("h2",{className:"text-xl md:text-2xl font-semibold text-indigo-400",children:"グッズ作成履歴"}),l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-white p-1 rounded-full hover:bg-gray-700",children:l.jsx(vt,{className:"w-6 md:w-7 h-6 md:h-7"})})]}),r.length===0?l.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-gray-500 py-8",children:[l.jsx(ln,{className:"w-16 h-16 md:w-20 md:h-20 mb-4"}),l.jsx("p",{className:"text-lg md:text-xl",children:"グッズ作成履歴はまだありません。"}),l.jsx("p",{className:"text-sm md:text-base",children:"画像からグッズを作成するとここに追加されます。"})]}):l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 md:gap-4 overflow-y-auto flex-grow custom-scrollbar pr-1",children:r.map(S=>{var V,X;return l.jsxs("button",{onClick:()=>A(S),disabled:!S.imageUrl,className:"bg-gray-700 rounded-lg shadow-md overflow-hidden flex flex-col group transition-all hover:shadow-indigo-500/30 hover:ring-1 hover:ring-indigo-500 cursor-pointer disabled:cursor-not-allowed disabled:opacity-50",title:S.imageUrl?"クリックして再度グッズを作成":"画像が利用できません",children:[l.jsx("div",{className:"aspect-square w-full bg-gray-600 flex items-center justify-center",children:S.imageUrl?l.jsx("img",{src:S.imageUrl,alt:S.goodsName,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):l.jsx(ln,{className:"w-1/2 h-1/2 text-gray-500"})}),l.jsxs("div",{className:"p-2 md:p-3 text-xs flex flex-col flex-grow justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-indigo-300 mb-0.5 truncate group-hover:text-indigo-200",title:S.goodsName,children:S.goodsName}),l.jsxs("div",{className:"mt-1 mb-1.5 space-y-1",children:[l.jsx("div",{className:"bg-gray-600 rounded px-2 py-1",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-400 text-[10px]",children:"グッズ"}),l.jsx("span",{className:"font-medium text-indigo-300 text-[10px]",children:(V=S.selectedVariations)!=null&&V.itemType?b(S.selectedVariations.itemType):"グッズ"})]})}),l.jsx("div",{className:"bg-gray-600 rounded px-2 py-1",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-400 text-[10px]",children:"価格"}),l.jsx("span",{className:"font-bold text-purple-400 text-[10px]",children:(X=S.selectedVariations)!=null&&X.itemType?x(S.selectedVariations.itemType):"¥3,500〜"})]})})]})]}),l.jsx("div",{className:"mt-auto space-y-0.5",children:l.jsxs("div",{className:"flex items-center text-gray-500 text-[10px]",children:[l.jsx(ji,{className:"w-3 h-3 mr-1 flex-shrink-0"}),l.jsx("span",{children:new Date(S.timestamp).toLocaleDateString("ja-JP",{year:"2-digit",month:"2-digit",day:"2-digit"})})]})})]})]},S.id)})})]}),p&&l.jsx(Mo,{isOpen:d,onClose:j,image:v(p),currentUser:o,onGoodsCreated:z,initialStep:"result",existingProductData:w(p)||void 0})]})},qw=({isOpen:s,onClose:n,currentUser:r})=>{const[o,u]=C.useState([]),[d,h]=C.useState(!1),[p,m]=C.useState(null),[x,b]=C.useState(0),[w,v]=C.useState(1),A=10;C.useEffect(()=>{console.log("🔍 PaymentHistoryModal useEffect:",{isOpen:s,currentUser:r}),s&&(r!=null&&r.id)&&j(1)},[s,r]);const j=async(O=1)=>{if(!(r!=null&&r.id)){console.log("🔍 No currentUser or currentUser.id:",r);return}h(!0),m(null);try{const ie=(O-1)*A,T=await ow(r.id,A,ie,G=>{console.error("決済履歴取得エラー:",G),m("決済履歴の取得に失敗しました")});if(T){console.log("🔍 Payment history response:",T);const G=T.results||[];console.log("🔍 First history item:",G[0]),u(G),b(T.count||0),v(O)}}catch(ie){console.error("決済履歴の取得に失敗:",ie),m("決済履歴の取得に失敗しました")}finally{h(!1)}},z=O=>{try{if(!O)return"日時不明";const ie=new Date(O);return isNaN(ie.getTime())?(console.warn("Invalid date string:",O),"無効な日時"):ie.toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(ie){return console.error("Date formatting error:",ie,"dateString:",O),"日時エラー"}},S=O=>{switch(O){case"succeeded":return"成功";case"pending":return"処理中";case"failed":return"失敗";case"canceled":return"キャンセル";default:return O}},V=O=>{switch(O){case"succeeded":return"text-green-400";case"pending":return"text-yellow-400";case"failed":return"text-red-400";case"canceled":return"text-gray-400";default:return"text-gray-400"}},X=Math.ceil(x/A);return s?(console.log("🔍 PaymentHistoryModal render:",{currentUser:r,userId:r==null?void 0:r.id}),l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-indigo-400",children:"決済履歴"}),l.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-200 text-2xl",children:"×"})]}),r?r.id?d?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-400"}),l.jsx("span",{className:"ml-3 text-gray-400",children:"読み込み中..."})]}):p?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-red-400 mb-4",children:p}),l.jsx("button",{onClick:()=>j(w),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg",children:"再試行"})]}):o.length===0?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-400",children:"決済履歴がありません"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex-1 overflow-y-auto mb-4",children:l.jsx("div",{className:"space-y-3",children:o.map(O=>l.jsx("div",{className:"bg-gray-700 p-4 rounded-lg border border-gray-600",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"決済日時"}),l.jsx("p",{className:"text-gray-200 text-sm",children:z(O.created_at||O.createdAt)}),O.completed_at&&O.completed_at!==O.created_at&&l.jsxs("p",{className:"text-xs text-gray-500",children:["完了: ",z(O.completed_at||O.completedAt)]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"金額"}),l.jsxs("p",{className:"text-gray-200 font-semibold",children:["¥",(O.charge_amount||O.chargeAmount||0).toLocaleString()]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"追加クレジット"}),l.jsxs("p",{className:"text-indigo-400 font-semibold",children:["+",(O.credit_amount||O.creditAmount||0).toLocaleString()," クレジット"]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"ステータス"}),l.jsx("p",{className:`font-semibold ${V(O.payment_status||O.paymentStatus||"unknown")}`,children:S(O.payment_status||O.paymentStatus||"unknown")})]})]})},O.id))})}),X>1&&l.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-4 pt-4 border-t border-gray-600",children:[l.jsx("button",{onClick:()=>j(w-1),disabled:w===1,className:`px-3 py-1 rounded ${w===1?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:"前へ"}),l.jsxs("span",{className:"text-gray-400 text-sm",children:[w," / ",X," ページ （全 ",x," 件）"]}),l.jsx("button",{onClick:()=>j(w+1),disabled:w===X,className:`px-3 py-1 rounded ${w===X?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:"次へ"})]})]}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-gray-400",children:"ユーザーIDが取得できません"}),l.jsxs("p",{className:"text-gray-500 text-sm mt-2",children:["ユーザー情報: ",JSON.stringify(r)]})]}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-gray-400",children:"ユーザー情報が取得できません"}),l.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"ログインしてから再度お試しください"})]}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:n,className:"w-full bg-gray-600 hover:bg-gray-700 text-gray-200 font-bold py-3 px-6 rounded-lg transition duration-150 ease-in-out",children:"閉じる"})})]})})):null},Gw=async s=>{try{const n=await fetch(`https://automall.jp/api/getCarInfo.php?user_id=${s}`,{method:"GET"});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();if(r.response.status==="OK")return r.response.car_data;throw new Error("愛車情報の取得に失敗しました")}catch(n){throw console.error("Car info fetch error:",n),n}},vi="https://aisha-backend-584412696241.asia-northeast1.run.app/api/car-settings",Dg=async(s,n,r)=>{try{const o={user_id:s};n&&(o.car_id=n);const u=await pe.get(vi,{params:o});if(u.data.success)return u.data.data||[];throw new Error(u.data.error||"愛車設定の取得に失敗しました")}catch(o){return console.error("愛車設定取得失敗",o),r==null||r(o),[]}},$w=async(s,n)=>{try{const r=new FormData;r.append("user_id",s.user_id),r.append("car_id",s.car_id),s.license_plate_text!==void 0&&r.append("license_plate_text",s.license_plate_text),s.car_name!==void 0&&r.append("car_name",s.car_name),["logo_mark_image","original_number_image","car_photo_front","car_photo_side","car_photo_rear","car_photo_diagonal"].forEach(d=>{const h=s[d];h&&r.append(d,h)});const u=await pe.post(vi+"/",r,{headers:{"Content-Type":"multipart/form-data"}});if(u.data.success)return u.data.data||null;throw new Error(u.data.error||"愛車設定の保存に失敗しました")}catch(r){return console.error("愛車設定作成・更新失敗",r),n==null||n(r),null}},Fw=async(s,n,r)=>{try{const o=new FormData;n.user_id&&o.append("user_id",n.user_id),n.car_id&&o.append("car_id",n.car_id),n.license_plate_text!==void 0&&o.append("license_plate_text",n.license_plate_text),n.car_name!==void 0&&o.append("car_name",n.car_name),["logo_mark_image","original_number_image","car_photo_front","car_photo_side","car_photo_rear","car_photo_diagonal"].forEach(p=>{const m=n[p];m&&o.append(p,m)}),["delete_logo_mark_image","delete_original_number_image","delete_car_photo_front","delete_car_photo_side","delete_car_photo_rear","delete_car_photo_diagonal"].forEach(p=>{n[p]&&o.append(p,"true")});const h=await pe.put(`${vi}/${s}/`,o,{headers:{"Content-Type":"multipart/form-data"}});if(h.data.success)return h.data.data||null;throw new Error(h.data.error||"愛車設定の更新に失敗しました")}catch(o){return console.error("愛車設定更新失敗",o),null}},Yw=async(s,n)=>{try{console.log("🚀 deleteCarSettings開始:",s),console.log("📡 API URL:",`${vi}/${s}/`);const r=await pe.delete(`${vi}/${s}/`);if(console.log("📥 削除APIレスポンス:",{status:r.status,success:r.data.success,message:r.data.message,data:r.data}),r.data.success)return console.log("✅ deleteCarSettings成功"),!0;throw console.log("❌ deleteCarSettings失敗 (API success=false)"),new Error(r.data.error||"愛車設定の削除に失敗しました")}catch(r){return console.error("❌ 愛車設定削除失敗",r),n==null||n(r),!1}},wi={front:"フロント正面",side:"真横",rear:"リア正面",front_angled_7_3:"斜め前 7:3",rear_angled_7_3:"斜め後 7:3"},Wl=()=>({numberManagement:{licensePlateText:"",logoMarkImageUrl:void 0,originalNumberImageUrl:void 0},referenceRegistration:{favoriteCarName:"",carPhotos:Object.keys(wi).map(s=>({viewAngle:s,label:wi[s],imageUrl:void 0}))}}),Ug=s=>s in wi,Lg=s=>s==="logoMarkImageUrl"||s==="originalNumberImageUrl",Xw=({currentUser:s,onSave:n,onClose:r})=>{const[o,u]=C.useState(s.personalSettings||Wl()),[d,h]=C.useState([]),[p,m]=C.useState(null),[x,b]=C.useState(!1),[w,v]=C.useState(null),[A,j]=C.useState(!1),[z,S]=C.useState({}),{showToast:V}=wn(),X=q=>{const U=`${q.car_brand_en} ${q.car_model_en}`;return q.car_nickname?`${U} [${q.car_nickname}]`:U};C.useEffect(()=>{const q=async()=>{try{const U=await Gw(s.id);console.log("取得した愛車情報:",U),console.log("愛車数:",U.length),h(U),U.length>0&&m(U[0])}catch(U){console.error("愛車情報の取得に失敗しました:",U),V("error","愛車情報の取得に失敗しました")}};s.id&&q()},[s.id]),C.useEffect(()=>{(async()=>{if(!(!p||!s.id)){j(!0);try{const U=await Dg(s.id,p.car_id,te=>{console.error("CarSettings取得エラー:",te)});if(U.length>0){const te=U[0];v(te);const ne={numberManagement:{licensePlateText:te.license_plate_text||"",logoMarkImageUrl:te.logo_mark_image_url||void 0,originalNumberImageUrl:te.original_number_image_url||void 0},referenceRegistration:{favoriteCarName:te.car_name&&te.car_name.trim()!==""?te.car_name:"",carPhotos:Object.keys(wi).map(k=>{let $;switch(k){case"front":$=te.car_photo_front_url||void 0;break;case"side":$=te.car_photo_side_url||void 0;break;case"rear":$=te.car_photo_rear_url||void 0;break;case"front_angled_7_3":$=te.car_photo_diagonal_url||void 0;break;case"rear_angled_7_3":$=void 0;break}return{viewAngle:k,label:wi[k],imageUrl:$}})}};u(ne)}else v(null),u(Wl())}catch(U){console.error("CarSettings読み込みエラー:",U),V("error","設定の読み込みに失敗しました")}finally{j(!1)}}})()},[p,s.id]);const O=C.useRef(null),ie=C.useRef(null),T=C.useRef({front:Te.createRef(),side:Te.createRef(),rear:Te.createRef(),front_angled_7_3:Te.createRef(),rear_angled_7_3:Te.createRef()});C.useEffect(()=>{const q=Wl();u(q)},[]);const G=q=>{const{name:U,value:te}=q.target,[ne,k]=U.split(".");if(ne==="numberManagement"||ne==="referenceRegistration"){const $=ne,se=k;u(be=>({...be,[$]:{...be[$],[se]:te}}))}},re=(q,U,te)=>{if(console.log("🖼️ handleImageUpload called:",{section:q,field:U,file:(te==null?void 0:te.name)||"null"}),te){const ne=new FileReader;ne.onloadend=()=>{const k=ne.result;let $;switch(U){case"logoMarkImageUrl":$="logo_mark_image";break;case"originalNumberImageUrl":$="original_number_image";break;case"front":$="car_photo_front";break;case"side":$="car_photo_side";break;case"rear":$="car_photo_rear";break;case"front_angled_7_3":$="car_photo_diagonal";break;default:return}S(se=>({...se,[$]:te})),q==="referenceRegistration"&&Ug(U)?u(se=>{const be=se.referenceRegistration.carPhotos.map(_=>_.viewAngle===U?{..._,imageUrl:k}:_);return{...se,referenceRegistration:{...se.referenceRegistration,carPhotos:be}}}):q==="numberManagement"&&Lg(U)&&u(se=>({...se,numberManagement:{...se.numberManagement,[U]:k}}))},ne.readAsDataURL(te)}else{q==="referenceRegistration"&&Ug(U)?u(k=>{const $=k.referenceRegistration.carPhotos.map(se=>se.viewAngle===U?{...se,imageUrl:void 0}:se);return{...k,referenceRegistration:{...k.referenceRegistration,carPhotos:$}}}):q==="numberManagement"&&Lg(U)&&u(k=>({...k,numberManagement:{...k.numberManagement,[U]:void 0}}));const ne=(()=>{switch(U){case"logoMarkImageUrl":return"logo_mark_image";case"originalNumberImageUrl":return"original_number_image";case"front":return"car_photo_front";case"side":return"car_photo_side";case"rear":return"car_photo_rear";case"front_angled_7_3":return"car_photo_diagonal";default:return null}})();ne&&S(k=>{const{[ne]:$,...se}=k;return se}),console.log("🗑️ 画像削除条件チェック:",{currentCarSettings:!!w,selectedCar:!!p,currentCarSettingsId:w==null?void 0:w.id,selectedCarId:p==null?void 0:p.car_id}),w&&p?(console.log("✅ 削除条件満たしているため、handleImmediateDeleteを呼び出します"),le(U)):console.log("❌ 削除条件を満たしていません - サーバー削除をスキップ")}},le=async q=>{if(console.log("🚀 handleImmediateDelete 開始:",{field:q}),!p||!s.id||!w){console.log("❌ handleImmediateDelete: 必要な条件が不足",{selectedCar:!!p,userId:!!s.id,currentCarSettings:!!w});return}console.log("📋 削除対象の情報:",{carSettingsId:w.id,userId:s.id,carId:p.car_id,field:q});try{const U={user_id:s.id,car_id:p.car_id};switch(q){case"logoMarkImageUrl":U.delete_logo_mark_image=!0;break;case"originalNumberImageUrl":U.delete_original_number_image=!0;break;case"front":U.delete_car_photo_front=!0;break;case"side":U.delete_car_photo_side=!0;break;case"rear":U.delete_car_photo_rear=!0;break;case"front_angled_7_3":U.delete_car_photo_diagonal=!0;break}console.log("📤 API削除リクエスト送信:",U);const te=await Fw(w.id,U);if(console.log("📥 API削除レスポンス:",te),te){console.log("✅ サーバー削除成功 - CarSettingsを再読み込み");const ne=await Dg(s.id,p.car_id);console.log("🔄 再読み込み結果:",ne),ne.length>0&&v(ne[0]),V("success","画像を削除しました")}else console.log("❌ サーバー削除失敗"),V("error","画像の削除に失敗しました")}catch(U){console.error("画像削除エラー:",U),V("error","画像の削除に失敗しました")}},ee=async()=>{if(!p||!s.id||!w){V("error","削除対象の愛車設定が見つかりません");return}const q=X(p),U=`愛車「${q}」の設定を完全に削除しますか？

この操作は元に戻すことができません。
- 保存されたすべての画像
- ナンバープレートの設定
- 愛車名前の設定

すべてが削除されます。`;if(window.confirm(U)){j(!0);try{await Yw(w.id,ne=>{console.error("愛車設定削除エラー:",ne)})?(v(null),S({}),u(Wl()),V("success",`愛車「${q}」の設定を削除しました`)):V("error","愛車設定の削除に失敗しました")}catch(te){console.error("愛車設定削除処理エラー:",te),V("error","愛車設定の削除に失敗しました")}finally{j(!1)}}},ae=async q=>{if(q.preventDefault(),!p||!s.id){V("error","愛車が選択されていません");return}j(!0);try{const U={user_id:s.id,car_id:p.car_id,license_plate_text:o.numberManagement.licensePlateText||"",car_name:o.referenceRegistration.favoriteCarName||"",...z},te=await $w(U,ne=>{console.error("CarSettings保存エラー:",ne)});te?(v(te),S({}),V("success","設定を保存しました"),n(o)):V("error","設定の保存に失敗しました")}catch(U){console.error("CarSettings保存処理エラー:",U),V("error","設定の保存に失敗しました")}finally{j(!1)}},K=q=>{if(!w)return;let U;switch(q){case"front":U=w.car_photo_front_url||void 0;break;case"side":U=w.car_photo_side_url||void 0;break;case"rear":U=w.car_photo_rear_url||void 0;break;case"front_angled_7_3":case"rear_angled_7_3":U=w.car_photo_diagonal_url||void 0;break;default:U=void 0}return U};return l.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:[l.jsxs("form",{onSubmit:ae,className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-indigo-400",children:"愛車設定"}),l.jsx("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-white p-1 rounded-full hover:bg-gray-700",children:l.jsx(vt,{className:"w-7 h-7"})})]}),l.jsxs("div",{className:"overflow-y-auto space-y-6 custom-scrollbar pr-2 flex-grow",children:[l.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"愛車"}),l.jsx("div",{className:"text-lg text-white",children:p?X(p):"車両を選択してください"})]}),(p==null?void 0:p.car_image_url)&&l.jsx("div",{className:"flex-shrink-0",children:l.jsx("img",{src:p.car_image_url,alt:X(p),className:"w-16 h-16 object-cover rounded-lg border border-gray-600",onError:q=>{q.currentTarget.style.display="none"}})})]}),d.length>=1&&l.jsx("button",{type:"button",onClick:()=>b(!0),className:"px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white text-sm rounded-md transition-colors",children:"変更"})]})}),l.jsxs("section",{className:"space-y-4 p-4 bg-gray-700/50 rounded-lg",children:[l.jsx("h3",{className:"text-xl font-medium text-indigo-300 border-b border-gray-600 pb-2",children:"ナンバー管理"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nmLicensePlateText",className:"block text-sm font-medium text-gray-300 mb-1",children:"文字列 (例: 横浜 330 な 2960)"}),l.jsx("input",{type:"text",id:"nmLicensePlateText",name:"numberManagement.licensePlateText",value:o.numberManagement.licensePlateText||"",onChange:G,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded-md text-gray-200 placeholder-gray-500 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"横浜 330 な 2960"})]}),l.jsx(di,{ref:O,label:"ロゴマーク画像",initialPreviewUrl:(w==null?void 0:w.logo_mark_image_url)||void 0,showDeleteButton:!0,onImageSelect:q=>re("numberManagement","logoMarkImageUrl",q)}),l.jsx(di,{ref:ie,label:"オリジナルナンバー画像",initialPreviewUrl:(w==null?void 0:w.original_number_image_url)||void 0,showDeleteButton:!0,onImageSelect:q=>re("numberManagement","originalNumberImageUrl",q)})]}),l.jsxs("section",{className:"space-y-4 p-4 bg-gray-700/50 rounded-lg",children:[l.jsx("h3",{className:"text-xl font-medium text-indigo-300 border-b border-gray-600 pb-2",children:"リファレンス登録"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"rrFavoriteCarName",className:"block text-sm font-medium text-gray-300 mb-1",children:"愛車名前"}),l.jsx("input",{type:"text",id:"rrFavoriteCarName",name:"referenceRegistration.favoriteCarName",value:o.referenceRegistration.favoriteCarName||"",onChange:G,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded-md text-gray-200 placeholder-gray-500 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"車両名"})]}),l.jsx("h4",{className:"text-md font-medium text-gray-300 pt-2",children:"愛車写真登録"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:o.referenceRegistration.carPhotos.map(q=>l.jsx(di,{ref:T.current[q.viewAngle],label:q.label,initialPreviewUrl:K(q.viewAngle),showDeleteButton:!0,onImageSelect:U=>re("referenceRegistration",q.viewAngle,U)},q.viewAngle))})]})]}),l.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-700 flex justify-between items-center",children:[l.jsx("div",{children:w&&p&&l.jsxs("button",{type:"button",onClick:ee,disabled:A,className:"px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-800 disabled:opacity-50 text-white font-medium rounded-lg transition flex items-center",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),A?"削除中...":"設定を削除"]})}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{type:"button",onClick:r,className:"px-6 py-2.5 bg-gray-600 hover:bg-gray-500 text-gray-200 font-medium rounded-lg transition",children:"キャンセル"}),l.jsxs("button",{type:"submit",disabled:A,className:"px-6 py-2.5 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-800 disabled:opacity-50 text-white font-medium rounded-lg transition flex items-center",children:[l.jsx(Hp,{className:"w-5 h-5 mr-2"}),A?"保存中...":"保存"]})]})]})]}),x&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-xl font-medium text-indigo-300",children:"愛車を選択"}),l.jsx("button",{type:"button",onClick:()=>b(!1),className:"text-gray-400 hover:text-white p-1 rounded-full hover:bg-gray-700",children:l.jsx(vt,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:d.map(q=>l.jsx("button",{type:"button",onClick:()=>{m(q),b(!1)},className:`w-full text-left p-3 rounded-lg transition-colors ${(p==null?void 0:p.car_id)===q.car_id?"bg-indigo-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-200"}`,children:l.jsxs("div",{className:"flex items-center space-x-3",children:[q.car_image_url?l.jsx("div",{className:"flex-shrink-0",children:l.jsx("img",{src:q.car_image_url,alt:X(q),className:"w-12 h-12 object-cover rounded-lg border border-gray-600",onError:U=>{U.currentTarget.style.display="none"}})}):l.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-600 rounded-lg flex items-center justify-center",children:l.jsx("div",{className:"text-xs text-gray-400",children:"🚗"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("div",{className:"font-medium",children:X(q)}),l.jsxs("div",{className:`text-sm ${(p==null?void 0:p.car_id)===q.car_id?"text-indigo-200":"text-gray-400"}`,children:[q.car_brand_n," ",q.car_model_n]})]})]})},q.car_id))})]})})]})},Kw=()=>{const{toastMessage:s,toastType:n,clearToast:r}=wn();if(C.useEffect(()=>{if(s&&n){const d=setTimeout(()=>{r()},3e3);return()=>clearTimeout(d)}},[s,n,r]),!s||!n)return null;const o=()=>{switch(n){case"success":return l.jsx(Hp,{className:"w-6 h-6 text-green-400"});case"error":return l.jsx(o1,{className:"w-6 h-6 text-red-400"});case"info":return l.jsx(c1,{className:"w-6 h-6 text-blue-400"});default:return null}},u=()=>{switch(n){case"success":return"bg-green-600 border-green-500";case"error":return"bg-red-600 border-red-500";case"info":return"bg-blue-600 border-blue-500";default:return"bg-gray-700 border-gray-600"}};return l.jsx("div",{className:`fixed bottom-5 right-5 z-[100] p-4 rounded-lg shadow-2xl border text-white transition-all duration-300 ease-in-out transform ${u()}`,role:"alert","aria-live":"assertive",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 mr-3",children:o()}),l.jsx("div",{className:"flex-grow text-sm font-medium",children:s}),l.jsx("button",{onClick:r,className:"ml-4 -mr-1 p-1 rounded-md hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white","aria-label":"通知を閉じる",children:l.jsx(vt,{className:"w-5 h-5"})})]})})},Zw=({params:s,onClose:n})=>(C.useEffect(()=>{const r=(o,u)=>{let d=document.querySelector(`meta[property="${o}"]`)||document.querySelector(`meta[name="${o}"]`);d||(d=document.createElement("meta"),o.startsWith("og:")||o.startsWith("twitter:")?d.setAttribute("property",o):d.setAttribute("name",o),document.head.appendChild(d)),d.setAttribute("content",u)};return r("og:title",`${va} - ${s.sharedByUser}さんの生成画像`),r("og:description",s.sharedPrompt||"画像生成アプリで作成された画像をシェア"),r("og:image",s.sharedImageUrl),r("og:url",window.location.href),r("og:type","website"),r("twitter:card","summary_large_image"),r("twitter:title",`${va} - ${s.sharedByUser}さんの生成画像`),r("twitter:description",s.sharedPrompt||"画像生成アプリで作成された画像をシェア"),r("twitter:image",s.sharedImageUrl),document.title=`${va} - ${s.sharedByUser}さんの生成画像`,()=>{document.title=va}},[s]),l.jsx("div",{className:"fixed inset-0 bg-gray-900 text-gray-100 flex flex-col items-center justify-center p-4 z-[100]",children:l.jsxs("div",{className:"bg-gray-800 shadow-2xl rounded-lg w-full max-w-2xl p-6 md:p-8 relative overflow-y-auto max-h-[95vh] custom-scrollbar",children:[l.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white p-2 rounded-full hover:bg-gray-700 transition-colors","aria-label":"共有ビューを閉じる",children:l.jsx(vt,{className:"w-7 h-7"})}),l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("img",{src:"https://is1-ssl.mzstatic.com/image/thumb/Purple211/v4/6d/23/22/6d2322a2-79d0-4009-6663-b46e08de5283/AppIcon-1x_U007epad-0-9-0-0-0-0-85-220-0.png/1200x600wa.png",alt:"AISHA Logo",className:"h-12 w-12 rounded-lg mr-4 object-contain"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-indigo-400",children:va}),l.jsx("p",{className:"text-sm text-gray-400",children:"共有された画像"})]})]}),s.sharedImageUrl?l.jsx("div",{className:"mb-6 rounded-lg overflow-hidden shadow-lg bg-gray-700/50",children:l.jsx("img",{src:s.sharedImageUrl,alt:s.sharedMenuName||"共有された画像",className:"w-full h-auto max-h-[60vh] object-contain"})}):l.jsx("div",{className:"mb-6 p-8 text-center bg-gray-700/50 rounded-lg",children:l.jsx("p",{className:"text-xl text-red-400",children:"画像が見つかりませんでした。"})}),l.jsxs("div",{className:"space-y-3 text-sm md:text-base",children:[s.sharedMenuName&&l.jsxs("div",{className:"flex items-start",children:[l.jsx(Wt,{className:"w-5 h-5 mr-2 mt-0.5 text-indigo-400 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-300",children:"メニュー名:"}),l.jsx("p",{className:"text-gray-200 ml-1",children:s.sharedMenuName})]})]}),s.sharedPrompt&&l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ip,{className:"w-5 h-5 mr-2 mt-0.5 text-indigo-400 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-gray-300",children:"プロンプト概要:"}),l.jsx("p",{className:"text-gray-200 ml-1 break-words",children:s.sharedPrompt})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(xi,{className:"w-5 h-5 mr-2 text-indigo-400 flex-shrink-0"}),l.jsx("span",{className:"font-semibold text-gray-300",children:"共有者:"}),l.jsx("p",{className:"text-gray-200 ml-1",children:s.sharedByUser})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(ji,{className:"w-5 h-5 mr-2 text-indigo-400 flex-shrink-0"}),l.jsx("span",{className:"font-semibold text-gray-300",children:"共有日時:"}),l.jsx("p",{className:"text-gray-200 ml-1",children:new Date(s.sharedDate).toLocaleString("ja-JP")})]})]}),l.jsx("button",{onClick:n,className:"mt-8 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-4 rounded-lg transition duration-150 ease-in-out",children:"アプリに戻る"}),l.jsx("p",{className:"text-xs text-center text-gray-500 mt-4",children:"これは共有専用の表示です。"})]})})),Qw=()=>{};var zg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=function(s){const n=[];let r=0;for(let o=0;o<s.length;o++){let u=s.charCodeAt(o);u<128?n[r++]=u:u<2048?(n[r++]=u>>6|192,n[r++]=u&63|128):(u&64512)===55296&&o+1<s.length&&(s.charCodeAt(o+1)&64512)===56320?(u=65536+((u&1023)<<10)+(s.charCodeAt(++o)&1023),n[r++]=u>>18|240,n[r++]=u>>12&63|128,n[r++]=u>>6&63|128,n[r++]=u&63|128):(n[r++]=u>>12|224,n[r++]=u>>6&63|128,n[r++]=u&63|128)}return n},Jw=function(s){const n=[];let r=0,o=0;for(;r<s.length;){const u=s[r++];if(u<128)n[o++]=String.fromCharCode(u);else if(u>191&&u<224){const d=s[r++];n[o++]=String.fromCharCode((u&31)<<6|d&63)}else if(u>239&&u<365){const d=s[r++],h=s[r++],p=s[r++],m=((u&7)<<18|(d&63)<<12|(h&63)<<6|p&63)-65536;n[o++]=String.fromCharCode(55296+(m>>10)),n[o++]=String.fromCharCode(56320+(m&1023))}else{const d=s[r++],h=s[r++];n[o++]=String.fromCharCode((u&15)<<12|(d&63)<<6|h&63)}}return n.join("")},_x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,n){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let u=0;u<s.length;u+=3){const d=s[u],h=u+1<s.length,p=h?s[u+1]:0,m=u+2<s.length,x=m?s[u+2]:0,b=d>>2,w=(d&3)<<4|p>>4;let v=(p&15)<<2|x>>6,A=x&63;m||(A=64,h||(v=64)),o.push(r[b],r[w],r[v],r[A])}return o.join("")},encodeString(s,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(s):this.encodeByteArray(Sx(s),n)},decodeString(s,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(s):Jw(this.decodeStringToByteArray(s,n))},decodeStringToByteArray(s,n){this.init_();const r=n?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let u=0;u<s.length;){const d=r[s.charAt(u++)],p=u<s.length?r[s.charAt(u)]:0;++u;const x=u<s.length?r[s.charAt(u)]:64;++u;const w=u<s.length?r[s.charAt(u)]:64;if(++u,d==null||p==null||x==null||w==null)throw new Ww;const v=d<<2|p>>4;if(o.push(v),x!==64){const A=p<<4&240|x>>2;if(o.push(A),w!==64){const j=x<<6&192|w;o.push(j)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Ww extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e5=function(s){const n=Sx(s);return _x.encodeByteArray(n,!0)},jx=function(s){return e5(s).replace(/\./g,"")},Cx=function(s){try{return _x.decodeString(s,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=()=>t5().__FIREBASE_DEFAULTS__,a5=()=>{if(typeof process>"u"||typeof zg>"u")return;const s=zg.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},s5=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const n=s&&Cx(s[1]);return n&&JSON.parse(n)},nf=()=>{try{return Qw()||n5()||a5()||s5()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},r5=s=>{var n,r;return(r=(n=nf())===null||n===void 0?void 0:n.emulatorHosts)===null||r===void 0?void 0:r[s]},Ex=()=>{var s;return(s=nf())===null||s===void 0?void 0:s.config},Ax=s=>{var n;return(n=nf())===null||n===void 0?void 0:n[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}wrapCallback(n){return(r,o)=>{r?this.reject(r):this.resolve(o),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(r):n(r,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function l5(s){return(await fetch(s,{credentials:"include"})).ok}const fi={};function o5(){const s={prod:[],emulator:[]};for(const n of Object.keys(fi))fi[n]?s.emulator.push(n):s.prod.push(n);return s}function c5(s){let n=document.getElementById(s),r=!1;return n||(n=document.createElement("div"),n.setAttribute("id",s),r=!0),{created:r,element:n}}let Pg=!1;function u5(s,n){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||fi[s]===n||fi[s]||Pg)return;fi[s]=n;function r(v){return`__firebase__banner__${v}`}const o="__firebase__banner",d=o5().prod.length>0;function h(){const v=document.getElementById(o);v&&v.remove()}function p(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function m(v,A){v.setAttribute("width","24"),v.setAttribute("id",A),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function x(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Pg=!0,h()},v}function b(v,A){v.setAttribute("id",A),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function w(){const v=c5(o),A=r("text"),j=document.getElementById(A)||document.createElement("span"),z=r("learnmore"),S=document.getElementById(z)||document.createElement("a"),V=r("preprendIcon"),X=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const O=v.element;p(O),b(S,z);const ie=x();m(X,V),O.append(X,j,S,ie),document.body.appendChild(O)}d?(j.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function f5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function h5(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function m5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function g5(){const s=jt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function p5(){try{return typeof indexedDB=="object"}catch{return!1}}function x5(){return new Promise((s,n)=>{try{let r=!0;const o="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(o);u.onsuccess=()=>{u.result.close(),r||self.indexedDB.deleteDatabase(o),s(!0)},u.onupgradeneeded=()=>{r=!1},u.onerror=()=>{var d;n(((d=u.error)===null||d===void 0?void 0:d.message)||"")}}catch(r){n(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5="FirebaseError";class Ra extends Error{constructor(n,r,o){super(r),this.code=n,this.customData=o,this.name=y5,Object.setPrototypeOf(this,Ra.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ti.prototype.create)}}class Ti{constructor(n,r,o){this.service=n,this.serviceName=r,this.errors=o}create(n,...r){const o=r[0]||{},u=`${this.service}/${n}`,d=this.errors[n],h=d?b5(d,o):"Error",p=`${this.serviceName}: ${h} (${u}).`;return new Ra(u,p,o)}}function b5(s,n){return s.replace(v5,(r,o)=>{const u=n[o];return u!=null?String(u):`<${o}?>`})}const v5=/\{\$([^}]+)}/g;function w5(s){for(const n in s)if(Object.prototype.hasOwnProperty.call(s,n))return!1;return!0}function Ws(s,n){if(s===n)return!0;const r=Object.keys(s),o=Object.keys(n);for(const u of r){if(!o.includes(u))return!1;const d=s[u],h=n[u];if(Hg(d)&&Hg(h)){if(!Ws(d,h))return!1}else if(d!==h)return!1}for(const u of o)if(!r.includes(u))return!1;return!0}function Hg(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(s){const n=[];for(const[r,o]of Object.entries(s))Array.isArray(o)?o.forEach(u=>{n.push(encodeURIComponent(r)+"="+encodeURIComponent(u))}):n.push(encodeURIComponent(r)+"="+encodeURIComponent(o));return n.length?"&"+n.join("&"):""}function N5(s,n){const r=new S5(s,n);return r.subscribe.bind(r)}class S5{constructor(n,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{n(this)}).catch(o=>{this.error(o)})}next(n){this.forEachObserver(r=>{r.next(n)})}error(n){this.forEachObserver(r=>{r.error(n)}),this.close(n)}complete(){this.forEachObserver(n=>{n.complete()}),this.close()}subscribe(n,r,o){let u;if(n===void 0&&r===void 0&&o===void 0)throw new Error("Missing Observer.");_5(n,["next","error","complete"])?u=n:u={next:n,error:r,complete:o},u.next===void 0&&(u.next=dd),u.error===void 0&&(u.error=dd),u.complete===void 0&&(u.complete=dd);const d=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?u.error(this.finalError):u.complete()}catch{}}),this.observers.push(u),d}unsubscribeOne(n){this.observers===void 0||this.observers[n]===void 0||(delete this.observers[n],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(n){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,n)}sendOne(n,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[n]!==void 0)try{r(this.observers[n])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(n){this.finalized||(this.finalized=!0,n!==void 0&&(this.finalError=n),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _5(s,n){if(typeof s!="object"||s===null)return!1;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}function dd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(s){return s&&s._delegate?s._delegate:s}class er{constructor(n,r,o){this.name=n,this.instanceFactory=r,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(n,r){this.name=n,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const r=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(r)){const o=new i5;if(this.instancesDeferred.set(r,o),this.isInitialized(r)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:r});u&&o.resolve(u)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(n){var r;const o=this.normalizeInstanceIdentifier(n==null?void 0:n.identifier),u=(r=n==null?void 0:n.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(d){if(u)return null;throw d}else{if(u)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(E5(n))try{this.getOrInitializeService({instanceIdentifier:Ja})}catch{}for(const[r,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(r);try{const d=this.getOrInitializeService({instanceIdentifier:u});o.resolve(d)}catch{}}}}clearInstance(n=Ja){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(n=Ja){return this.instances.has(n)}getOptions(n=Ja){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:r={}}=n,o=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:o,options:r});for(const[d,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(d);o===p&&h.resolve(u)}return u}onInit(n,r){var o;const u=this.normalizeInstanceIdentifier(r),d=(o=this.onInitCallbacks.get(u))!==null&&o!==void 0?o:new Set;d.add(n),this.onInitCallbacks.set(u,d);const h=this.instances.get(u);return h&&n(h,u),()=>{d.delete(n)}}invokeOnInitCallbacks(n,r){const o=this.onInitCallbacks.get(r);if(o)for(const u of o)try{u(n,r)}catch{}}getOrInitializeService({instanceIdentifier:n,options:r={}}){let o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:C5(n),options:r}),this.instances.set(n,o),this.instancesOptions.set(n,r),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch{}return o||null}normalizeInstanceIdentifier(n=Ja){return this.component?this.component.multipleInstances?n:Ja:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C5(s){return s===Ja?void 0:s}function E5(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const r=this.getProvider(n.name);if(r.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);r.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const r=new j5(n,this);return this.providers.set(n,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ve||(Ve={}));const T5={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},R5=Ve.INFO,k5={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},O5=(s,n,...r)=>{if(n<s.logLevel)return;const o=new Date().toISOString(),u=k5[n];if(u)console[u](`[${o}]  ${s.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)};class Tx{constructor(n){this.name=n,this._logLevel=R5,this._logHandler=O5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in Ve))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?T5[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...n),this._logHandler(this,Ve.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...n),this._logHandler(this,Ve.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...n),this._logHandler(this,Ve.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...n),this._logHandler(this,Ve.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...n),this._logHandler(this,Ve.ERROR,...n)}}const M5=(s,n)=>n.some(r=>s instanceof r);let Bg,Vg;function I5(){return Bg||(Bg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D5(){return Vg||(Vg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rx=new WeakMap,Dd=new WeakMap,kx=new WeakMap,fd=new WeakMap,af=new WeakMap;function U5(s){const n=new Promise((r,o)=>{const u=()=>{s.removeEventListener("success",d),s.removeEventListener("error",h)},d=()=>{r(Ca(s.result)),u()},h=()=>{o(s.error),u()};s.addEventListener("success",d),s.addEventListener("error",h)});return n.then(r=>{r instanceof IDBCursor&&Rx.set(r,s)}).catch(()=>{}),af.set(n,s),n}function L5(s){if(Dd.has(s))return;const n=new Promise((r,o)=>{const u=()=>{s.removeEventListener("complete",d),s.removeEventListener("error",h),s.removeEventListener("abort",h)},d=()=>{r(),u()},h=()=>{o(s.error||new DOMException("AbortError","AbortError")),u()};s.addEventListener("complete",d),s.addEventListener("error",h),s.addEventListener("abort",h)});Dd.set(s,n)}let Ud={get(s,n,r){if(s instanceof IDBTransaction){if(n==="done")return Dd.get(s);if(n==="objectStoreNames")return s.objectStoreNames||kx.get(s);if(n==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ca(s[n])},set(s,n,r){return s[n]=r,!0},has(s,n){return s instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in s}};function z5(s){Ud=s(Ud)}function P5(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...r){const o=s.call(hd(this),n,...r);return kx.set(o,n.sort?n.sort():[n]),Ca(o)}:D5().includes(s)?function(...n){return s.apply(hd(this),n),Ca(Rx.get(this))}:function(...n){return Ca(s.apply(hd(this),n))}}function H5(s){return typeof s=="function"?P5(s):(s instanceof IDBTransaction&&L5(s),M5(s,I5())?new Proxy(s,Ud):s)}function Ca(s){if(s instanceof IDBRequest)return U5(s);if(fd.has(s))return fd.get(s);const n=H5(s);return n!==s&&(fd.set(s,n),af.set(n,s)),n}const hd=s=>af.get(s);function B5(s,n,{blocked:r,upgrade:o,blocking:u,terminated:d}={}){const h=indexedDB.open(s,n),p=Ca(h);return o&&h.addEventListener("upgradeneeded",m=>{o(Ca(h.result),m.oldVersion,m.newVersion,Ca(h.transaction),m)}),r&&h.addEventListener("blocked",m=>r(m.oldVersion,m.newVersion,m)),p.then(m=>{d&&m.addEventListener("close",()=>d()),u&&m.addEventListener("versionchange",x=>u(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const V5=["get","getKey","getAll","getAllKeys","count"],q5=["put","add","delete","clear"],md=new Map;function qg(s,n){if(!(s instanceof IDBDatabase&&!(n in s)&&typeof n=="string"))return;if(md.get(n))return md.get(n);const r=n.replace(/FromIndex$/,""),o=n!==r,u=q5.includes(r);if(!(r in(o?IDBIndex:IDBObjectStore).prototype)||!(u||V5.includes(r)))return;const d=async function(h,...p){const m=this.transaction(h,u?"readwrite":"readonly");let x=m.store;return o&&(x=x.index(p.shift())),(await Promise.all([x[r](...p),u&&m.done]))[0]};return md.set(n,d),d}z5(s=>({...s,get:(n,r,o)=>qg(n,r)||s.get(n,r,o),has:(n,r)=>!!qg(n,r)||s.has(n,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(r=>{if($5(r)){const o=r.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(r=>r).join(" ")}}function $5(s){const n=s.getComponent();return(n==null?void 0:n.type)==="VERSION"}const Ld="@firebase/app",Gg="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new Tx("@firebase/app"),F5="@firebase/app-compat",Y5="@firebase/analytics-compat",X5="@firebase/analytics",K5="@firebase/app-check-compat",Z5="@firebase/app-check",Q5="@firebase/auth",J5="@firebase/auth-compat",W5="@firebase/database",eN="@firebase/data-connect",tN="@firebase/database-compat",nN="@firebase/functions",aN="@firebase/functions-compat",sN="@firebase/installations",rN="@firebase/installations-compat",iN="@firebase/messaging",lN="@firebase/messaging-compat",oN="@firebase/performance",cN="@firebase/performance-compat",uN="@firebase/remote-config",dN="@firebase/remote-config-compat",fN="@firebase/storage",hN="@firebase/storage-compat",mN="@firebase/firestore",gN="@firebase/ai",pN="@firebase/firestore-compat",xN="firebase",yN="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="[DEFAULT]",bN={[Ld]:"fire-core",[F5]:"fire-core-compat",[X5]:"fire-analytics",[Y5]:"fire-analytics-compat",[Z5]:"fire-app-check",[K5]:"fire-app-check-compat",[Q5]:"fire-auth",[J5]:"fire-auth-compat",[W5]:"fire-rtdb",[eN]:"fire-data-connect",[tN]:"fire-rtdb-compat",[nN]:"fire-fn",[aN]:"fire-fn-compat",[sN]:"fire-iid",[rN]:"fire-iid-compat",[iN]:"fire-fcm",[lN]:"fire-fcm-compat",[oN]:"fire-perf",[cN]:"fire-perf-compat",[uN]:"fire-rc",[dN]:"fire-rc-compat",[fN]:"fire-gcs",[hN]:"fire-gcs-compat",[mN]:"fire-fst",[pN]:"fire-fst-compat",[gN]:"fire-vertex","fire-js":"fire-js",[xN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new Map,vN=new Map,Pd=new Map;function $g(s,n){try{s.container.addComponent(n)}catch(r){Gn.debug(`Component ${n.name} failed to register with FirebaseApp ${s.name}`,r)}}function Ni(s){const n=s.name;if(Pd.has(n))return Gn.debug(`There were multiple attempts to register component ${n}.`),!1;Pd.set(n,s);for(const r of go.values())$g(r,s);for(const r of vN.values())$g(r,s);return!0}function Ox(s,n){const r=s.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),s.container.getProvider(n)}function bn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ea=new Ti("app","Firebase",wN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(n,r,o){this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw Ea.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=yN;function Mx(s,n={}){let r=s;typeof n!="object"&&(n={name:n});const o=Object.assign({name:zd,automaticDataCollectionEnabled:!0},n),u=o.name;if(typeof u!="string"||!u)throw Ea.create("bad-app-name",{appName:String(u)});if(r||(r=Ex()),!r)throw Ea.create("no-options");const d=go.get(u);if(d){if(Ws(r,d.options)&&Ws(o,d.config))return d;throw Ea.create("duplicate-app",{appName:u})}const h=new A5(u);for(const m of Pd.values())h.addComponent(m);const p=new NN(r,o,h);return go.set(u,p),p}function SN(s=zd){const n=go.get(s);if(!n&&s===zd&&Ex())return Mx();if(!n)throw Ea.create("no-app",{appName:s});return n}function Ks(s,n,r){var o;let u=(o=bN[s])!==null&&o!==void 0?o:s;r&&(u+=`-${r}`);const d=u.match(/\s|\//),h=n.match(/\s|\//);if(d||h){const p=[`Unable to register library "${u}" with version "${n}":`];d&&p.push(`library name "${u}" contains illegal characters (whitespace or "/")`),d&&h&&p.push("and"),h&&p.push(`version name "${n}" contains illegal characters (whitespace or "/")`),Gn.warn(p.join(" "));return}Ni(new er(`${u}-version`,()=>({library:u,version:n}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="firebase-heartbeat-database",jN=1,Si="firebase-heartbeat-store";let gd=null;function Ix(){return gd||(gd=B5(_N,jN,{upgrade:(s,n)=>{switch(n){case 0:try{s.createObjectStore(Si)}catch(r){console.warn(r)}}}}).catch(s=>{throw Ea.create("idb-open",{originalErrorMessage:s.message})})),gd}async function CN(s){try{const r=(await Ix()).transaction(Si),o=await r.objectStore(Si).get(Dx(s));return await r.done,o}catch(n){if(n instanceof Ra)Gn.warn(n.message);else{const r=Ea.create("idb-get",{originalErrorMessage:n==null?void 0:n.message});Gn.warn(r.message)}}}async function Fg(s,n){try{const o=(await Ix()).transaction(Si,"readwrite");await o.objectStore(Si).put(n,Dx(s)),await o.done}catch(r){if(r instanceof Ra)Gn.warn(r.message);else{const o=Ea.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Gn.warn(o.message)}}}function Dx(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=1024,AN=30;class TN{constructor(n){this.container=n,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new kN(r),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var n,r;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=Yg();if(((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(h=>h.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:u}),this._heartbeatsCache.heartbeats.length>AN){const h=ON(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Gn.warn(o)}}async getHeartbeatsHeader(){var n;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Yg(),{heartbeatsToSend:o,unsentEntries:u}=RN(this._heartbeatsCache.heartbeats),d=jx(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=r,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(r){return Gn.warn(r),""}}}function Yg(){return new Date().toISOString().substring(0,10)}function RN(s,n=EN){const r=[];let o=s.slice();for(const u of s){const d=r.find(h=>h.agent===u.agent);if(d){if(d.dates.push(u.date),Xg(r)>n){d.dates.pop();break}}else if(r.push({agent:u.agent,dates:[u.date]}),Xg(r)>n){r.pop();break}o=o.slice(1)}return{heartbeatsToSend:r,unsentEntries:o}}class kN{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return p5()?x5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await CN(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(n){var r;if(await this._canUseIndexedDBPromise){const u=await this.read();return Fg(this.app,{lastSentHeartbeatDate:(r=n.lastSentHeartbeatDate)!==null&&r!==void 0?r:u.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return}async add(n){var r;if(await this._canUseIndexedDBPromise){const u=await this.read();return Fg(this.app,{lastSentHeartbeatDate:(r=n.lastSentHeartbeatDate)!==null&&r!==void 0?r:u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...n.heartbeats]})}else return}}function Xg(s){return jx(JSON.stringify({version:2,heartbeats:s})).length}function ON(s){if(s.length===0)return-1;let n=0,r=s[0].date;for(let o=1;o<s.length;o++)s[o].date<r&&(r=s[o].date,n=o);return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(s){Ni(new er("platform-logger",n=>new G5(n),"PRIVATE")),Ni(new er("heartbeat",n=>new TN(n),"PRIVATE")),Ks(Ld,Gg,s),Ks(Ld,Gg,"esm2017"),Ks("fire-js","")}MN("");function sf(s,n){var r={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&n.indexOf(o)<0&&(r[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(s);u<o.length;u++)n.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(s,o[u])&&(r[o[u]]=s[o[u]]);return r}function Ux(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IN=Ux,Lx=new Ti("auth","Firebase",Ux());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Tx("@firebase/auth");function DN(s,...n){po.logLevel<=Ve.WARN&&po.warn(`Auth (${Ri}): ${s}`,...n)}function lo(s,...n){po.logLevel<=Ve.ERROR&&po.error(`Auth (${Ri}): ${s}`,...n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(s,...n){throw rf(s,...n)}function Bt(s,...n){return rf(s,...n)}function zx(s,n,r){const o=Object.assign(Object.assign({},IN()),{[n]:r});return new Ti("auth","Firebase",o).create(n,{appName:s.name})}function Aa(s){return zx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rf(s,...n){if(typeof s!="string"){const r=n[0],o=[...n.slice(1)];return o[0]&&(o[0].appName=s.name),s._errorFactory.create(r,...o)}return Lx.create(s,...n)}function ce(s,n,...r){if(!s)throw rf(n,...r)}function Hn(s){const n="INTERNAL ASSERTION FAILED: "+s;throw lo(n),new Error(n)}function Fn(s,n){s||Hn(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function Px(){return Kg()==="http:"||Kg()==="https:"}function Kg(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Px()||h5()||"connection"in navigator)?navigator.onLine:!0}function LN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(n,r){this.shortDelay=n,this.longDelay=r,Fn(r>n,"Short delay should be less than long delay!"),this.isMobile=d5()||m5()}get(){return UN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(s,n){Fn(s.emulator,"Emulator should always be set here");const{url:r}=s.emulator;return n?`${r}${n.startsWith("/")?n.slice(1):n}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{static initialize(n,r,o){this.fetchImpl=n,r&&(this.headersImpl=r),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HN=new ki(3e4,6e4);function Nn(s,n){return s.tenantId&&!n.tenantId?Object.assign(Object.assign({},n),{tenantId:s.tenantId}):n}async function un(s,n,r,o,u={}){return Bx(s,u,async()=>{let d={},h={};o&&(n==="GET"?h=o:d={body:JSON.stringify(o)});const p=ir(Object.assign({key:s.config.apiKey},h)).slice(1),m=await s._getAdditionalHeaders();m["Content-Type"]="application/json",s.languageCode&&(m["X-Firebase-Locale"]=s.languageCode);const x=Object.assign({method:n,headers:m},d);return f5()||(x.referrerPolicy="no-referrer"),s.emulatorConfig&&Do(s.emulatorConfig.host)&&(x.credentials="include"),Hx.fetch()(await Vx(s,s.config.apiHost,r,p),x)})}async function Bx(s,n,r){s._canInitEmulator=!1;const o=Object.assign(Object.assign({},zN),n);try{const u=new VN(s),d=await Promise.race([r(),u.promise]);u.clearNetworkTimeout();const h=await d.json();if("needConfirmation"in h)throw ui(s,"account-exists-with-different-credential",h);if(d.ok&&!("errorMessage"in h))return h;{const p=d.ok?h.errorMessage:h.error.message,[m,x]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw ui(s,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw ui(s,"email-already-in-use",h);if(m==="USER_DISABLED")throw ui(s,"user-disabled",h);const b=o[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw zx(s,b,x);$n(s,b)}}catch(u){if(u instanceof Ra)throw u;$n(s,"network-request-failed",{message:String(u)})}}async function Uo(s,n,r,o,u={}){const d=await un(s,n,r,o,u);return"mfaPendingCredential"in d&&$n(s,"multi-factor-auth-required",{_serverResponse:d}),d}async function Vx(s,n,r,o){const u=`${n}${r}?${o}`,d=s,h=d.config.emulator?lf(s.config,u):`${s.config.apiScheme}://${u}`;return PN.includes(r)&&(await d._persistenceManagerAvailable,d._getPersistenceType()==="COOKIE")?d._getPersistence()._getFinalTarget(h).toString():h}function BN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(n){this.auth=n,this.timer=null,this.promise=new Promise((r,o)=>{this.timer=setTimeout(()=>o(Bt(this.auth,"network-request-failed")),HN.get())})}}function ui(s,n,r){const o={appName:s.name};r.email&&(o.email=r.email),r.phoneNumber&&(o.phoneNumber=r.phoneNumber);const u=Bt(s,n,o);return u.customData._tokenResponse=r,u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(s){return s!==void 0&&s.getResponse!==void 0}function Qg(s){return s!==void 0&&s.enterprise!==void 0}class qx{constructor(n){if(this.siteKey="",this.recaptchaEnforcementState=[],n.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=n.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=n.recaptchaEnforcementState}getProviderEnforcementState(n){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===n)return BN(r.enforcementState);return null}isProviderEnabled(n){return this.getProviderEnforcementState(n)==="ENFORCE"||this.getProviderEnforcementState(n)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(s){return(await un(s,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Gx(s,n){return un(s,"GET","/v2/recaptchaConfig",Nn(s,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(s,n){return un(s,"POST","/v1/accounts:delete",n)}async function xo(s,n){return un(s,"POST","/v1/accounts:lookup",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(s){if(s)try{const n=new Date(Number(s));if(!isNaN(n.getTime()))return n.toUTCString()}catch{}}async function $N(s,n=!1){const r=Yn(s),o=await r.getIdToken(n),u=of(o);ce(u&&u.exp&&u.auth_time&&u.iat,r.auth,"internal-error");const d=typeof u.firebase=="object"?u.firebase:void 0,h=d==null?void 0:d.sign_in_provider;return{claims:u,token:o,authTime:hi(pd(u.auth_time)),issuedAtTime:hi(pd(u.iat)),expirationTime:hi(pd(u.exp)),signInProvider:h||null,signInSecondFactor:(d==null?void 0:d.sign_in_second_factor)||null}}function pd(s){return Number(s)*1e3}function of(s){const[n,r,o]=s.split(".");if(n===void 0||r===void 0||o===void 0)return lo("JWT malformed, contained fewer than 3 sections"),null;try{const u=Cx(r);return u?JSON.parse(u):(lo("Failed to decode base64 JWT payload"),null)}catch(u){return lo("Caught error parsing JWT payload as JSON",u==null?void 0:u.toString()),null}}function Jg(s){const n=of(s);return ce(n,"internal-error"),ce(typeof n.exp<"u","internal-error"),ce(typeof n.iat<"u","internal-error"),Number(n.exp)-Number(n.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _i(s,n,r=!1){if(r)return n;try{return await n}catch(o){throw o instanceof Ra&&FN(o)&&s.auth.currentUser===s&&await s.auth.signOut(),o}}function FN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(n){this.user=n,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(n){var r;if(n){const o=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),o}else{this.errorBackoff=3e4;const u=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,u)}}schedule(n=!1){if(!this.isRunning)return;const r=this.getInterval(n);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(n){(n==null?void 0:n.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(n,r){this.createdAt=n,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=hi(this.lastLoginAt),this.creationTime=hi(this.createdAt)}_copy(n){this.createdAt=n.createdAt,this.lastLoginAt=n.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(s){var n;const r=s.auth,o=await s.getIdToken(),u=await _i(s,xo(r,{idToken:o}));ce(u==null?void 0:u.users.length,r,"internal-error");const d=u.users[0];s._notifyReloadListener(d);const h=!((n=d.providerUserInfo)===null||n===void 0)&&n.length?$x(d.providerUserInfo):[],p=KN(s.providerData,h),m=s.isAnonymous,x=!(s.email&&d.passwordHash)&&!(p!=null&&p.length),b=m?x:!1,w={uid:d.localId,displayName:d.displayName||null,photoURL:d.photoUrl||null,email:d.email||null,emailVerified:d.emailVerified||!1,phoneNumber:d.phoneNumber||null,tenantId:d.tenantId||null,providerData:p,metadata:new Bd(d.createdAt,d.lastLoginAt),isAnonymous:b};Object.assign(s,w)}async function XN(s){const n=Yn(s);await yo(n),await n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)}function KN(s,n){return[...s.filter(o=>!n.some(u=>u.providerId===o.providerId)),...n]}function $x(s){return s.map(n=>{var{providerId:r}=n,o=sf(n,["providerId"]);return{providerId:r,uid:o.rawId||"",displayName:o.displayName||null,email:o.email||null,phoneNumber:o.phoneNumber||null,photoURL:o.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(s,n){const r=await Bx(s,{},async()=>{const o=ir({grant_type:"refresh_token",refresh_token:n}).slice(1),{tokenApiHost:u,apiKey:d}=s.config,h=await Vx(s,u,"/v1/token",`key=${d}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:o};return s.emulatorConfig&&Do(s.emulatorConfig.host)&&(m.credentials="include"),Hx.fetch()(h,m)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function QN(s,n){return un(s,"POST","/v2/accounts:revokeToken",Nn(s,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(n){ce(n.idToken,"internal-error"),ce(typeof n.idToken<"u","internal-error"),ce(typeof n.refreshToken<"u","internal-error");const r="expiresIn"in n&&typeof n.expiresIn<"u"?Number(n.expiresIn):Jg(n.idToken);this.updateTokensAndExpiration(n.idToken,n.refreshToken,r)}updateFromIdToken(n){ce(n.length!==0,"internal-error");const r=Jg(n);this.updateTokensAndExpiration(n,null,r)}async getToken(n,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,n,"user-token-expired"),this.refreshToken?(await this.refresh(n,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(n,r){const{accessToken:o,refreshToken:u,expiresIn:d}=await ZN(n,r);this.updateTokensAndExpiration(o,u,Number(d))}updateTokensAndExpiration(n,r,o){this.refreshToken=r||null,this.accessToken=n||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(n,r){const{refreshToken:o,accessToken:u,expirationTime:d}=r,h=new Zs;return o&&(ce(typeof o=="string","internal-error",{appName:n}),h.refreshToken=o),u&&(ce(typeof u=="string","internal-error",{appName:n}),h.accessToken=u),d&&(ce(typeof d=="number","internal-error",{appName:n}),h.expirationTime=d),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(n){this.accessToken=n.accessToken,this.refreshToken=n.refreshToken,this.expirationTime=n.expirationTime}_clone(){return Object.assign(new Zs,this.toJSON())}_performRefresh(){return Hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(s,n){ce(typeof s=="string"||typeof s>"u","internal-error",{appName:n})}class on{constructor(n){var{uid:r,auth:o,stsTokenManager:u}=n,d=sf(n,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=o,this.stsTokenManager=u,this.accessToken=u.accessToken,this.displayName=d.displayName||null,this.email=d.email||null,this.emailVerified=d.emailVerified||!1,this.phoneNumber=d.phoneNumber||null,this.photoURL=d.photoURL||null,this.isAnonymous=d.isAnonymous||!1,this.tenantId=d.tenantId||null,this.providerData=d.providerData?[...d.providerData]:[],this.metadata=new Bd(d.createdAt||void 0,d.lastLoginAt||void 0)}async getIdToken(n){const r=await _i(this,this.stsTokenManager.getToken(this.auth,n));return ce(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(n){return $N(this,n)}reload(){return XN(this)}_assign(n){this!==n&&(ce(this.uid===n.uid,this.auth,"internal-error"),this.displayName=n.displayName,this.photoURL=n.photoURL,this.email=n.email,this.emailVerified=n.emailVerified,this.phoneNumber=n.phoneNumber,this.isAnonymous=n.isAnonymous,this.tenantId=n.tenantId,this.providerData=n.providerData.map(r=>Object.assign({},r)),this.metadata._copy(n.metadata),this.stsTokenManager._assign(n.stsTokenManager))}_clone(n){const r=new on(Object.assign(Object.assign({},this),{auth:n,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(n){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=n,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(n){this.reloadListener?this.reloadListener(n):this.reloadUserInfo=n}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(n,r=!1){let o=!1;n.idToken&&n.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(n),o=!0),r&&await yo(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(Aa(this.auth));const n=await this.getIdToken();return await _i(this,GN(this.auth,{idToken:n})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(n=>Object.assign({},n)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(n,r){var o,u,d,h,p,m,x,b;const w=(o=r.displayName)!==null&&o!==void 0?o:void 0,v=(u=r.email)!==null&&u!==void 0?u:void 0,A=(d=r.phoneNumber)!==null&&d!==void 0?d:void 0,j=(h=r.photoURL)!==null&&h!==void 0?h:void 0,z=(p=r.tenantId)!==null&&p!==void 0?p:void 0,S=(m=r._redirectEventId)!==null&&m!==void 0?m:void 0,V=(x=r.createdAt)!==null&&x!==void 0?x:void 0,X=(b=r.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:O,emailVerified:ie,isAnonymous:T,providerData:G,stsTokenManager:re}=r;ce(O&&re,n,"internal-error");const le=Zs.fromJSON(this.name,re);ce(typeof O=="string",n,"internal-error"),ba(w,n.name),ba(v,n.name),ce(typeof ie=="boolean",n,"internal-error"),ce(typeof T=="boolean",n,"internal-error"),ba(A,n.name),ba(j,n.name),ba(z,n.name),ba(S,n.name),ba(V,n.name),ba(X,n.name);const ee=new on({uid:O,auth:n,email:v,emailVerified:ie,displayName:w,isAnonymous:T,photoURL:j,phoneNumber:A,tenantId:z,stsTokenManager:le,createdAt:V,lastLoginAt:X});return G&&Array.isArray(G)&&(ee.providerData=G.map(ae=>Object.assign({},ae))),S&&(ee._redirectEventId=S),ee}static async _fromIdTokenResponse(n,r,o=!1){const u=new Zs;u.updateFromServerResponse(r);const d=new on({uid:r.localId,auth:n,stsTokenManager:u,isAnonymous:o});return await yo(d),d}static async _fromGetAccountInfoResponse(n,r,o){const u=r.users[0];ce(u.localId!==void 0,"internal-error");const d=u.providerUserInfo!==void 0?$x(u.providerUserInfo):[],h=!(u.email&&u.passwordHash)&&!(d!=null&&d.length),p=new Zs;p.updateFromIdToken(o);const m=new on({uid:u.localId,auth:n,stsTokenManager:p,isAnonymous:h}),x={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:d,metadata:new Bd(u.createdAt,u.lastLoginAt),isAnonymous:!(u.email&&u.passwordHash)&&!(d!=null&&d.length)};return Object.assign(m,x),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=new Map;function Bn(s){Fn(s instanceof Function,"Expected a class definition");let n=Wg.get(s);return n?(Fn(n instanceof s,"Instance stored in cache mismatched with class"),n):(n=new s,Wg.set(s,n),n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){const r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}Fx.type="NONE";const ep=Fx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(s,n,r){return`firebase:${s}:${n}:${r}`}class Qs{constructor(n,r,o){this.persistence=n,this.auth=r,this.userKey=o;const{config:u,name:d}=this.auth;this.fullUserKey=oo(this.userKey,u.apiKey,d),this.fullPersistenceKey=oo("persistence",u.apiKey,d),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(n){return this.persistence._set(this.fullUserKey,n.toJSON())}async getCurrentUser(){const n=await this.persistence._get(this.fullUserKey);if(!n)return null;if(typeof n=="string"){const r=await xo(this.auth,{idToken:n}).catch(()=>{});return r?on._fromGetAccountInfoResponse(this.auth,r,n):null}return on._fromJSON(this.auth,n)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(n){if(this.persistence===n)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=n,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(n,r,o="authUser"){if(!r.length)return new Qs(Bn(ep),n,o);const u=(await Promise.all(r.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let d=u[0]||Bn(ep);const h=oo(o,n.config.apiKey,n.name);let p=null;for(const x of r)try{const b=await x._get(h);if(b){let w;if(typeof b=="string"){const v=await xo(n,{idToken:b}).catch(()=>{});if(!v)break;w=await on._fromGetAccountInfoResponse(n,v,b)}else w=on._fromJSON(n,b);x!==d&&(p=w),d=x;break}}catch{}const m=u.filter(x=>x._shouldAllowMigration);return!d._shouldAllowMigration||!m.length?new Qs(d,n,o):(d=m[0],p&&await d._set(h,p.toJSON()),await Promise.all(r.map(async x=>{if(x!==d)try{await x._remove(h)}catch{}})),new Qs(d,n,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(s){const n=s.toLowerCase();if(n.includes("opera/")||n.includes("opr/")||n.includes("opios/"))return"Opera";if(Zx(n))return"IEMobile";if(n.includes("msie")||n.includes("trident/"))return"IE";if(n.includes("edge/"))return"Edge";if(Yx(n))return"Firefox";if(n.includes("silk/"))return"Silk";if(Jx(n))return"Blackberry";if(Wx(n))return"Webos";if(Xx(n))return"Safari";if((n.includes("chrome/")||Kx(n))&&!n.includes("edge/"))return"Chrome";if(Qx(n))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=s.match(r);if((o==null?void 0:o.length)===2)return o[1]}return"Other"}function Yx(s=jt()){return/firefox\//i.test(s)}function Xx(s=jt()){const n=s.toLowerCase();return n.includes("safari/")&&!n.includes("chrome/")&&!n.includes("crios/")&&!n.includes("android")}function Kx(s=jt()){return/crios\//i.test(s)}function Zx(s=jt()){return/iemobile/i.test(s)}function Qx(s=jt()){return/android/i.test(s)}function Jx(s=jt()){return/blackberry/i.test(s)}function Wx(s=jt()){return/webos/i.test(s)}function cf(s=jt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function JN(s=jt()){var n;return cf(s)&&!!(!((n=window.navigator)===null||n===void 0)&&n.standalone)}function WN(){return g5()&&document.documentMode===10}function ey(s=jt()){return cf(s)||Qx(s)||Wx(s)||Jx(s)||/windows phone/i.test(s)||Zx(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(s,n=[]){let r;switch(s){case"Browser":r=tp(jt());break;case"Worker":r=`${tp(jt())}-${s}`;break;default:r=s}const o=n.length?n.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ri}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(n){this.auth=n,this.queue=[]}pushCallback(n,r){const o=d=>new Promise((h,p)=>{try{const m=n(d);h(m)}catch(m){p(m)}});o.onAbort=r,this.queue.push(o);const u=this.queue.length-1;return()=>{this.queue[u]=()=>Promise.resolve()}}async runMiddleware(n){if(this.auth.currentUser===n)return;const r=[];try{for(const o of this.queue)await o(n),o.onAbort&&r.push(o.onAbort)}catch(o){r.reverse();for(const u of r)try{u()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o==null?void 0:o.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(s,n={}){return un(s,"GET","/v2/passwordPolicy",Nn(s,n))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=6;class aS{constructor(n){var r,o,u,d;const h=n.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=h.minPasswordLength)!==null&&r!==void 0?r:nS,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=n.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(u=(o=n.allowedNonAlphanumericCharacters)===null||o===void 0?void 0:o.join(""))!==null&&u!==void 0?u:"",this.forceUpgradeOnSignin=(d=n.forceUpgradeOnSignin)!==null&&d!==void 0?d:!1,this.schemaVersion=n.schemaVersion}validatePassword(n){var r,o,u,d,h,p;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(n,m),this.validatePasswordCharacterOptions(n,m),m.isValid&&(m.isValid=(r=m.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(o=m.meetsMaxPasswordLength)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(u=m.containsLowercaseLetter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(d=m.containsUppercaseLetter)!==null&&d!==void 0?d:!0),m.isValid&&(m.isValid=(h=m.containsNumericCharacter)!==null&&h!==void 0?h:!0),m.isValid&&(m.isValid=(p=m.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),m}validatePasswordLengthOptions(n,r){const o=this.customStrengthOptions.minPasswordLength,u=this.customStrengthOptions.maxPasswordLength;o&&(r.meetsMinPasswordLength=n.length>=o),u&&(r.meetsMaxPasswordLength=n.length<=u)}validatePasswordCharacterOptions(n,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let o;for(let u=0;u<n.length;u++)o=n.charAt(u),this.updatePasswordCharacterOptionsStatuses(r,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(n,r,o,u,d){this.customStrengthOptions.containsLowercaseLetter&&(n.containsLowercaseLetter||(n.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(n.containsUppercaseLetter||(n.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(n.containsNumericCharacter||(n.containsNumericCharacter=u)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(n.containsNonAlphanumericCharacter||(n.containsNonAlphanumericCharacter=d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(n,r,o,u){this.app=n,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=o,this.config=u,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new np(this),this.idTokenSubscription=new np(this),this.beforeStateQueue=new eS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=n.name,this.clientVersion=u.sdkClientVersion,this._persistenceManagerAvailable=new Promise(d=>this._resolvePersistenceManagerAvailable=d)}_initializeWithPersistence(n,r){return r&&(this._popupRedirectResolver=Bn(r)),this._initializationPromise=this.queue(async()=>{var o,u,d;if(!this._deleted&&(this.persistenceManager=await Qs.create(this,n),(o=this._resolvePersistenceManagerAvailable)===null||o===void 0||o.call(this),!this._deleted)){if(!((u=this._popupRedirectResolver)===null||u===void 0)&&u._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((d=this.currentUser)===null||d===void 0?void 0:d.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const n=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!n)){if(this.currentUser&&n&&this.currentUser.uid===n.uid){this._currentUser._assign(n),await this.currentUser.getIdToken();return}await this._updateCurrentUser(n,!0)}}async initializeCurrentUserFromIdToken(n){try{const r=await xo(this,{idToken:n}),o=await on._fromGetAccountInfoResponse(this,r,n);await this.directlySetCurrentUser(o)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(n){var r;if(bn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(p,p))}):this.directlySetCurrentUser(null)}const o=await this.assertedPersistence.getCurrentUser();let u=o,d=!1;if(n&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,p=u==null?void 0:u._redirectEventId,m=await this.tryRedirectSignIn(n);(!h||h===p)&&(m!=null&&m.user)&&(u=m.user,d=!0)}if(!u)return this.directlySetCurrentUser(null);if(!u._redirectEventId){if(d)try{await this.beforeStateQueue.runMiddleware(u)}catch(h){u=o,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return u?this.reloadAndSetCurrentUserOrClear(u):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===u._redirectEventId?this.directlySetCurrentUser(u):this.reloadAndSetCurrentUserOrClear(u)}async tryRedirectSignIn(n){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,n,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(n){try{await yo(n)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(n)}useDeviceLanguage(){this.languageCode=LN()}async _delete(){this._deleted=!0}async updateCurrentUser(n){if(bn(this.app))return Promise.reject(Aa(this));const r=n?Yn(n):null;return r&&ce(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(n,r=!1){if(!this._deleted)return n&&ce(this.tenantId===n.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(n),this.queue(async()=>{await this.directlySetCurrentUser(n),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(Aa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(n){return bn(this.app)?Promise.reject(Aa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bn(n))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(n){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(n)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const n=await tS(this),r=new aS(n);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(n){this._errorFactory=new Ti("auth","Firebase",n())}onAuthStateChanged(n,r,o){return this.registerStateListener(this.authStateSubscription,n,r,o)}beforeAuthStateChanged(n,r){return this.beforeStateQueue.pushCallback(n,r)}onIdTokenChanged(n,r,o){return this.registerStateListener(this.idTokenSubscription,n,r,o)}authStateReady(){return new Promise((n,r)=>{if(this.currentUser)n();else{const o=this.onAuthStateChanged(()=>{o(),n()},r)}})}async revokeAccessToken(n){if(this.currentUser){const r=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:n,idToken:r};this.tenantId!=null&&(o.tenantId=this.tenantId),await QN(this,o)}}toJSON(){var n;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(n=this._currentUser)===null||n===void 0?void 0:n.toJSON()}}async _setRedirectUser(n,r){const o=await this.getOrInitRedirectPersistenceManager(r);return n===null?o.removeCurrentUser():o.setCurrentUser(n)}async getOrInitRedirectPersistenceManager(n){if(!this.redirectPersistenceManager){const r=n&&Bn(n)||this._popupRedirectResolver;ce(r,this,"argument-error"),this.redirectPersistenceManager=await Qs.create(this,[Bn(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(n){var r,o;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===n?this._currentUser:((o=this.redirectUser)===null||o===void 0?void 0:o._redirectEventId)===n?this.redirectUser:null}async _persistUserIfCurrent(n){if(n===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(n))}_notifyListenersIfCurrent(n){n===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const o=(r=(n=this.currentUser)===null||n===void 0?void 0:n.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==o&&(this.lastNotifiedUid=o,this.authStateSubscription.next(this.currentUser))}registerStateListener(n,r,o,u){if(this._deleted)return()=>{};const d=typeof r=="function"?r:r.next.bind(r);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(p,this,"internal-error"),p.then(()=>{h||d(this.currentUser)}),typeof r=="function"){const m=n.addObserver(r,o,u);return()=>{h=!0,m()}}else{const m=n.addObserver(r);return()=>{h=!0,m()}}}async directlySetCurrentUser(n){this.currentUser&&this.currentUser!==n&&this._currentUser._stopProactiveRefresh(),n&&this.isProactiveRefreshEnabled&&n._startProactiveRefresh(),this.currentUser=n,n?await this.assertedPersistence.setCurrentUser(n):await this.assertedPersistence.removeCurrentUser()}queue(n){return this.operations=this.operations.then(n,n),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(n){!n||this.frameworks.includes(n)||(this.frameworks.push(n),this.frameworks.sort(),this.clientVersion=ty(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var n;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const o=await((n=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||n===void 0?void 0:n.getHeartbeatsHeader());o&&(r["X-Firebase-Client"]=o);const u=await this._getAppCheckToken();return u&&(r["X-Firebase-AppCheck"]=u),r}async _getAppCheckToken(){var n;if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||n===void 0?void 0:n.getToken());return r!=null&&r.error&&DN(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function ka(s){return Yn(s)}class np{constructor(n){this.auth=n,this.observer=null,this.addObserver=N5(r=>this.observer=r)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rS(s){Oi=s}function uf(s){return Oi.loadJS(s)}function iS(){return Oi.recaptchaV2Script}function lS(){return Oi.recaptchaEnterpriseScript}function oS(){return Oi.gapiScript}function ny(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=500,uS=6e4,eo=1e12;class dS{constructor(n){this.auth=n,this.counter=eo,this._widgets=new Map}render(n,r){const o=this.counter;return this._widgets.set(o,new mS(n,this.auth.name,r||{})),this.counter++,o}reset(n){var r;const o=n||eo;(r=this._widgets.get(o))===null||r===void 0||r.delete(),this._widgets.delete(o)}getResponse(n){var r;const o=n||eo;return((r=this._widgets.get(o))===null||r===void 0?void 0:r.getResponse())||""}async execute(n){var r;const o=n||eo;return(r=this._widgets.get(o))===null||r===void 0||r.execute(),""}}class fS{constructor(){this.enterprise=new hS}ready(n){n()}execute(n,r){return Promise.resolve("token")}render(n,r){return""}}class hS{ready(n){n()}execute(n,r){return Promise.resolve("token")}render(n,r){return""}}class mS{constructor(n,r,o){this.params=o,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const u=typeof n=="string"?document.getElementById(n):n;ce(u,"argument-error",{appName:r}),this.container=u,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=gS(50);const{callback:n,"expired-callback":r}=this.params;if(n)try{n(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,r)try{r()}catch{}this.isVisible&&this.execute()},uS)},cS))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function gS(s){const n=[],r="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let o=0;o<s;o++)n.push(r.charAt(Math.floor(Math.random()*r.length)));return n.join("")}const pS="recaptcha-enterprise",mi="NO_RECAPTCHA";class ay{constructor(n){this.type=pS,this.auth=ka(n)}async verify(n="verify",r=!1){async function o(d){if(!r){if(d.tenantId==null&&d._agentRecaptchaConfig!=null)return d._agentRecaptchaConfig.siteKey;if(d.tenantId!=null&&d._tenantRecaptchaConfigs[d.tenantId]!==void 0)return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(async(h,p)=>{Gx(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const x=new qx(m);return d.tenantId==null?d._agentRecaptchaConfig=x:d._tenantRecaptchaConfigs[d.tenantId]=x,h(x.siteKey)}}).catch(m=>{p(m)})})}function u(d,h,p){const m=window.grecaptcha;Qg(m)?m.enterprise.ready(()=>{m.enterprise.execute(d,{action:n}).then(x=>{h(x)}).catch(()=>{h(mi)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fS().execute("siteKey",{action:"verify"}):new Promise((d,h)=>{o(this.auth).then(p=>{if(!r&&Qg(window.grecaptcha))u(p,d,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=lS();m.length!==0&&(m+=p),uf(m).then(()=>{u(p,d,h)}).catch(x=>{h(x)})}}).catch(p=>{h(p)})})}}async function xd(s,n,r,o=!1,u=!1){const d=new ay(s);let h;if(u)h=mi;else try{h=await d.verify(r)}catch{h=await d.verify(r,!0)}const p=Object.assign({},n);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const m=p.phoneEnrollmentInfo.phoneNumber,x=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:x,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const m=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return o?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function yd(s,n,r,o,u){var d;if(!((d=s._getRecaptchaConfig())===null||d===void 0)&&d.isProviderEnabled("PHONE_PROVIDER")){const h=await xd(s,n,r);return o(s,h).catch(async p=>{var m;if(((m=s._getRecaptchaConfig())===null||m===void 0?void 0:m.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(p.code==="auth/missing-recaptcha-token"||p.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${r} flow.`);const x=await xd(s,n,r,!1,!0);return o(s,x)}return Promise.reject(p)})}else{const h=await xd(s,n,r,!1,!0);return o(s,h)}}async function xS(s){const n=ka(s),r=await Gx(n,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),o=new qx(r);n.tenantId==null?n._agentRecaptchaConfig=o:n._tenantRecaptchaConfigs[n.tenantId]=o,o.isAnyProviderEnabled()&&new ay(n).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(s,n){const r=Ox(s,"auth");if(r.isInitialized()){const u=r.getImmediate(),d=r.getOptions();if(Ws(d,n??{}))return u;$n(u,"already-initialized")}return r.initialize({options:n})}function bS(s,n){const r=(n==null?void 0:n.persistence)||[],o=(Array.isArray(r)?r:[r]).map(Bn);n!=null&&n.errorMap&&s._updateErrorMap(n.errorMap),s._initializeWithPersistence(o,n==null?void 0:n.popupRedirectResolver)}function vS(s,n,r){const o=ka(s);ce(/^https?:\/\//.test(n),o,"invalid-emulator-scheme");const u=!1,d=sy(n),{host:h,port:p}=wS(n),m=p===null?"":`:${p}`,x={url:`${d}//${h}${m}/`},b=Object.freeze({host:h,port:p,protocol:d.replace(":",""),options:Object.freeze({disableWarnings:u})});if(!o._canInitEmulator){ce(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),ce(Ws(x,o.config.emulator)&&Ws(b,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=x,o.emulatorConfig=b,o.settings.appVerificationDisabledForTesting=!0,Do(h)?(l5(`${d}//${h}${m}`),u5("Auth",!0)):NS()}function sy(s){const n=s.indexOf(":");return n<0?"":s.substr(0,n+1)}function wS(s){const n=sy(s),r=/(\/\/)?([^?#/]+)/.exec(s.substr(n.length));if(!r)return{host:"",port:null};const o=r[2].split("@").pop()||"",u=/^(\[[^\]]+\])(:|$)/.exec(o);if(u){const d=u[1];return{host:d,port:ap(o.substr(d.length+1))}}else{const[d,h]=o.split(":");return{host:d,port:ap(h)}}}function ap(s){if(!s)return null;const n=Number(s);return isNaN(n)?null:n}function NS(){function s(){const n=document.createElement("p"),r=n.style;n.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",n.classList.add("firebase-emulator-warning"),document.body.appendChild(n)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(n,r){this.providerId=n,this.signInMethod=r}toJSON(){return Hn("not implemented")}_getIdTokenResponse(n){return Hn("not implemented")}_linkToIdToken(n,r){return Hn("not implemented")}_getReauthenticationResolver(n){return Hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(s,n){return Uo(s,"POST","/v1/accounts:signInWithIdp",Nn(s,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="http://localhost";class as extends df{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(n){const r=new as(n.providerId,n.signInMethod);return n.idToken||n.accessToken?(n.idToken&&(r.idToken=n.idToken),n.accessToken&&(r.accessToken=n.accessToken),n.nonce&&!n.pendingToken&&(r.nonce=n.nonce),n.pendingToken&&(r.pendingToken=n.pendingToken)):n.oauthToken&&n.oauthTokenSecret?(r.accessToken=n.oauthToken,r.secret=n.oauthTokenSecret):$n("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(n){const r=typeof n=="string"?JSON.parse(n):n,{providerId:o,signInMethod:u}=r,d=sf(r,["providerId","signInMethod"]);if(!o||!u)return null;const h=new as(o,u);return h.idToken=d.idToken||void 0,h.accessToken=d.accessToken||void 0,h.secret=d.secret,h.nonce=d.nonce,h.pendingToken=d.pendingToken||null,h}_getIdTokenResponse(n){const r=this.buildRequest();return Js(n,r)}_linkToIdToken(n,r){const o=this.buildRequest();return o.idToken=r,Js(n,o)}_getReauthenticationResolver(n){const r=this.buildRequest();return r.autoCreate=!1,Js(n,r)}buildRequest(){const n={requestUri:SS,returnSecureToken:!0};if(this.pendingToken)n.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),n.postBody=ir(r)}return n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sp(s,n){return un(s,"POST","/v1/accounts:sendVerificationCode",Nn(s,n))}async function _S(s,n){return Uo(s,"POST","/v1/accounts:signInWithPhoneNumber",Nn(s,n))}async function jS(s,n){const r=await Uo(s,"POST","/v1/accounts:signInWithPhoneNumber",Nn(s,n));if(r.temporaryProof)throw ui(s,"account-exists-with-different-credential",r);return r}const CS={USER_NOT_FOUND:"user-not-found"};async function ES(s,n){const r=Object.assign(Object.assign({},n),{operation:"REAUTH"});return Uo(s,"POST","/v1/accounts:signInWithPhoneNumber",Nn(s,r),CS)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends df{constructor(n){super("phone","phone"),this.params=n}static _fromVerification(n,r){return new gi({verificationId:n,verificationCode:r})}static _fromTokenResponse(n,r){return new gi({phoneNumber:n,temporaryProof:r})}_getIdTokenResponse(n){return _S(n,this._makeVerificationRequest())}_linkToIdToken(n,r){return jS(n,Object.assign({idToken:r},this._makeVerificationRequest()))}_getReauthenticationResolver(n){return ES(n,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:n,phoneNumber:r,verificationId:o,verificationCode:u}=this.params;return n&&r?{temporaryProof:n,phoneNumber:r}:{sessionInfo:o,code:u}}toJSON(){const n={providerId:this.providerId};return this.params.phoneNumber&&(n.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(n.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(n.verificationCode=this.params.verificationCode),this.params.verificationId&&(n.verificationId=this.params.verificationId),n}static fromJSON(n){typeof n=="string"&&(n=JSON.parse(n));const{verificationId:r,verificationCode:o,phoneNumber:u,temporaryProof:d}=n;return!o&&!r&&!u&&!d?null:new gi({verificationId:r,verificationCode:o,phoneNumber:u,temporaryProof:d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(n){this.providerId=n,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(n){this.defaultLanguageCode=n}setCustomParameters(n){return this.customParameters=n,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends ry{constructor(){super(...arguments),this.scopes=[]}addScope(n){return this.scopes.includes(n)||this.scopes.push(n),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends Mi{constructor(){super("facebook.com")}static credential(n){return as._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.FACEBOOK_SIGN_IN_METHOD,accessToken:n})}static credentialFromResult(n){return wa.credentialFromTaggedObject(n)}static credentialFromError(n){return wa.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n||!("oauthAccessToken"in n)||!n.oauthAccessToken)return null;try{return wa.credential(n.oauthAccessToken)}catch{return null}}}wa.FACEBOOK_SIGN_IN_METHOD="facebook.com";wa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends Mi{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return as._fromParams({providerId:Na.PROVIDER_ID,signInMethod:Na.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return Na.credentialFromTaggedObject(n)}static credentialFromError(n){return Na.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:r,oauthAccessToken:o}=n;if(!r&&!o)return null;try{return Na.credential(r,o)}catch{return null}}}Na.GOOGLE_SIGN_IN_METHOD="google.com";Na.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Mi{constructor(){super("github.com")}static credential(n){return as._fromParams({providerId:Sa.PROVIDER_ID,signInMethod:Sa.GITHUB_SIGN_IN_METHOD,accessToken:n})}static credentialFromResult(n){return Sa.credentialFromTaggedObject(n)}static credentialFromError(n){return Sa.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n||!("oauthAccessToken"in n)||!n.oauthAccessToken)return null;try{return Sa.credential(n.oauthAccessToken)}catch{return null}}}Sa.GITHUB_SIGN_IN_METHOD="github.com";Sa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Mi{constructor(){super("twitter.com")}static credential(n,r){return as._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.TWITTER_SIGN_IN_METHOD,oauthToken:n,oauthTokenSecret:r})}static credentialFromResult(n){return _a.credentialFromTaggedObject(n)}static credentialFromError(n){return _a.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthAccessToken:r,oauthTokenSecret:o}=n;if(!r||!o)return null;try{return _a.credential(r,o)}catch{return null}}}_a.TWITTER_SIGN_IN_METHOD="twitter.com";_a.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(n){this.user=n.user,this.providerId=n.providerId,this._tokenResponse=n._tokenResponse,this.operationType=n.operationType}static async _fromIdTokenResponse(n,r,o,u=!1){const d=await on._fromIdTokenResponse(n,o,u),h=rp(o);return new tr({user:d,providerId:h,_tokenResponse:o,operationType:r})}static async _forOperation(n,r,o){await n._updateTokensIfNecessary(o,!0);const u=rp(o);return new tr({user:n,providerId:u,_tokenResponse:o,operationType:r})}}function rp(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends Ra{constructor(n,r,o,u){var d;super(r.code,r.message),this.operationType=o,this.user=u,Object.setPrototypeOf(this,bo.prototype),this.customData={appName:n.name,tenantId:(d=n.tenantId)!==null&&d!==void 0?d:void 0,_serverResponse:r.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(n,r,o,u){return new bo(n,r,o,u)}}function iy(s,n,r,o){return(n==="reauthenticate"?r._getReauthenticationResolver(s):r._getIdTokenResponse(s)).catch(d=>{throw d.code==="auth/multi-factor-auth-required"?bo._fromErrorAndOperation(s,d,n,o):d})}async function AS(s,n,r=!1){const o=await _i(s,n._linkToIdToken(s.auth,await s.getIdToken()),r);return tr._forOperation(s,"link",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(s,n,r=!1){const{auth:o}=s;if(bn(o.app))return Promise.reject(Aa(o));const u="reauthenticate";try{const d=await _i(s,iy(o,u,n,s),r);ce(d.idToken,o,"internal-error");const h=of(d.idToken);ce(h,o,"internal-error");const{sub:p}=h;return ce(s.uid===p,o,"user-mismatch"),tr._forOperation(s,u,d)}catch(d){throw(d==null?void 0:d.code)==="auth/user-not-found"&&$n(o,"user-mismatch"),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ly(s,n,r=!1){if(bn(s.app))return Promise.reject(Aa(s));const o="signIn",u=await iy(s,o,n),d=await tr._fromIdTokenResponse(s,o,u);return r||await s._updateCurrentUser(d.user),d}async function RS(s,n){return ly(ka(s),n)}function kS(s,n,r,o){return Yn(s).onIdTokenChanged(n,r,o)}function OS(s,n,r){return Yn(s).beforeAuthStateChanged(n,r)}function MS(s,n,r,o){return Yn(s).onAuthStateChanged(n,r,o)}function IS(s){return Yn(s).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(s,n){return un(s,"POST","/v2/accounts/mfaEnrollment:start",Nn(s,n))}const vo="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(n,r){this.storageRetriever=n,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(vo,"1"),this.storage.removeItem(vo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(n,r){return this.storage.setItem(n,JSON.stringify(r)),Promise.resolve()}_get(n){const r=this.storage.getItem(n);return Promise.resolve(r?JSON.parse(r):null)}_remove(n){return this.storage.removeItem(n),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=1e3,US=10;class cy extends oy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ey(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const o=this.storage.getItem(r),u=this.localCache[r];o!==u&&n(r,u,o)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}const o=n.key;r?this.detachListener():this.stopPolling();const u=()=>{const h=this.storage.getItem(o);!r&&this.localCache[o]===h||this.notifyListeners(o,h)},d=this.storage.getItem(o);WN()&&d!==n.newValue&&n.newValue!==n.oldValue?setTimeout(u,US):u()}notifyListeners(n,r){this.localCache[n]=r;const o=this.listeners[n];if(o)for(const u of Array.from(o))u(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:o}),!0)})},DS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){const r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}cy.type="LOCAL";const LS=cy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy extends oy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}uy.type="SESSION";const dy=uy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(s){return Promise.all(s.map(async n=>{try{return{fulfilled:!0,value:await n}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(u=>u.isListeningto(n));if(r)return r;const o=new Lo(n);return this.receivers.push(o),o}isListeningto(n){return this.eventTarget===n}async handleEvent(n){const r=n,{eventId:o,eventType:u,data:d}=r.data,h=this.handlersMap[u];if(!(h!=null&&h.size))return;r.ports[0].postMessage({status:"ack",eventId:o,eventType:u});const p=Array.from(h).map(async x=>x(r.origin,d)),m=await zS(p);r.ports[0].postMessage({status:"done",eventId:o,eventType:u,response:m})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lo.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(s="",n=10){let r="";for(let o=0;o<n;o++)r+=Math.floor(Math.random()*10);return s+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(n){this.target=n,this.handlers=new Set}removeMessageHandler(n){n.messageChannel&&(n.messageChannel.port1.removeEventListener("message",n.onMessage),n.messageChannel.port1.close()),this.handlers.delete(n)}async _send(n,r,o=50){const u=typeof MessageChannel<"u"?new MessageChannel:null;if(!u)throw new Error("connection_unavailable");let d,h;return new Promise((p,m)=>{const x=ff("",20);u.port1.start();const b=setTimeout(()=>{m(new Error("unsupported_event"))},o);h={messageChannel:u,onMessage(w){const v=w;if(v.data.eventId===x)switch(v.data.status){case"ack":clearTimeout(b),d=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),p(v.data.response);break;default:clearTimeout(b),clearTimeout(d),m(new Error("invalid_response"));break}}},this.handlers.add(h),u.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:n,eventId:x,data:r},[u.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(){return window}function HS(s){tt().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(){return typeof tt().WorkerGlobalScope<"u"&&typeof tt().importScripts=="function"}async function BS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VS(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function qS(){return hf()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="firebaseLocalStorageDb",GS=1,wo="firebaseLocalStorage",hy="fbase_key";class Ii{constructor(n){this.request=n}toPromise(){return new Promise((n,r)=>{this.request.addEventListener("success",()=>{n(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function zo(s,n){return s.transaction([wo],n?"readwrite":"readonly").objectStore(wo)}function $S(){const s=indexedDB.deleteDatabase(fy);return new Ii(s).toPromise()}function Vd(){const s=indexedDB.open(fy,GS);return new Promise((n,r)=>{s.addEventListener("error",()=>{r(s.error)}),s.addEventListener("upgradeneeded",()=>{const o=s.result;try{o.createObjectStore(wo,{keyPath:hy})}catch(u){r(u)}}),s.addEventListener("success",async()=>{const o=s.result;o.objectStoreNames.contains(wo)?n(o):(o.close(),await $S(),n(await Vd()))})})}async function lp(s,n,r){const o=zo(s,!0).put({[hy]:n,value:r});return new Ii(o).toPromise()}async function FS(s,n){const r=zo(s,!1).get(n),o=await new Ii(r).toPromise();return o===void 0?null:o.value}function op(s,n){const r=zo(s,!0).delete(n);return new Ii(r).toPromise()}const YS=800,XS=3;class my{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vd(),this.db)}async _withRetries(n){let r=0;for(;;)try{const o=await this._openDb();return await n(o)}catch(o){if(r++>XS)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lo._getInstance(qS()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await BS(),!this.activeServiceWorker)return;this.sender=new PS(this.activeServiceWorker);const o=await this.sender._send("ping",{},800);o&&!((n=o[0])===null||n===void 0)&&n.fulfilled&&!((r=o[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||VS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const n=await Vd();return await lp(n,vo,"1"),await op(n,vo),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(o=>lp(o,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){const r=await this._withRetries(o=>FS(o,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>op(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){const n=await this._withRetries(u=>{const d=zo(u,!1).getAll();return new Ii(d).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];const r=[],o=new Set;if(n.length!==0)for(const{fbase_key:u,value:d}of n)o.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(d)&&(this.notifyListeners(u,d),r.push(u));for(const u of Object.keys(this.localCache))this.localCache[u]&&!o.has(u)&&(this.notifyListeners(u,null),r.push(u));return r}notifyListeners(n,r){this.localCache[n]=r;const o=this.listeners[n];if(o)for(const u of Array.from(o))u(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}my.type="LOCAL";const KS=my;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(s,n){return un(s,"POST","/v2/accounts/mfaSignIn:start",Nn(s,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=ny("rcb"),ZS=new ki(3e4,6e4);class QS{constructor(){var n;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((n=tt().grecaptcha)===null||n===void 0)&&n.render)}load(n,r=""){return ce(JS(r),n,"argument-error"),this.shouldResolveImmediately(r)&&Zg(tt().grecaptcha)?Promise.resolve(tt().grecaptcha):new Promise((o,u)=>{const d=tt().setTimeout(()=>{u(Bt(n,"network-request-failed"))},ZS.get());tt()[bd]=()=>{tt().clearTimeout(d),delete tt()[bd];const p=tt().grecaptcha;if(!p||!Zg(p)){u(Bt(n,"internal-error"));return}const m=p.render;p.render=(x,b)=>{const w=m(x,b);return this.counter++,w},this.hostLanguage=r,o(p)};const h=`${iS()}?${ir({onload:bd,render:"explicit",hl:r})}`;uf(h).catch(()=>{clearTimeout(d),u(Bt(n,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(n){var r;return!!(!((r=tt().grecaptcha)===null||r===void 0)&&r.render)&&(n===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function JS(s){return s.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(s)}class WS{async load(n){return new dS(n)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="recaptcha",e_={theme:"light",type:"image"};class t_{constructor(n,r,o=Object.assign({},e_)){this.parameters=o,this.type=pi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ka(n),this.isInvisible=this.parameters.size==="invisible",ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const u=typeof r=="string"?document.getElementById(r):r;ce(u,this.auth,"argument-error"),this.container=u,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new WS:new QS,this.validateStartingState()}async verify(){this.assertNotDestroyed();const n=await this.render(),r=this.getAssertedRecaptcha(),o=r.getResponse(n);return o||new Promise(u=>{const d=h=>{h&&(this.tokenChangeListeners.delete(d),u(h))};this.tokenChangeListeners.add(d),this.isInvisible&&r.execute(n)})}render(){try{this.assertNotDestroyed()}catch(n){return Promise.reject(n)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(n=>{throw this.renderPromise=null,n}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(n=>{this.container.removeChild(n)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(n){return r=>{if(this.tokenChangeListeners.forEach(o=>o(r)),typeof n=="function")n(r);else if(typeof n=="string"){const o=tt()[n];typeof o=="function"&&o(r)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let n=this.container;if(!this.isInvisible){const r=document.createElement("div");n.appendChild(r),n=r}this.widgetId=this.getAssertedRecaptcha().render(n,this.parameters)}return this.widgetId}async init(){ce(Px()&&!hf(),this.auth,"internal-error"),await n_(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const n=await qN(this.auth);ce(n,this.auth,"internal-error"),this.parameters.sitekey=n}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function n_(){let s=null;return new Promise(n=>{if(document.readyState==="complete"){n();return}s=()=>n(),window.addEventListener("load",s)}).catch(n=>{throw s&&window.removeEventListener("load",s),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(n,r){this.verificationId=n,this.onConfirmation=r}confirm(n){const r=gi._fromVerification(this.verificationId,n);return this.onConfirmation(r)}}async function s_(s,n,r){if(bn(s.app))return Promise.reject(Aa(s));const o=ka(s),u=await r_(o,n,Yn(r));return new a_(u,d=>RS(o,d))}async function r_(s,n,r){var o;if(!s._getRecaptchaConfig())try{await xS(s)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let u;if(typeof n=="string"?u={phoneNumber:n}:u=n,"session"in u){const d=u.session;if("phoneNumber"in u){ce(d.type==="enroll",s,"internal-error");const h={idToken:d.credential,phoneEnrollmentInfo:{phoneNumber:u.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await yd(s,h,"mfaSmsEnrollment",async(b,w)=>{if(w.phoneEnrollmentInfo.captchaResponse===mi){ce((r==null?void 0:r.type)===pi,b,"argument-error");const v=await vd(b,w,r);return ip(b,v)}return ip(b,w)},"PHONE_PROVIDER").catch(b=>Promise.reject(b))).phoneSessionInfo.sessionInfo}else{ce(d.type==="signin",s,"internal-error");const h=((o=u.multiFactorHint)===null||o===void 0?void 0:o.uid)||u.multiFactorUid;ce(h,s,"missing-multi-factor-info");const p={mfaPendingCredential:d.credential,mfaEnrollmentId:h,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await yd(s,p,"mfaSmsSignIn",async(w,v)=>{if(v.phoneSignInInfo.captchaResponse===mi){ce((r==null?void 0:r.type)===pi,w,"argument-error");const A=await vd(w,v,r);return cp(w,A)}return cp(w,v)},"PHONE_PROVIDER").catch(w=>Promise.reject(w))).phoneResponseInfo.sessionInfo}}else{const d={phoneNumber:u.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await yd(s,d,"sendVerificationCode",async(x,b)=>{if(b.captchaResponse===mi){ce((r==null?void 0:r.type)===pi,x,"argument-error");const w=await vd(x,b,r);return sp(x,w)}return sp(x,b)},"PHONE_PROVIDER").catch(x=>Promise.reject(x))).sessionInfo}}finally{r==null||r._reset()}}async function vd(s,n,r){ce(r.type===pi,s,"argument-error");const o=await r.verify();ce(typeof o=="string",s,"argument-error");const u=Object.assign({},n);if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.captchaResponse,p=u.phoneEnrollmentInfo.clientType,m=u.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:o,captchaResponse:h,clientType:p,recaptchaVersion:m}}),u}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.captchaResponse,h=u.phoneSignInInfo.clientType,p=u.phoneSignInInfo.recaptchaVersion;return Object.assign(u,{phoneSignInInfo:{recaptchaToken:o,captchaResponse:d,clientType:h,recaptchaVersion:p}}),u}else return Object.assign(u,{recaptchaToken:o}),u}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(s,n){return n?Bn(n):(ce(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends df{constructor(n){super("custom","custom"),this.params=n}_getIdTokenResponse(n){return Js(n,this._buildIdpRequest())}_linkToIdToken(n,r){return Js(n,this._buildIdpRequest(r))}_getReauthenticationResolver(n){return Js(n,this._buildIdpRequest())}_buildIdpRequest(n){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return n&&(r.idToken=n),r}}function l_(s){return ly(s.auth,new mf(s),s.bypassAuthState)}function o_(s){const{auth:n,user:r}=s;return ce(r,n,"internal-error"),TS(r,new mf(s),s.bypassAuthState)}async function c_(s){const{auth:n,user:r}=s;return ce(r,n,"internal-error"),AS(r,new mf(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(n,r,o,u,d=!1){this.auth=n,this.resolver=o,this.user=u,this.bypassAuthState=d,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(n,r)=>{this.pendingPromise={resolve:n,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(n){const{urlResponse:r,sessionId:o,postBody:u,tenantId:d,error:h,type:p}=n;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:r,sessionId:o,tenantId:d||void 0,postBody:u||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(x){this.reject(x)}}onError(n){this.reject(n)}getIdpTask(n){switch(n){case"signInViaPopup":case"signInViaRedirect":return l_;case"linkViaPopup":case"linkViaRedirect":return c_;case"reauthViaPopup":case"reauthViaRedirect":return o_;default:$n(this.auth,"internal-error")}}resolve(n){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(n),this.unregisterAndCleanUp()}reject(n){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(n),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=new ki(2e3,1e4);class Xs extends gy{constructor(n,r,o,u,d){super(n,r,u,d),this.provider=o,this.authWindow=null,this.pollId=null,Xs.currentPopupAction&&Xs.currentPopupAction.cancel(),Xs.currentPopupAction=this}async executeNotNull(){const n=await this.execute();return ce(n,this.auth,"internal-error"),n}async onExecution(){Fn(this.filter.length===1,"Popup operations only handle one event");const n=ff();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Bt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(Bt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xs.currentPopupAction=null}pollUserCancellation(){const n=()=>{var r,o;if(!((o=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||o===void 0)&&o.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,u_.get())};n()}}Xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="pendingRedirect",co=new Map;class f_ extends gy{constructor(n,r,o=!1){super(n,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,o),this.eventId=null}async execute(){let n=co.get(this.auth._key());if(!n){try{const o=await h_(this.resolver,this.auth)?await super.execute():null;n=()=>Promise.resolve(o)}catch(r){n=()=>Promise.reject(r)}co.set(this.auth._key(),n)}return this.bypassAuthState||co.set(this.auth._key(),()=>Promise.resolve(null)),n()}async onAuthEvent(n){if(n.type==="signInViaRedirect")return super.onAuthEvent(n);if(n.type==="unknown"){this.resolve(null);return}if(n.eventId){const r=await this.auth._redirectUserForId(n.eventId);if(r)return this.user=r,super.onAuthEvent(n);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function h_(s,n){const r=p_(n),o=g_(s);if(!await o._isAvailable())return!1;const u=await o._get(r)==="true";return await o._remove(r),u}function m_(s,n){co.set(s._key(),n)}function g_(s){return Bn(s._redirectPersistence)}function p_(s){return oo(d_,s.config.apiKey,s.name)}async function x_(s,n,r=!1){if(bn(s.app))return Promise.reject(Aa(s));const o=ka(s),u=i_(o,n),h=await new f_(o,u,r).execute();return h&&!r&&(delete h.user._redirectEventId,await o._persistUserIfCurrent(h.user),await o._setRedirectUser(null,n)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=10*60*1e3;class b_{constructor(n){this.auth=n,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(n){this.consumers.add(n),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,n)&&(this.sendToConsumer(this.queuedRedirectEvent,n),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(n){this.consumers.delete(n)}onEvent(n){if(this.hasEventBeenHandled(n))return!1;let r=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(n,o)&&(r=!0,this.sendToConsumer(n,o),this.saveEventToCache(n))}),this.hasHandledPotentialRedirect||!v_(n)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=n,r=!0)),r}sendToConsumer(n,r){var o;if(n.error&&!py(n)){const u=((o=n.error.code)===null||o===void 0?void 0:o.split("auth/")[1])||"internal-error";r.onError(Bt(this.auth,u))}else r.onAuthEvent(n)}isEventForConsumer(n,r){const o=r.eventId===null||!!n.eventId&&n.eventId===r.eventId;return r.filter.includes(n.type)&&o}hasEventBeenHandled(n){return Date.now()-this.lastProcessedEventTime>=y_&&this.cachedEventUids.clear(),this.cachedEventUids.has(up(n))}saveEventToCache(n){this.cachedEventUids.add(up(n)),this.lastProcessedEventTime=Date.now()}}function up(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(n=>n).join("-")}function py({type:s,error:n}){return s==="unknown"&&(n==null?void 0:n.code)==="auth/no-auth-event"}function v_(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return py(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w_(s,n={}){return un(s,"GET","/v1/projects",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S_=/^https?/;async function __(s){if(s.config.emulator)return;const{authorizedDomains:n}=await w_(s);for(const r of n)try{if(j_(r))return}catch{}$n(s,"unauthorized-domain")}function j_(s){const n=Hd(),{protocol:r,hostname:o}=new URL(n);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&o===""?r==="chrome-extension:"&&s.replace("chrome-extension://","")===n.replace("chrome-extension://",""):r==="chrome-extension:"&&h.hostname===o}if(!S_.test(r))return!1;if(N_.test(s))return o===s;const u=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+u+"|"+u+")$","i").test(o)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=new ki(3e4,6e4);function dp(){const s=tt().___jsl;if(s!=null&&s.H){for(const n of Object.keys(s.H))if(s.H[n].r=s.H[n].r||[],s.H[n].L=s.H[n].L||[],s.H[n].r=[...s.H[n].L],s.CP)for(let r=0;r<s.CP.length;r++)s.CP[r]=null}}function E_(s){return new Promise((n,r)=>{var o,u,d;function h(){dp(),gapi.load("gapi.iframes",{callback:()=>{n(gapi.iframes.getContext())},ontimeout:()=>{dp(),r(Bt(s,"network-request-failed"))},timeout:C_.get()})}if(!((u=(o=tt().gapi)===null||o===void 0?void 0:o.iframes)===null||u===void 0)&&u.Iframe)n(gapi.iframes.getContext());else if(!((d=tt().gapi)===null||d===void 0)&&d.load)h();else{const p=ny("iframefcb");return tt()[p]=()=>{gapi.load?h():r(Bt(s,"network-request-failed"))},uf(`${oS()}?onload=${p}`).catch(m=>r(m))}}).catch(n=>{throw uo=null,n})}let uo=null;function A_(s){return uo=uo||E_(s),uo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=new ki(5e3,15e3),R_="__/auth/iframe",k_="emulator/auth/iframe",O_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},M_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function I_(s){const n=s.config;ce(n.authDomain,s,"auth-domain-config-required");const r=n.emulator?lf(n,k_):`https://${s.config.authDomain}/${R_}`,o={apiKey:n.apiKey,appName:s.name,v:Ri},u=M_.get(s.config.apiHost);u&&(o.eid=u);const d=s._getFrameworks();return d.length&&(o.fw=d.join(",")),`${r}?${ir(o).slice(1)}`}async function D_(s){const n=await A_(s),r=tt().gapi;return ce(r,s,"internal-error"),n.open({where:document.body,url:I_(s),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O_,dontclear:!0},o=>new Promise(async(u,d)=>{await o.restyle({setHideOnLeave:!1});const h=Bt(s,"network-request-failed"),p=tt().setTimeout(()=>{d(h)},T_.get());function m(){tt().clearTimeout(p),u(o)}o.ping(m).then(m,()=>{d(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L_=500,z_=600,P_="_blank",H_="http://localhost";class fp{constructor(n){this.window=n,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function B_(s,n,r,o=L_,u=z_){const d=Math.max((window.screen.availHeight-u)/2,0).toString(),h=Math.max((window.screen.availWidth-o)/2,0).toString();let p="";const m=Object.assign(Object.assign({},U_),{width:o.toString(),height:u.toString(),top:d,left:h}),x=jt().toLowerCase();r&&(p=Kx(x)?P_:r),Yx(x)&&(n=n||H_,m.scrollbars="yes");const b=Object.entries(m).reduce((v,[A,j])=>`${v}${A}=${j},`,"");if(JN(x)&&p!=="_self")return V_(n||"",p),new fp(null);const w=window.open(n||"",p,b);ce(w,s,"popup-blocked");try{w.focus()}catch{}return new fp(w)}function V_(s,n){const r=document.createElement("a");r.href=s,r.target=n;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="__/auth/handler",G_="emulator/auth/handler",$_=encodeURIComponent("fac");async function hp(s,n,r,o,u,d){ce(s.config.authDomain,s,"auth-domain-config-required"),ce(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:r,redirectUrl:o,v:Ri,eventId:u};if(n instanceof ry){n.setDefaultLanguage(s.languageCode),h.providerId=n.providerId||"",w5(n.getCustomParameters())||(h.customParameters=JSON.stringify(n.getCustomParameters()));for(const[b,w]of Object.entries({}))h[b]=w}if(n instanceof Mi){const b=n.getScopes().filter(w=>w!=="");b.length>0&&(h.scopes=b.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const m=await s._getAppCheckToken(),x=m?`#${$_}=${encodeURIComponent(m)}`:"";return`${F_(s)}?${ir(p).slice(1)}${x}`}function F_({config:s}){return s.emulator?lf(s,G_):`https://${s.authDomain}/${q_}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="webStorageSupport";class Y_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dy,this._completeRedirectFn=x_,this._overrideRedirectResult=m_}async _openPopup(n,r,o,u){var d;Fn((d=this.eventManagers[n._key()])===null||d===void 0?void 0:d.manager,"_initialize() not called before _openPopup()");const h=await hp(n,r,o,Hd(),u);return B_(n,h,ff())}async _openRedirect(n,r,o,u){await this._originValidation(n);const d=await hp(n,r,o,Hd(),u);return HS(d),new Promise(()=>{})}_initialize(n){const r=n._key();if(this.eventManagers[r]){const{manager:u,promise:d}=this.eventManagers[r];return u?Promise.resolve(u):(Fn(d,"If manager is not set, promise should be"),d)}const o=this.initAndGetManager(n);return this.eventManagers[r]={promise:o},o.catch(()=>{delete this.eventManagers[r]}),o}async initAndGetManager(n){const r=await D_(n),o=new b_(n);return r.register("authEvent",u=>(ce(u==null?void 0:u.authEvent,n,"invalid-auth-event"),{status:o.onEvent(u.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[n._key()]={manager:o},this.iframes[n._key()]=r,o}_isIframeWebStorageSupported(n,r){this.iframes[n._key()].send(wd,{type:wd},u=>{var d;const h=(d=u==null?void 0:u[0])===null||d===void 0?void 0:d[wd];h!==void 0&&r(!!h),$n(n,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(n){const r=n._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=__(n)),this.originValidationPromises[r]}get _shouldInitProactively(){return ey()||Xx()||cf()}}const X_=Y_;var mp="@firebase/auth",gp="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(n){this.auth=n,this.internalListeners=new Map}getUid(){var n;return this.assertAuthConfigured(),((n=this.auth.currentUser)===null||n===void 0?void 0:n.uid)||null}async getToken(n){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(n)}:null}addAuthTokenListener(n){if(this.assertAuthConfigured(),this.internalListeners.has(n))return;const r=this.auth.onIdTokenChanged(o=>{n((o==null?void 0:o.stsTokenManager.accessToken)||null)});this.internalListeners.set(n,r),this.updateProactiveRefresh()}removeAuthTokenListener(n){this.assertAuthConfigured();const r=this.internalListeners.get(n);r&&(this.internalListeners.delete(n),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Q_(s){Ni(new er("auth",(n,{options:r})=>{const o=n.getProvider("app").getImmediate(),u=n.getProvider("heartbeat"),d=n.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=o.options;ce(h&&!h.includes(":"),"invalid-api-key",{appName:o.name});const m={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ty(s)},x=new sS(o,u,d,m);return bS(x,r),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,r,o)=>{n.getProvider("auth-internal").initialize()})),Ni(new er("auth-internal",n=>{const r=ka(n.getProvider("auth").getImmediate());return(o=>new K_(o))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ks(mp,gp,Z_(s)),Ks(mp,gp,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=5*60,W_=Ax("authIdTokenMaxAge")||J_;let pp=null;const ej=s=>async n=>{const r=n&&await n.getIdTokenResult(),o=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(o&&o>W_)return;const u=r==null?void 0:r.token;pp!==u&&(pp=u,await fetch(s,{method:u?"POST":"DELETE",headers:u?{Authorization:`Bearer ${u}`}:{}}))};function tj(s=SN()){const n=Ox(s,"auth");if(n.isInitialized())return n.getImmediate();const r=yS(s,{popupRedirectResolver:X_,persistence:[KS,LS,dy]}),o=Ax("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const d=new URL(o,location.origin);if(location.origin===d.origin){const h=ej(d.toString());OS(r,h,()=>h(r.currentUser)),kS(r,p=>h(p))}}const u=r5("auth");return u&&vS(r,`http://${u}`),r}function nj(){var s,n;return(n=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&n!==void 0?n:document}rS({loadJS(s){return new Promise((n,r)=>{const o=document.createElement("script");o.setAttribute("src",s),o.onload=n,o.onerror=u=>{const d=Bt("internal-error");d.customData=u,r(d)},o.type="text/javascript",o.charset="UTF-8",nj().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Q_("Browser");var aj="firebase",sj="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ks(aj,sj,"app");const yn={apiKey:"AIzaSyAMj_nLbIhWVurQNO-EH0lSGZjlj8BztOI",authDomain:"aisha-f9c6c.firebaseapp.com",projectId:"aisha-f9c6c",storageBucket:"aisha-f9c6c.firebasestorage.app",messagingSenderId:"139166899282",appId:"1:139166899282:web:7dc281d297b92b18a8938b",measurementId:"G-PEKY2T7RXG"};console.log("Firebase Config Debug:",{apiKey:yn.apiKey?"Set":"Missing",authDomain:yn.authDomain||"Missing",projectId:yn.projectId||"Missing",storageBucket:yn.storageBucket||"Missing",messagingSenderId:yn.messagingSenderId||"Missing",appId:yn.appId||"Missing"});let xp,dt;try{if(!yn.apiKey||!yn.authDomain||!yn.projectId)throw new Error("Firebase設定が不完全です。環境変数を確認してください。");xp=Mx(yn),dt=tj(xp),typeof window<"u"&&(dt.settings.appVerificationDisabledForTesting=!1),console.log("Firebase initialized successfully")}catch(s){console.error("Firebase initialization error:",s),dt={currentUser:null,onAuthStateChanged:()=>()=>{},signOut:()=>Promise.resolve()}}let vn=null;const rj=s=>(vn&&vn.clear(),vn=new t_(dt,s,{size:"invisible",callback:()=>{console.log("reCAPTCHA解決済み")},"expired-callback":()=>{console.log("reCAPTCHA期限切れ")},"error-callback":n=>{console.error("reCAPTCHA エラー:",n)}}),vn),ij=async(s,n)=>{var r,o;try{console.log("🚀 SMS送信開始:",{phoneNumber:s,containerId:n}),console.log("📞 電話番号を国際形式に変換中...");const u=oj(s);console.log("✅ 国際形式変換完了:",u),console.log("🔥 Firebase Auth確認:",{auth:!!dt,currentUser:((r=dt==null?void 0:dt.currentUser)==null?void 0:r.uid)||"なし"}),console.log("🔐 reCAPTCHA初期化中...",{containerId:n});const d=rj(n);console.log("✅ reCAPTCHA初期化完了");const h=document.getElementById(n);console.log("🎯 reCAPTCHA要素確認:",{element:!!h,id:n}),console.log("📤 Firebase SMS送信実行中...",{number:u,verifier:!!d});const p=await s_(dt,u,d);return console.log("🎉 SMS送信成功:",{verificationId:p.verificationId?"あり":"なし",number:u}),p}catch(u){throw console.error("💥 SMS送信エラー詳細:",{error:u,errorCode:u==null?void 0:u.code,errorMessage:u==null?void 0:u.message,phoneNumber:s,containerId:n}),console.error("🔥 Firebase Auth状態:",{isInitialized:!!dt,currentUser:((o=dt==null?void 0:dt.currentUser)==null?void 0:o.uid)||"なし",app:!!(dt!=null&&dt.app)}),new Error(xy(u))}},lj=async(s,n)=>{try{const r=await s.confirm(n);return console.log("SMS認証成功:",r.user.uid),r.user}catch(r){throw console.error("SMS認証エラー:",r),new Error(xy(r))}},oj=s=>{const n=s.replace(/\D/g,"");if(n.length===11&&n.startsWith("0"))return`+81${n.substring(1)}`;if(n.length===12&&s.startsWith("+81"))return s;throw new Error("正しい日本の電話番号を入力してください（例: 090-1234-5678）")},yp=async()=>{try{await IS(dt),vn&&(vn.clear(),vn=null),console.log("Firebase認証ログアウト成功")}catch(s){throw console.error("Firebase認証ログアウトエラー:",s),s}},bp=()=>{vn&&(vn.clear(),vn=null)},xy=s=>{switch((s==null?void 0:s.code)||""){case"auth/invalid-phone-number":return"無効な電話番号です。正しい形式で入力してください。";case"auth/missing-phone-number":return"電話番号を入力してください。";case"auth/quota-exceeded":return"SMS送信の上限に達しました。しばらく時間をおいてから再試行してください。";case"auth/invalid-verification-code":return"認証コードが正しくありません。";case"auth/invalid-verification-id":return"認証セッションが無効です。最初からやり直してください。";case"auth/code-expired":return"認証コードの有効期限が切れています。新しいコードを取得してください。";case"auth/too-many-requests":return"リクエストが多すぎます。しばらく時間をおいてから再試行してください。";case"auth/captcha-check-failed":return"reCAPTCHA認証に失敗しました。ページを再読み込みして再試行してください。";default:return(s==null?void 0:s.message)||"認証エラーが発生しました。"}},cj=({isOpen:s,onClose:n,onLoginSuccess:r,onError:o})=>{const[u,d]=C.useState("phone"),[h,p]=C.useState(""),[m,x]=C.useState(""),[b,w]=C.useState(""),[v,A]=C.useState(!1),[j,z]=C.useState(null),[S,V]=C.useState(null),[X,O]=C.useState(!1),ie=C.useRef(null),T="recaptcha-container-phone-login",G=()=>{d("phone"),p(""),x(""),w(""),A(!1),z(null),V(null),O(!1),bp()},re=()=>{G(),n()};C.useEffect(()=>()=>{bp()},[]);const le=U=>{const te=U.replace(/\D/g,"");return te.length<=3?te:te.length<=7?`${te.slice(0,3)}-${te.slice(3)}`:te.length<=11?`${te.slice(0,3)}-${te.slice(3,7)}-${te.slice(7)}`:`${te.slice(0,3)}-${te.slice(3,7)}-${te.slice(7,11)}`},ee=U=>{const te=le(U.target.value);p(te)},ae=async()=>{if(!h){o("電話番号を入力してください");return}const U=h.replace(/\D/g,"");if(U.length!==11||!U.startsWith("0")){o("正しい電話番号を入力してください（例: 090-1234-5678）");return}A(!0);try{const te=await ij(h,T);z(te),d("verification"),o(""),console.log("SMS送信成功")}catch(te){console.error("SMS送信エラー:",te),o(te instanceof Error?te.message:"SMS送信に失敗しました")}finally{A(!1)}},K=async()=>{if(!m){o("認証番号を入力してください");return}if(m.length!==6){o("認証番号は6桁で入力してください");return}if(!j){o("認証セッションが無効です。最初からやり直してください。");return}A(!0);try{console.log("🔐 Firebase認証開始...");const U=await lj(j,m);V(U),console.log("✅ Firebase認証成功:",{uid:U.uid,phoneNumber:U.phoneNumber,isAnonymous:U.isAnonymous,metadata:{creationTime:U.metadata.creationTime,lastSignInTime:U.metadata.lastSignInTime}}),console.log("🔍 バックエンドユーザー確認開始..."),console.log("送信データ:",{firebaseUid:U.uid,phoneNumber:U.phoneNumber});const te=await U.getIdToken();console.log("🔐 取得したIDトークン:",te.substring(0,50)+"..."),console.log("🔐 IDトークンの長さ:",te.length);const ne=await fetch("http://localhost:7999/api/firebase-auth/check-user/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${te}`},body:JSON.stringify({firebaseUid:U.uid,phoneNumber:U.phoneNumber})});if(console.log("📡 バックエンドレスポンス:",{status:ne.status,ok:ne.ok,statusText:ne.statusText}),!ne.ok){const $=await ne.text();console.error("❌ サーバーエラー:",ne.status,$),console.log("➡️ サーバーエラーのため、新規ユーザーとして処理します"),O(!0),d("registration");return}const k=await ne.json();if(console.log("📋 バックエンドレスポンスデータ:",k),k.exists){console.log("👤 既存ユーザーでログイン:",k.user);const $={id:k.user.id,name:k.user.nickname,loginType:"phone",phoneNumber:k.user.phoneNumber,isAdmin:k.user.isAdmin};console.log("✅ ログイン成功:",$),r($),re()}else console.log("🆕 新規ユーザー登録へ"),O(!0),d("registration")}catch(U){console.error("💥 認証エラー:",U),o(U instanceof Error?U.message:"認証に失敗しました")}finally{A(!1)}},q=async()=>{if(!b.trim()){o("ニックネームを入力してください");return}if(b.length>20){o("ニックネームは20文字以内で入力してください");return}if(!S){o("認証セッションが無効です。最初からやり直してください。");return}A(!0);try{const U=await S.getIdToken();console.log("新規ユーザー登録:",{firebaseUid:S.uid,phoneNumber:S.phoneNumber,nickname:b.trim()});const ne=await fetch("https://aisha-backend-584412696241.asia-northeast1.run.app/api/firebase-auth/user-info/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${U}`},body:JSON.stringify({firebaseUid:S.uid,phoneNumber:S.phoneNumber,nickname:b.trim()})});if(!ne.ok){const $=await ne.text();console.error("ユーザー作成エラー:",ne.status,$),o("ユーザー登録に失敗しました");return}const k=await ne.json();if(k.success){const $={id:k.id,name:k.nickname,loginType:"phone",phoneNumber:k.phoneNumber,isAdmin:k.isAdmin};console.log("ユーザー登録成功:",$),r($),re()}else o(k.message||"ユーザー登録に失敗しました")}catch(U){console.error("ユーザー登録エラー:",U),o(U instanceof Error?U.message:"ユーザー登録に失敗しました")}finally{A(!1)}};return s?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-xl w-full max-w-md",children:[l.jsx("div",{id:T,ref:ie,className:"hidden"}),u==="phone"&&l.jsxs(l.Fragment,{children:[l.jsx("h2",{className:"text-2xl font-semibold mb-6 text-center text-indigo-400",children:"電話番号でログイン"}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-300 mb-2",children:"電話番号"}),l.jsx("input",{type:"tel",id:"phoneNumber",placeholder:"090-1234-5678",className:"w-full p-3 bg-gray-700 border border-gray-600 rounded-md text-gray-200 placeholder-gray-500 focus:ring-indigo-500 focus:border-indigo-500",value:h,onChange:ee,maxLength:13,disabled:v})]}),l.jsx("p",{className:"text-gray-400 mb-4 text-center text-sm",children:"SMS認証番号を送信します"}),l.jsx("button",{onClick:ae,disabled:v,className:"w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition duration-150 ease-in-out mb-3",children:v?"SMS送信中...":"SMS認証番号を送信"})]}),u==="verification"&&l.jsxs(l.Fragment,{children:[l.jsx("h2",{className:"text-2xl font-semibold mb-6 text-center text-indigo-400",children:"認証番号入力"}),l.jsx("div",{className:"mb-4",children:l.jsxs("p",{className:"text-gray-300 text-sm mb-2",children:[h," に送信された認証番号を入力してください"]})}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{htmlFor:"verificationCode",className:"block text-sm font-medium text-gray-300 mb-2",children:"認証番号（6桁）"}),l.jsx("input",{type:"text",id:"verificationCode",placeholder:"123456",className:"w-full p-3 bg-gray-700 border border-gray-600 rounded-md text-gray-200 placeholder-gray-500 focus:ring-indigo-500 focus:border-indigo-500 text-center text-lg tracking-widest",value:m,onChange:U=>x(U.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,disabled:v})]}),l.jsx("button",{onClick:K,disabled:v,className:"w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition duration-150 ease-in-out mb-3",children:v?"認証中...":"認証する"}),l.jsx("button",{onClick:()=>d("phone"),disabled:v,className:"w-full bg-gray-600 hover:bg-gray-700 disabled:bg-gray-500 text-gray-200 font-bold py-2 px-4 rounded-lg transition duration-150 ease-in-out mb-3",children:"戻る"})]}),u==="registration"&&l.jsxs(l.Fragment,{children:[l.jsx("h2",{className:"text-2xl font-semibold mb-6 text-center text-indigo-400",children:"ニックネーム登録"}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{htmlFor:"nickname",className:"block text-sm font-medium text-gray-300 mb-2",children:"ニックネーム"}),l.jsx("input",{type:"text",id:"nickname",placeholder:"ニックネームを入力",className:"w-full p-3 bg-gray-700 border border-gray-600 rounded-md text-gray-200 placeholder-gray-500 focus:ring-indigo-500 focus:border-indigo-500",value:b,onChange:U=>w(U.target.value),maxLength:20,disabled:v}),l.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"20文字以内で入力してください"})]}),l.jsx("button",{onClick:q,disabled:v,className:"w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition duration-150 ease-in-out mb-3",children:v?"登録中...":"登録してログイン"})]}),l.jsx("button",{onClick:re,disabled:v,className:"w-full bg-gray-600 hover:bg-gray-700 disabled:bg-gray-500 text-gray-200 font-bold py-3 px-6 rounded-lg transition duration-150 ease-in-out",children:"閉じる"})]})}):null};var yy="https://js.stripe.com/v3",uj=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var dj=function(){for(var n=document.querySelectorAll('script[src^="'.concat(yy,'"]')),r=0;r<n.length;r++){var o=n[r];if(uj.test(o.src))return o}return null},vp=function(n){var r="",o=document.createElement("script");o.src="".concat(yy).concat(r);var u=document.head||document.body;if(!u)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return u.appendChild(o),o},fj=function(n,r){!n||!n._registerWrapper||n._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:r})},oi=null,to=null,no=null,hj=function(n){return function(){n(new Error("Failed to load Stripe.js"))}},mj=function(n,r){return function(){window.Stripe?n(window.Stripe):r(new Error("Stripe.js not available"))}},gj=function(n){return oi!==null?oi:(oi=new Promise(function(r,o){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var u=dj();if(!(u&&n)){if(!u)u=vp(n);else if(u&&no!==null&&to!==null){var d;u.removeEventListener("load",no),u.removeEventListener("error",to),(d=u.parentNode)===null||d===void 0||d.removeChild(u),u=vp(n)}}no=mj(r,o),to=hj(o),u.addEventListener("load",no),u.addEventListener("error",to)}catch(h){o(h);return}}),oi.catch(function(r){return oi=null,Promise.reject(r)}))},pj=function(n,r,o){if(n===null)return null;var u=n.apply(void 0,r);return fj(u,o),u},ci,by=!1,vy=function(){return ci||(ci=gj(null).catch(function(n){return ci=null,Promise.reject(n)}),ci)};Promise.resolve().then(function(){return vy()}).catch(function(s){by||console.warn(s)});var xj=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];by=!0;var u=Date.now();return vy().then(function(d){return pj(d,r,u)})},Nd={exports:{}},Sd,wp;function yj(){if(wp)return Sd;wp=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Sd=s,Sd}var _d,Np;function bj(){if(Np)return _d;Np=1;var s=yj();function n(){}function r(){}return r.resetWarningCache=n,_d=function(){function o(h,p,m,x,b,w){if(w!==s){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}o.isRequired=o;function u(){return o}var d={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:u,element:o,elementType:o,instanceOf:u,node:o,objectOf:u,oneOf:u,oneOfType:u,shape:u,exact:u,checkPropTypes:r,resetWarningCache:n};return d.PropTypes=d,d},_d}var Sp;function vj(){return Sp||(Sp=1,Nd.exports=bj()()),Nd.exports}var wj=vj();const Xe=$d(wj);function _p(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);n&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(s,u).enumerable})),r.push.apply(r,o)}return r}function jp(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?_p(Object(r),!0).forEach(function(o){wy(s,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):_p(Object(r)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(r,o))})}return s}function fo(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fo=function(n){return typeof n}:fo=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fo(s)}function wy(s,n,r){return n in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function Ny(s,n){return Nj(s)||Sj(s,n)||_j(s,n)||jj()}function Nj(s){if(Array.isArray(s))return s}function Sj(s,n){var r=s&&(typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"]);if(r!=null){var o=[],u=!0,d=!1,h,p;try{for(r=r.call(s);!(u=(h=r.next()).done)&&(o.push(h.value),!(n&&o.length===n));u=!0);}catch(m){d=!0,p=m}finally{try{!u&&r.return!=null&&r.return()}finally{if(d)throw p}}return o}}function _j(s,n){if(s){if(typeof s=="string")return Cp(s,n);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cp(s,n)}}function Cp(s,n){(n==null||n>s.length)&&(n=s.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=s[r];return o}function jj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ht=function(n,r,o){var u=!!o,d=Te.useRef(o);Te.useEffect(function(){d.current=o},[o]),Te.useEffect(function(){if(!u||!n)return function(){};var h=function(){d.current&&d.current.apply(d,arguments)};return n.on(r,h),function(){n.off(r,h)}},[u,r,n,d])},qd=function(n){var r=Te.useRef(n);return Te.useEffect(function(){r.current=n},[n]),r.current},nr=function(n){return n!==null&&fo(n)==="object"},Cj=function(n){return nr(n)&&typeof n.then=="function"},Ej=function(n){return nr(n)&&typeof n.elements=="function"&&typeof n.createToken=="function"&&typeof n.createPaymentMethod=="function"&&typeof n.confirmCardPayment=="function"},Ep="[object Object]",Aj=function s(n,r){if(!nr(n)||!nr(r))return n===r;var o=Array.isArray(n),u=Array.isArray(r);if(o!==u)return!1;var d=Object.prototype.toString.call(n)===Ep,h=Object.prototype.toString.call(r)===Ep;if(d!==h)return!1;if(!d&&!o)return n===r;var p=Object.keys(n),m=Object.keys(r);if(p.length!==m.length)return!1;for(var x={},b=0;b<p.length;b+=1)x[p[b]]=!0;for(var w=0;w<m.length;w+=1)x[m[w]]=!0;var v=Object.keys(x);if(v.length!==p.length)return!1;var A=n,j=r,z=function(V){return s(A[V],j[V])};return v.every(z)},Sy=function(n,r,o){return nr(n)?Object.keys(n).reduce(function(u,d){var h=!nr(r)||!Aj(n[d],r[d]);return o.includes(d)?(h&&console.warn("Unsupported prop change: options.".concat(d," is not a mutable property.")),u):h?jp(jp({},u||{}),{},wy({},d,n[d])):u},null):null},_y="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Ap=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_y;if(n===null||Ej(n))return n;throw new Error(r)},Tj=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_y;if(Cj(n))return{tag:"async",stripePromise:Promise.resolve(n).then(function(u){return Ap(u,r)})};var o=Ap(n,r);return o===null?{tag:"empty"}:{tag:"sync",stripe:o}},Rj=function(n){!n||!n._registerWrapper||!n.registerAppInfo||(n._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),n.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},Po=Te.createContext(null);Po.displayName="ElementsContext";var jy=function(n,r){if(!n)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return n},Cy=function(n){var r=n.stripe,o=n.options,u=n.children,d=Te.useMemo(function(){return Tj(r)},[r]),h=Te.useState(function(){return{stripe:d.tag==="sync"?d.stripe:null,elements:d.tag==="sync"?d.stripe.elements(o):null}}),p=Ny(h,2),m=p[0],x=p[1];Te.useEffect(function(){var v=!0,A=function(z){x(function(S){return S.stripe?S:{stripe:z,elements:z.elements(o)}})};return d.tag==="async"&&!m.stripe?d.stripePromise.then(function(j){j&&v&&A(j)}):d.tag==="sync"&&!m.stripe&&A(d.stripe),function(){v=!1}},[d,m,o]);var b=qd(r);Te.useEffect(function(){b!==null&&b!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[b,r]);var w=qd(o);return Te.useEffect(function(){if(m.elements){var v=Sy(o,w,["clientSecret","fonts"]);v&&m.elements.update(v)}},[o,w,m.elements]),Te.useEffect(function(){Rj(m.stripe)},[m.stripe]),Te.createElement(Po.Provider,{value:m},u)};Cy.propTypes={stripe:Xe.any,options:Xe.object};var kj=function(n){var r=Te.useContext(Po);return jy(r,n)},Oj=function(){var n=kj("calls useElements()"),r=n.elements;return r};Xe.func.isRequired;var Ey=Te.createContext(null);Ey.displayName="CustomCheckoutSdkContext";var Mj=function(n,r){if(!n)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(r," in an <CustomCheckoutProvider> provider."));return n},Ij=Te.createContext(null);Ij.displayName="CustomCheckoutContext";Xe.any,Xe.shape({clientSecret:Xe.string.isRequired,elementsOptions:Xe.object}).isRequired;var Gd=function(n){var r=Te.useContext(Ey),o=Te.useContext(Po);if(r&&o)throw new Error("You cannot wrap the part of your app that ".concat(n," in both <CustomCheckoutProvider> and <Elements> providers."));return r?Mj(r,n):jy(o,n)},Dj=function(n){return n.charAt(0).toUpperCase()+n.slice(1)},at=function(n,r){var o="".concat(Dj(n),"Element"),u=function(m){var x=m.id,b=m.className,w=m.options,v=w===void 0?{}:w,A=m.onBlur,j=m.onFocus,z=m.onReady,S=m.onChange,V=m.onEscape,X=m.onClick,O=m.onLoadError,ie=m.onLoaderStart,T=m.onNetworksChange,G=m.onConfirm,re=m.onCancel,le=m.onShippingAddressChange,ee=m.onShippingRateChange,ae=Gd("mounts <".concat(o,">")),K="elements"in ae?ae.elements:null,q="customCheckoutSdk"in ae?ae.customCheckoutSdk:null,U=Te.useState(null),te=Ny(U,2),ne=te[0],k=te[1],$=Te.useRef(null),se=Te.useRef(null);Ht(ne,"blur",A),Ht(ne,"focus",j),Ht(ne,"escape",V),Ht(ne,"click",X),Ht(ne,"loaderror",O),Ht(ne,"loaderstart",ie),Ht(ne,"networkschange",T),Ht(ne,"confirm",G),Ht(ne,"cancel",re),Ht(ne,"shippingaddresschange",le),Ht(ne,"shippingratechange",ee),Ht(ne,"change",S);var be;z&&(n==="expressCheckout"?be=z:be=function(){z(ne)}),Ht(ne,"ready",be),Te.useLayoutEffect(function(){if($.current===null&&se.current!==null&&(K||q)){var D=null;q?D=q.createElement(n,v):K&&(D=K.create(n,v)),$.current=D,k(D),D&&D.mount(se.current)}},[K,q,v]);var _=qd(v);return Te.useEffect(function(){if($.current){var D=Sy(v,_,["paymentRequest"]);D&&"update"in $.current&&$.current.update(D)}},[v,_]),Te.useLayoutEffect(function(){return function(){if($.current&&typeof $.current.destroy=="function")try{$.current.destroy(),$.current=null}catch{}}},[]),Te.createElement("div",{id:x,className:b,ref:se})},d=function(m){Gd("mounts <".concat(o,">"));var x=m.id,b=m.className;return Te.createElement("div",{id:x,className:b})},h=r?d:u;return h.propTypes={id:Xe.string,className:Xe.string,onChange:Xe.func,onBlur:Xe.func,onFocus:Xe.func,onReady:Xe.func,onEscape:Xe.func,onClick:Xe.func,onLoadError:Xe.func,onLoaderStart:Xe.func,onNetworksChange:Xe.func,onConfirm:Xe.func,onCancel:Xe.func,onShippingAddressChange:Xe.func,onShippingRateChange:Xe.func,options:Xe.object},h.displayName=o,h.__elementType=n,h},st=typeof window>"u",Uj=Te.createContext(null);Uj.displayName="EmbeddedCheckoutProviderContext";var Lj=function(){var n=Gd("calls useStripe()"),r=n.stripe;return r};at("auBankAccount",st);at("card",st);var Tp=at("cardNumber",st),zj=at("cardExpiry",st),Pj=at("cardCvc",st);at("fpxBank",st);at("iban",st);at("idealBank",st);at("p24Bank",st);at("epsBank",st);at("payment",st);at("expressCheckout",st);at("currencySelector",st);at("paymentRequestButton",st);at("linkAuthentication",st);at("address",st);at("shippingAddress",st);at("paymentMethodMessaging",st);at("affirmMessage",st);at("afterpayClearpayMessage",st);let jd;const Hj=async()=>{if(!jd)try{console.log("Stripe設定を取得中...");const s=await pe.get("http://localhost:7999/api/stripe/config/");console.log("Stripe設定レスポンス:",s.data);const n=s.data.publishable_key;if(!n||n==="pk_test_YOUR_ACTUAL_PUBLISHABLE_KEY")throw new Error("有効なStripe公開可能キーが設定されていません");jd=xj(n),console.log("Stripe読み込み開始:",n)}catch(s){throw console.error("Stripe設定の取得に失敗:",s),new Error("Stripeキーが設定されていません")}return jd},Bj=({userId:s,chargeAmount:n,creditAmount:r,onSuccess:o,onError:u,onCancel:d})=>{const h=Lj(),p=Oj(),[m,x]=C.useState(!1),[b,w]=C.useState(null),[v,A]=C.useState(""),[j,z]=C.useState(!1),[S,V]=C.useState(null),[X,O]=C.useState(null),[ie,T]=C.useState(null),[G,re]=C.useState("");C.useEffect(()=>{if(j)return;(async()=>{var te,ne;try{const k={user_id:s,charge_amount:n,credit_amount:r};console.log("🔍 チャージリクエストデータ:",k);const $=await pe.post("http://localhost:7999/api/charges/",k);A($.data.client_secret),z(!0)}catch(k){console.error("PaymentIntent作成エラー:",k),u(((ne=(te=k.response)==null?void 0:te.data)==null?void 0:ne.message)||"決済の初期化に失敗しました")}})()},[s,n,r,u,j]);const le=async U=>{if(U.preventDefault(),!h||!p||!v)return;x(!0),w(null);const te=p.getElement(Tp);if(!te){w("カード情報の取得に失敗しました"),x(!1);return}try{const{error:ne,paymentIntent:k}=await h.confirmCardPayment(v,{payment_method:{card:te,billing_details:{name:`User ${s}`,address:{postal_code:G}}}});if(ne){w(ne.message||"決済に失敗しました"),x(!1);return}if((k==null?void 0:k.status)==="succeeded"){console.log("✅ Stripe決済成功:",k.id);try{const $=await pe.post("http://localhost:7999/api/charges/confirm/",{payment_intent_id:k.id,user_id:s});console.log("✅ 決済確認成功:",$.data),o($.data.credit_balance)}catch($){console.error("❌ 決済確認API失敗（但し決済は成功）:",$),console.log("⚠️ 決済確認APIエラーだが、Stripe決済は成功済みのため成功扱い"),o(0)}}else w("決済が完了しませんでした")}catch(ne){console.error("決済エラー:",ne),w("決済処理中にエラーが発生しました")}finally{x(!1)}},ee={style:{base:{fontSize:"16px",color:"#e5e7eb",backgroundColor:"transparent",fontFamily:"system-ui, -apple-system, sans-serif","::placeholder":{color:"#9ca3af"}},invalid:{color:"#f87171",iconColor:"#f87171"}}},ae=U=>{V(U.error?U.error.message:null)},K=U=>{O(U.error?U.error.message:null)},q=U=>{T(U.error?U.error.message:null)};return l.jsxs("form",{onSubmit:le,className:"space-y-6",children:[l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[l.jsx("h3",{className:"text-lg font-medium text-indigo-300 mb-4",children:"決済情報"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"カード番号"}),l.jsx("div",{className:"p-3 border border-gray-600 rounded-lg bg-gray-800",children:l.jsx(Tp,{options:ee,onChange:ae})}),S&&l.jsx("p",{className:"text-red-400 text-sm mt-1",children:S})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"有効期限"}),l.jsx("div",{className:"p-3 border border-gray-600 rounded-lg bg-gray-800",children:l.jsx(zj,{options:ee,onChange:K})}),X&&l.jsx("p",{className:"text-red-400 text-sm mt-1",children:X})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"CVC"}),l.jsx("div",{className:"p-3 border border-gray-600 rounded-lg bg-gray-800",children:l.jsx(Pj,{options:ee,onChange:q})}),ie&&l.jsx("p",{className:"text-red-400 text-sm mt-1",children:ie})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"郵便番号（任意）"}),l.jsx("input",{type:"text",value:G,onChange:U=>re(U.target.value),placeholder:"123-4567",className:"w-full p-3 border border-gray-600 rounded-lg bg-gray-800 text-gray-200 placeholder-gray-500 focus:ring-indigo-500 focus:border-indigo-500",maxLength:8})]})]}),l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"注文内容"}),l.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"チャージ金額:"}),l.jsxs("span",{children:["¥",n.toLocaleString()]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"付与クレジット:"}),l.jsxs("span",{children:[r.toLocaleString()," クレジット"]})]})]})]}),b&&l.jsx("div",{className:"bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded-lg",children:b}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{type:"button",onClick:d,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-gray-200 font-bold py-3 px-6 rounded-lg transition duration-150 ease-in-out",disabled:m,children:"キャンセル"}),l.jsx("button",{type:"submit",disabled:!h||m||!v,className:`flex-1 font-bold py-3 px-6 rounded-lg transition duration-150 ease-in-out ${m||!h||!v?"bg-gray-500 text-gray-300 cursor-not-allowed":"bg-green-500 hover:bg-green-600 text-white"}`,children:m?"処理中...":`¥${n.toLocaleString()} で決済`})]})]})},Vj=s=>{const[n,r]=C.useState(null),[o,u]=C.useState(null),[d,h]=C.useState(!0);return C.useEffect(()=>{(async()=>{try{h(!0),u(null);const m=new Promise((b,w)=>setTimeout(()=>w(new Error("Stripe読み込みがタイムアウトしました")),1e4)),x=await Promise.race([Hj(),m]);r(x),console.log("Stripe初期化完了")}catch(m){console.error("Stripe初期化エラー:",m),u(m.message||"Stripeの読み込みに失敗しました")}finally{h(!1)}})()},[]),d?l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsxs("div",{className:"text-gray-400",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-400 mx-auto mb-4"}),"決済システムを読み込み中..."]})}):o?l.jsxs("div",{className:"p-6 text-center",children:[l.jsxs("div",{className:"bg-red-900/50 border border-red-500 text-red-200 px-4 py-3 rounded-lg mb-4",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"決済システムの読み込みエラー"}),l.jsx("p",{className:"text-sm",children:o})]}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 rounded-lg",children:"ページを再読み込み"})]}):n?l.jsx(Cy,{stripe:n,children:l.jsx(Bj,{...s})}):l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx("div",{className:"text-red-400",children:"決済システムの初期化に失敗しました"})})},qj=({isOpen:s,onClose:n,onSelectPlan:r,currentUser:o,onPaymentHistoryClick:u})=>{var X;const{showToast:d}=wn(),[h,p]=C.useState(null),[m,x]=C.useState(!1),b=(X=Nx())==null?void 0:X.filter(O=>O.isActive),w=()=>{x(!1),p(null),n()};if(!s)return null;if(!o)return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-xl w-full max-w-md",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-6 text-center text-indigo-400",children:"ログインが必要です"}),l.jsx("p",{className:"text-gray-300 mb-6 text-center",children:"クレジットをチャージするには、まずログインしてください。"}),l.jsx("button",{onClick:w,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition duration-150 ease-in-out",children:"閉じる"})]})});const v=[{id:1,name:"500クレジット",priceYen:500,creditsAwarded:500,creditsBonus:0,isActive:!0},{id:2,name:"1100クレジット",priceYen:1e3,creditsAwarded:1100,creditsBonus:100,isActive:!0}],A=b&&b.length>0?b:v,j=O=>{const ie={id:O.id,name:O.name,price:O.priceYen,credits:O.creditsAwarded};p(ie),x(!0)},z=O=>{console.log("決済成功！新しいクレジット残高:",O),d("success",`決済が完了しました！${h==null?void 0:h.credits}クレジットが追加されました。`),h&&r(h),x(!1),p(null),n()},S=O=>{console.error("決済エラー:",O);const ie=O.includes("Your card was declined")?"カードが拒否されました。別のカードをお試しください。":O.includes("Your card number is incomplete")?"カード番号が不完全です。正しいカード番号を入力してください。":O.includes("expiration date is incomplete")?"カードの有効期限が不完全です。MM/YY形式で入力してください。":O.includes("security code is incomplete")?"セキュリティコードが不完全です。カード裏面の3桁または4桁の番号を入力してください。":O.includes("Failed to create charge")?"決済の初期化に失敗しました。しばらく待ってから再度お試しください。":`決済エラー: ${O}`;d("error",ie)},V=()=>{x(!1),p(null)};return m&&h?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-xl w-full max-w-lg",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-6 text-center text-indigo-400",children:"クレジット決済"}),l.jsx(Vj,{userId:(o==null?void 0:o.id)||"anonymous",chargeAmount:h.price,creditAmount:h.credits,onSuccess:z,onError:S,onCancel:V})]})}):l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-xl w-full max-w-md",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-6 text-center text-indigo-400",children:"クレジットをチャージ"}),o&&u&&l.jsx("div",{className:"mb-4",children:l.jsxs("button",{onClick:u,className:"w-full bg-gray-700 hover:bg-gray-600 text-gray-200 font-medium py-2 px-4 rounded-lg transition duration-150 ease-in-out flex items-center justify-center",children:[l.jsx(Pp,{className:"w-5 h-5 mr-2"}),"決済履歴を確認"]})}),l.jsx("div",{className:"space-y-4",children:A==null?void 0:A.map(O=>l.jsxs("div",{className:"p-4 border border-gray-700 rounded-lg bg-gray-700/50",children:[l.jsxs("h3",{className:"text-lg font-medium text-indigo-300",children:[O.displayInfo||`${O.creditsAwarded} クレジット`,(O.creditsBonus||0)>0&&l.jsxs("span",{className:"text-sm text-yellow-400 font-semibold ml-2",children:["(+",O.creditsBonus," お得!)"]})]}),l.jsxs("p",{className:"text-sm text-gray-400 mb-3",children:["¥",O.priceYen," で購入"]}),l.jsxs("button",{onClick:()=>j(O),className:"mt-2 w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-150 ease-in-out",children:["¥",O.priceYen," チャージ"]})]},O.id))}),l.jsx("button",{onClick:w,className:"mt-6 w-full bg-gray-600 hover:bg-gray-700 text-gray-200 font-bold py-3 px-6 rounded-lg transition duration-150 ease-in-out",children:"閉じる"})]})})},No="https://md2.mygare.jp/api",Gj="https://aisha-backend-584412696241.asia-northeast1.run.app/api",gf=async s=>{try{const n=await fetch(`${Gj}/users/${s}/admin-status/`);if(n.ok)return(await n.json()).is_admin}catch(n){console.warn("Failed to fetch admin status:",n)}return!1},$j=async(s,n)=>{var r,o,u,d;try{if(!s||!s.includes("@"))throw new Error("メールアドレスの形式が正しくありません");if(!n||n.length<1)throw new Error("パスワードを入力してください");let h;try{if(h=await fetch(`${No}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:n,device_info:"AISHA Web App"})}),!h.ok){if(h.status===400){const x=new FormData;x.append("email",s),x.append("password",n),x.append("device_info","AISHA Web App"),h=await fetch(`${No}/login`,{method:"POST",body:x})}}}catch(x){throw console.error("Initial login attempt failed:",x),x}if(!h.ok){let x=`ログインに失敗しました: ${h.status}`;try{const b=await h.text();console.error("MyGarage API error response:",b);try{const w=JSON.parse(b);if(w.error&&w.error.message){const v=w.error.message;v==="Unauthorized"||h.status===401?x="メールアドレスまたはパスワードが正しくありません":x=v}else w.message&&(x=w.message)}catch{h.status===401?x="メールアドレスまたはパスワードが正しくありません":x+=` - ${b}`}}catch{console.error("Could not parse error response")}if(h.status===404)return console.warn("MyGarage API not found, using test implementation"),Rp(s,n);throw new Error(x)}const p=await h.text();console.log("MyGarage API response:",p);let m;try{m=JSON.parse(p),console.log("Parsed response data:",m),console.log("data.data:",m.data),console.log("data.data?.token:",(r=m.data)==null?void 0:r.token),m.data&&(console.log("Available fields in data.data:",Object.keys(m.data)),console.log("Full data.data object:",JSON.stringify(m.data,null,2)))}catch{throw console.error("Could not parse JSON response:",p),new Error("APIレスポンスの解析に失敗しました")}if(m.data){const x=m.data.token||m.data.mygarage_token||m.data.device_token;x&&(localStorage.setItem("mygarage-token",x),console.log("Token saved:",x));const b=(o=m.data.created_by)==null?void 0:o.toString(),w=(u=m.data.id)==null?void 0:u.toString(),v=(d=m.data.user_id)==null?void 0:d.toString();let A=b||v||w;if(!A||A==="unknown"){const S=m.data.email;S&&(S.includes("200120")||S==="h0920@aisha.jp"||S==="admin@aisha.jp")?A="200120":A="unknown"}let j=await gf(A);A==="200120"&&(j=!0);const z={id:A,username:m.data.email||"unknown",name:m.data.name||"MyGarageユーザー",email:m.data.email||"",credits:100,isAdmin:j,personalSettings:{numberManagement:{},referenceRegistration:{carPhotos:[{viewAngle:"front",label:"フロント正面"},{viewAngle:"side",label:"サイド"},{viewAngle:"rear",label:"リア"},{viewAngle:"front_angled_7_3",label:"フロント斜め"},{viewAngle:"rear_angled_7_3",label:"リア斜め"}]}}};return console.log("Successfully created AISHA user:",z),z}else{console.log("Login failed - checking error conditions:"),console.log("data.data exists:",!!m.data),console.log("data.error exists:",!!m.error),console.log("data.message exists:",!!m.message);let x="ログインに失敗しました";if(m.error&&m.error.message){const b=m.error.message;b==="Unauthorized"?x="メールアドレスまたはパスワードが正しくありません":x=b}else m.message&&(x=m.message);throw new Error(x)}}catch(h){if(console.error("MyGarage login error:",h),h instanceof TypeError&&h.message.includes("fetch"))return console.warn("Network error, using test implementation"),Rp(s);throw h}},Rp=async(s,n)=>{const o=[{id:"1",username:"test@example.com",name:"テストユーザー1",email:"test@example.com"},{id:"2",username:"demo@example.com",name:"デモユーザー",email:"demo@example.com"},{id:"3",username:"sample@example.com",name:"サンプルユーザー",email:"sample@example.com"}].find(u=>u.username===s||u.username.includes(s));if(o){const u=`test-token-${Date.now()}`;localStorage.setItem("mygarage-token",u);let d=await gf(o.id);return o.id==="200120"&&(d=!0),{id:o.id,username:o.username,name:o.name,email:o.email,credits:100,isAdmin:d,personalSettings:{numberManagement:{},referenceRegistration:{carPhotos:[{viewAngle:"front",label:"フロント正面"},{viewAngle:"side",label:"サイド"},{viewAngle:"rear",label:"リア"},{viewAngle:"front_angled_7_3",label:"フロント斜め"},{viewAngle:"rear_angled_7_3",label:"リア斜め"}]}}}}throw new Error("テストユーザーが見つかりません。test@example.com を試してください。")},Fj=async()=>{try{const s=localStorage.getItem("mygarage-token");s&&await fetch(`${No}/logout`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})}catch(s){console.error("MyGarage logout error:",s)}finally{localStorage.removeItem("mygarage-token")}},kp=async()=>{var s,n,r;try{const o=localStorage.getItem("mygarage-token");if(!o)return null;const u=await fetch(`${No}/validate`,{method:"GET",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(!u.ok)return localStorage.removeItem("mygarage-token"),null;const d=await u.json();if(d.data&&(d.data.token||d.data.mygarage_token||d.data.device_token)){const p=(s=d.data.created_by)==null?void 0:s.toString(),m=(n=d.data.id)==null?void 0:n.toString(),x=(r=d.data.user_id)==null?void 0:r.toString();let b=p||x||m;if(!b||b==="unknown"){const A=d.data.email;A&&(A.includes("200120")||A==="h0920@aisha.jp"||A==="admin@aisha.jp")?b="200120":b="unknown"}let w=await gf(b);return b==="200120"&&(w=!0),{id:b,username:d.data.email||"unknown",name:d.data.name||"MyGarageユーザー",email:d.data.email||"",credits:100,isAdmin:w,personalSettings:{numberManagement:{},referenceRegistration:{carPhotos:[{viewAngle:"front",label:"フロント正面"},{viewAngle:"side",label:"サイド"},{viewAngle:"rear",label:"リア"},{viewAngle:"front_angled_7_3",label:"フロント斜め"},{viewAngle:"rear_angled_7_3",label:"リア斜め"}]}}}}return localStorage.removeItem("mygarage-token"),null}catch(o){return console.error("MyGarage token validation error:",o),localStorage.removeItem("mygarage-token"),null}},Yj=()=>{const{showToast:s}=wn(),n=rr(),{refreshCredits:r}=xx(),[o,u]=C.useState(!1),[d,h]=C.useState(null),[p,m]=C.useState(""),[x,b]=C.useState(""),[w,v]=C.useState(!1),[A,j]=C.useState(!1),[z,S]=C.useState(!1),[V,X]=C.useState(!1),[O,ie]=C.useState(!1),[T,G]=C.useState([]),[re,le]=C.useState([]),[ee,ae]=C.useState(!1),[K,q]=C.useState(!1),[U,te]=C.useState(!1),[ne,k]=C.useState({category:null,menu:null,image:null,additionalPromptForMyCar:"",additionalPromptForOthers:"",aspectRatio:Zv,promptVariables:[],inputType:"upload"}),[$,se]=C.useState([]),[be,_]=C.useState(null),[D,W]=C.useState(null),[H,J]=C.useState(null),[oe,ue]=C.useState([]),[Ue,Se]=C.useState(!1),[ft,Ge]=C.useState("generator"),[en,Oa]=C.useState(!1),[Vt,ss]=C.useState(null);C.useEffect(()=>{const Z=localStorage.getItem("mygarage-saved-username"),fe=localStorage.getItem("mygarage-saved-password");localStorage.getItem("mygarage-save-password")==="true"&&(v(!0),Z&&m(Z),fe&&b(fe))},[]),C.useEffect(()=>{(async()=>{const fe=MS(dt,async _e=>{if(_e)try{const we=await _e.getIdToken(),Oe=await(await fetch("/api/firebase-auth/validate",{method:"GET",headers:{Authorization:`Bearer ${we}`}})).json();if(Oe.success&&Oe.user){const Le={id:Oe.user.id,name:Oe.user.nickname,loginType:"phone",phoneNumber:Oe.user.phoneNumber,isAdmin:Oe.user.isAdmin||!1};h(Le),Ge("generator");return}}catch{h(null);try{await yp()}catch{}}else try{const we=await kp();if(we){const je={id:we.id,name:we.name,isAdmin:we.isAdmin,personalSettings:we.personalSettings,loginType:"mygarage"};h(je),Ge("generator")}}catch{}});return()=>fe()})()},[]),C.useEffect(()=>{d&&(Di(),Ot(),Ui())},[d]);const Di=async()=>{if(d!=null&&d.id)try{const Z=await kg(d.id,!0);G(Z)}catch(Z){console.error("ライブラリの読み込みに失敗しました:",Z),s("error","ライブラリの読み込みに失敗しました")}},Ui=async()=>{if(d!=null&&d.id)try{const Z=await kg(d.id,!1);se(Z)}catch(Z){console.error("生成履歴の読み込みに失敗しました:",Z),s("error","生成履歴の読み込みに失敗しました")}},Ot=async()=>{try{const Z=await Nw();ue(Z)}catch(Z){console.error("公開ライブラリの読み込みに失敗しました:",Z)}};C.useEffect(()=>{(async()=>{try{const fe=await kp();if(fe){const _e={id:fe.id,name:fe.name,isAdmin:fe.isAdmin,personalSettings:fe.personalSettings||{numberManagement:{},referenceRegistration:{carPhotos:[{viewAngle:"front",label:"フロント正面"},{viewAngle:"side",label:"サイド"},{viewAngle:"rear",label:"リア"},{viewAngle:"front_angled_7_3",label:"フロント斜め"},{viewAngle:"rear_angled_7_3",label:"リア斜め"}]}}};h(_e),Ge("generator")}}catch(fe){console.error("Token validation error:",fe)}})(),Ot()},[]),C.useEffect(()=>{const Z=new URLSearchParams(window.location.search);if(Z.get("share")==="true"){const fe=decodeURIComponent(Z.get("image")||"");W({sharedByUser:decodeURIComponent(Z.get("user")||"不明なユーザー"),sharedDate:decodeURIComponent(Z.get("date")||new Date().toISOString()),sharedImageUrl:fe,sharedPrompt:decodeURIComponent(Z.get("prompt")||""),sharedMenuName:decodeURIComponent(Z.get("menu")||"")})}},[]),C.useEffect(()=>{d&&r(d.id)},[d]);const Ho=Z=>({id:Z.id.toString(),goodsName:Z.product_title,imageId:Z.library_image_id,imageUrl:Z.sample_image_url,prompt:Z.description||Z.car_name,timestamp:new Date(Z.created_at),creditCost:0,selectedVariations:{itemType:Z.item_name,productId:Z.product_id.toString(),productUrl:Z.product_url,originalImageUrl:Z.original_image_url}}),lr=async()=>{if(d!=null&&d.id)try{console.log("📦 グッズ履歴を取得中... user_id:",d.id);const Z=await ef.getUserGoodsHistory(d.id);console.log("✅ グッズ履歴取得成功:",Z);const fe=Z.map(Ho);le(fe)}catch(Z){console.error("❌ グッズ履歴取得エラー:",Z),le([])}};C.useEffect(()=>{K&&lr()},[K,d==null?void 0:d.id]);const Li=C.useCallback(()=>{u(Z=>!Z),o||Ge("generator")},[o]),rs=async()=>{try{const Z=await $j(p,x);if(Z){w?(localStorage.setItem("mygarage-saved-username",p),localStorage.setItem("mygarage-saved-password",x),localStorage.setItem("mygarage-save-password","true")):(localStorage.removeItem("mygarage-saved-username"),localStorage.removeItem("mygarage-saved-password"),localStorage.removeItem("mygarage-save-password"));const fe={id:Z.id,name:Z.name,isAdmin:Z.isAdmin,personalSettings:Z.personalSettings||{numberManagement:{},referenceRegistration:{carPhotos:[{viewAngle:"front",label:"フロント正面"},{viewAngle:"side",label:"サイド"},{viewAngle:"rear",label:"リア"},{viewAngle:"front_angled_7_3",label:"フロント斜め"},{viewAngle:"rear_angled_7_3",label:"リア斜め"}]}}};h(fe),j(!1),Ge("generator"),s("success",`${Z.name}さん、ログインしました`)}}catch(Z){console.error("Login error:",Z),s("error",Z instanceof Error?Z.message:"ログインエラーが発生しました")}},Bo=()=>{j(!1),ie(!0)},zi=Z=>{h(Z),ie(!1),Ge("generator"),s("success","ログインしました")},Vo=Z=>{s("error",Z)},qo=async()=>{try{(d==null?void 0:d.loginType)==="phone"?await yp():await Fj(),h(null),u(!1),Ge("timeline"),s("success","ログアウトしました")}catch(Z){console.error("Logout error:",Z),h(null),u(!1),Ge("timeline"),s("info","ログアウトしました")}},Ma=async Z=>{if(!d){s("error","ユーザー情報が取得できません"),S(!1);return}r(d.id),S(!1)},wt=C.useCallback(async Z=>{var we,je,Oe,Le,ht,_n,os,cs,Bi;if(!(d!=null&&d.id))return;if(T.some($e=>$e.id===Z.id)){s("info","この画像は既にライブラリに保存されています");return}const _e={...Z,authorName:(d==null?void 0:d.name)||"ゲスト"};try{const $e=await Og(d.id,{..._e,isSavedToLibrary:!0});$e&&(G(St=>[$e,...St.filter(qt=>qt.id!==$e.id)]),$e.isPublic?ue(St=>{const qt=St.findIndex(tn=>tn.id===$e.id);if(qt>-1){const tn=[...St];return tn[qt]=$e,tn}return[$e,...St]}):ue(St=>St.filter(qt=>qt.id!==$e.id)),s("success","ライブラリに保存されました"))}catch($e){console.error("ライブラリ保存に失敗しました:",$e),((we=$e==null?void 0:$e.response)==null?void 0:we.status)===400&&((ht=(Le=(Oe=(je=$e==null?void 0:$e.response)==null?void 0:je.data)==null?void 0:Oe.error)==null?void 0:Le.includes)!=null&&ht.call(Le,"unique"))||(Bi=(cs=(os=(_n=$e==null?void 0:$e.response)==null?void 0:_n.data)==null?void 0:os.error)==null?void 0:cs.includes)!=null&&Bi.call(cs,"重複")?s("info","この画像は既にライブラリに保存されています"):s("error","ライブラリへの保存に失敗しました"),G(St=>[_e,...St.filter(qt=>qt.id!==_e.id)])}},[d,s]),dn=C.useCallback(async Z=>{if(!(d!=null&&d.id))return;const fe={...Z,authorName:(d==null?void 0:d.name)||"ゲスト"};try{const _e=await Og(d.id,{...fe,isSavedToLibrary:!1});_e&&console.log("✅ タイムラインに保存されました:",_e.id)}catch(_e){console.error("❌ タイムライン保存に失敗しました:",_e)}},[d]),Nt=C.useCallback(async Z=>{if(d!=null&&d.id)try{await cd(d.id,Z.id,{isSavedToLibrary:!0})&&(se(_e=>_e.map(we=>we.id===Z.id?{...we,isSavedToLibrary:!0}:we)),Di(),s("success","ライブラリに保存されました"))}catch(fe){console.error("❌ ライブラリ保存に失敗しました:",fe),s("error","ライブラリへの保存に失敗しました")}},[d,s]),or=C.useCallback(Z=>{le(fe=>[Z,...fe])},[]),cr=C.useCallback(Z=>{d&&h(fe=>({...fe,credits:Z}))},[d]),Go=C.useCallback((Z,fe)=>{J({type:"loadFromLibrary",formData:Z,generatedImageUrl:fe}),ae(!1),Ge("generator")},[]),is=C.useCallback(Z=>{if(!d||n<Vn){s("error",`画像を拡張するためのクレジットが不足しています。（必要: ${Vn}, 保有: ${n}）`);return}ss(Z),Oa(!0)},[d,n,s]),Xn=C.useCallback(()=>{Oa(!1),ss(null)},[]),Sn=C.useCallback(async Z=>{if(!Vt||!d){s("error","画像拡張の準備ができていません。");return}ae(!1),Ge("generator"),Se(!0);try{const fe={credits:Vn,user_id:d.id};await Md(fe,()=>s("error","クレジット消費に失敗しました（画像拡張は成功）")),r(d.id);const we=await vx(Vt.id,Z,d.id,je=>{console.error("画像拡張エラー:",je),s("error",je instanceof Error?je.message:"画像拡張に失敗しました")});we&&(G(je=>[we,...je]),se(je=>[we,...je]),s("success","画像の拡張が完了しました！"))}catch(fe){console.error("画像拡張処理エラー:",fe),s("error","画像拡張処理中にエラーが発生しました")}finally{Xn(),Se(!1)}},[Vt,d,r,s,G,Xn]),ls=C.useCallback(()=>{J(null)},[]),Kn=C.useCallback(async(Z,fe)=>{if(d!=null&&d.id)try{await cd(d.id,Z,{rating:fe})&&(G(we=>we.map(je=>je.id===Z?{...je,rating:fe}:je)),ue(we=>we.map(je=>je.id===Z?{...je,rating:fe}:je)),se(we=>we.map(je=>je.id===Z?{...je,rating:fe}:je)),s("info",`画像を評価しました: ${fe==="good"?"良い":"悪い"}`))}catch(_e){console.error("評価の更新に失敗しました:",_e),s("error","評価の更新に失敗しました")}},[d,s]),$o=C.useCallback(async Z=>{if(d!=null&&d.id)try{await wx(d.id,Z)&&(G(_e=>_e.filter(we=>we.id!==Z)),ue(_e=>_e.filter(we=>we.id!==Z)),s("info","画像をライブラリから削除しました。"))}catch(fe){console.error("削除に失敗しました:",fe),s("error","削除に失敗しました")}},[d,s]),Pi=C.useCallback((Z,fe)=>{if(!d||n<Z.creditCost){s("error",`${Z.name}を作成するためのクレジットが不足しています。`);return}const _e=n-Z.creditCost;cr(_e);const we={id:`${Z.id}-${Date.now()}`,goodsName:Z.name,imageId:fe.id,imageUrl:fe.url,prompt:fe.displayPrompt,timestamp:new Date,creditCost:Z.creditCost};or(we),s("success",`(モック) ${Z.name}をライブラリの画像から作成しました。`)},[d,cr,or]),ur=C.useCallback(async(Z,fe)=>{if(d!=null&&d.id)try{const _e=fe?(d==null?void 0:d.name)||"ゲスト":void 0,we=await cd(d.id,Z,{isPublic:fe,authorName:_e});we&&(G(je=>je.map(Oe=>Oe.id===Z?{...Oe,isPublic:fe,authorName:_e}:Oe)),se(je=>je.map(Oe=>Oe.id===Z?{...Oe,isPublic:fe,authorName:_e}:Oe)),ue(fe?je=>{const Oe=je.findIndex(Le=>Le.id===Z);if(Oe>-1){const Le=[...je];return Le[Oe]={...we,authorName:_e},Le}return[{...we,authorName:_e},...je]}:je=>je.filter(Oe=>Oe.id!==Z)),s("info",`画像の公開設定を${fe?"公開":"非公開"}に変更しました。`))}catch(_e){console.error("公開設定の更新に失敗しました:",_e),s("error","公開設定の更新に失敗しました")}},[d,s]),dr=C.useCallback(()=>{Ge(Z=>Z==="generator"?"timeline":"generator")},[]),Ia=C.useCallback(Z=>{d&&(h(fe=>({...fe,personalSettings:Z})),s("success","愛車設定を保存しました。"),X(!1))},[d]),Fo=C.useCallback(()=>{te(!0)},[d]);if(D&&D.sharedImageUrl)return l.jsx(Zw,{params:D,onClose:()=>{W(null),window.history.replaceState({},document.title,window.location.pathname)}});const Hi=()=>d?o?l.jsx(Ow,{}):ft==="timeline"?l.jsx(Ig,{publicImages:oe,currentUser:d}):l.jsx(Sw,{currentUser:d,addToGenerationHistory:wt,saveToTimelineOnGeneration:dn,saveExistingImageToLibrary:Nt,onAddToGoodsHistory:or,onUpdateCredits:cr,menuExePanelFormData:ne,setMenuExePanelFormData:k,generatedImages:$,setGeneratedImages:se,onToggleImagePublicStatus:ur,onRateImage:Kn,onReloadUserHistory:Ui,isLibraryExtending:Ue,actionAfterLoad:H,onActionAfterLoadPerformed:ls}):l.jsx(Ig,{publicImages:oe,currentUser:null});return l.jsx(Rw,{children:l.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-900 text-gray-100",children:[l.jsx(Pw,{user:d,onLoginClick:()=>j(!0),onLogoutClick:qo,onPlansClick:()=>S(!0),onToggleAdminView:Li,isAdminView:o,onGenerationHistoryClick:()=>ae(!0),onGoodsHistoryClick:()=>q(!0),currentAppView:d?ft:void 0,onToggleAppViewMode:d?dr:void 0,onPersonalSettingsClick:d?()=>X(!0):void 0}),l.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:l.jsx(ew,{children:l.jsx(iw,{children:Hi()})})}),A&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-xl w-full max-w-md",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-6 text-center text-indigo-400",children:"MyGarage ログイン"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-1",children:"メールアドレス"}),l.jsx("input",{type:"email",id:"username",name:"username",placeholder:"MyGarageのメールアドレス",className:"w-full p-2.5 bg-gray-700 border border-gray-600 rounded-md text-gray-200 placeholder-gray-500 focus:ring-indigo-500 focus:border-indigo-500",value:p,onChange:Z=>m(Z.target.value)})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"パスワード"}),l.jsx("input",{type:"password",id:"password",name:"password",placeholder:"MyGarageのパスワード",className:"w-full p-2.5 bg-gray-700 border border-gray-600 rounded-md text-gray-200 placeholder-gray-500 focus:ring-indigo-500 focus:border-indigo-500",value:x,onChange:Z=>b(Z.target.value)})]}),l.jsxs("div",{className:"mb-4 flex items-center",children:[l.jsx("input",{type:"checkbox",id:"savePassword",checked:w,onChange:Z=>v(Z.target.checked),className:"mr-2 h-4 w-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500"}),l.jsx("label",{htmlFor:"savePassword",className:"text-sm text-gray-300",children:"ログインパスワードを保存する"})]}),l.jsx("p",{className:"text-gray-400 mb-4 text-center text-xs",children:"MyGarageアカウントのメールアドレスでログインします"}),l.jsx("button",{onClick:rs,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition duration-150 ease-in-out mb-3",children:"MyGarageでログイン"}),l.jsxs("div",{className:"relative mb-3",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-600"})}),l.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:l.jsx("span",{className:"bg-gray-800 px-2 text-gray-500",children:"開発用"})})]}),l.jsx("button",{onClick:Bo,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-150 ease-in-out mb-3",children:"電話番号でログイン"}),l.jsx("button",{onClick:()=>j(!1),className:"w-full bg-gray-600 hover:bg-gray-700 text-gray-200 font-bold py-3 px-6 rounded-lg transition duration-150 ease-in-out",children:"閉じる"})]})}),l.jsx(qj,{isOpen:z,onClose:()=>S(!1),onSelectPlan:Ma,currentUser:d,onPaymentHistoryClick:Fo}),l.jsx(Bw,{isOpen:ee,onClose:()=>ae(!1),history:T,onLoadOptions:Go,onRateImageInLibrary:Kn,onDeleteFromLibrary:$o,onCreateGoodsForLibrary:Pi,onExtendImageFromLibrary:is,onToggleLibraryImagePublicStatus:ur,currentUser:d}),l.jsx(Vw,{isOpen:K,onClose:()=>q(!1),history:re,currentUser:d,onGoodsCreated:()=>{console.log("🔄 App.tsx - グッズ作成完了通知受信、履歴を再取得します"),lr()}}),l.jsx(qw,{isOpen:U,onClose:()=>te(!1),currentUser:d}),l.jsx(bx,{isOpen:en,onClose:Xn,onConfirm:Sn,imageName:(Vt==null?void 0:Vt.displayPrompt)||"画像"}),d&&V&&l.jsx(Xw,{currentUser:d,onSave:Ia,onClose:()=>X(!1)}),l.jsx(cj,{isOpen:O,onClose:()=>ie(!1),onLoginSuccess:zi,onError:Vo}),l.jsx(Kw,{})]})})},Ay=document.getElementById("root");if(!Ay)throw new Error("Could not find root element to mount to");const Xj=Yv.createRoot(Ay);Xj.render(l.jsx(Te.StrictMode,{children:l.jsx(J2,{children:l.jsx(cw,{children:l.jsx(Yj,{})})})}));
